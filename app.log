2023-06-23 12:46:36,033 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:46:36,033 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:46:36,034 [INFO]  * Restarting with stat
2023-06-23 12:46:36,210 [WARNING]  * Debugger is active!
2023-06-23 12:46:36,217 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:46:57,661 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:46:57,701 [INFO]  * Restarting with stat
2023-06-23 12:46:57,890 [WARNING]  * Debugger is active!
2023-06-23 12:46:57,895 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:47:25,866 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm
2023-06-23 12:47:25,866 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NLqUOIJTenxdmPoEgU2Kjqh
2023-06-23 12:47:25,887 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:47:26,393 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm HTTP/1.1" 400 1971
2023-06-23 12:47:26,394 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm response_code=400
2023-06-23 12:47:26,394 [DEBUG] body='{\n  "error": {\n    "message": "The PaymentMethod pm_1NLqUOIJTenxdmPoEgU2Kjqh does not belong to the Customer you supplied cus_O8NBUvatY5ecjm. Please use this PaymentMethod with the Customer that it belongs to instead.",\n    "param": "payment_method",\n    "payment_intent": {\n      "id": "pi_3NM6TOIJTenxdmPo0kSsV4HS",\n      "object": "payment_intent",\n      "amount": 95000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NM6TOIJTenxdmPo0kSsV4HS_secret_uelohCwvNJrFFlYVcLVGBY8eW",\n      "confirmation_method": "automatic",\n      "created": 1687513210,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n        "product_id": "prod_O8NBcStczGEHFb"\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_9W9qtLp3hEd5ef?t=1687513646",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:47:26,394 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_9W9qtLp3hEd5ef message='Dashboard link for request'
2023-06-23 12:47:26,394 [INFO] error_code=None error_message='The PaymentMethod pm_1NLqUOIJTenxdmPoEgU2Kjqh does not belong to the Customer you supplied cus_O8NBUvatY5ecjm. Please use this PaymentMethod with the Customer that it belongs to instead.' error_param=payment_method error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:47:26,403 [INFO] 127.0.0.1 - - [23/Jun/2023 12:47:26] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:49:00,767 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:49:01,237 [INFO]  * Restarting with stat
2023-06-23 12:49:36,929 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:49:36,930 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:49:36,930 [INFO]  * Restarting with stat
2023-06-23 12:49:37,119 [WARNING]  * Debugger is active!
2023-06-23 12:49:37,123 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:49:41,925 [INFO] 127.0.0.1 - - [23/Jun/2023 12:49:41] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:50:37,696 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_customer_adapter.py', reloading
2023-06-23 12:50:38,134 [INFO]  * Restarting with stat
2023-06-23 12:50:38,334 [WARNING]  * Debugger is active!
2023-06-23 12:50:38,339 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:50:42,679 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:50:42,718 [INFO]  * Restarting with stat
2023-06-23 12:50:42,907 [WARNING]  * Debugger is active!
2023-06-23 12:50:42,911 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:51:11,733 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:51:11,768 [INFO]  * Restarting with stat
2023-06-23 12:51:11,947 [WARNING]  * Debugger is active!
2023-06-23 12:51:11,951 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:51:13,545 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:51:13,545 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:51:13,546 [INFO]  * Restarting with stat
2023-06-23 12:51:13,724 [WARNING]  * Debugger is active!
2023-06-23 12:51:13,729 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:51:17,857 [INFO] 127.0.0.1 - - [23/Jun/2023 12:51:17] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:52:10,206 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-23 12:52:10,617 [INFO]  * Restarting with stat
2023-06-23 12:52:11,631 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:52:11,631 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:52:11,631 [INFO]  * Restarting with stat
2023-06-23 12:52:11,835 [WARNING]  * Debugger is active!
2023-06-23 12:52:11,841 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:52:14,048 [INFO] 127.0.0.1 - - [23/Jun/2023 12:52:14] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:52:36,474 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:52:36,984 [INFO]  * Restarting with stat
2023-06-23 12:52:37,173 [WARNING]  * Debugger is active!
2023-06-23 12:52:37,177 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:52:39,907 [INFO] 127.0.0.1 - - [23/Jun/2023 12:52:39] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:52:58,143 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:52:58,143 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:52:58,143 [INFO]  * Restarting with stat
2023-06-23 12:52:58,325 [WARNING]  * Debugger is active!
2023-06-23 12:52:58,331 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:53:05,337 [INFO] 127.0.0.1 - - [23/Jun/2023 12:53:05] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:54:21,836 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:54:22,382 [INFO]  * Restarting with stat
2023-06-23 12:54:23,469 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:54:23,469 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:54:23,470 [INFO]  * Restarting with stat
2023-06-23 12:54:23,652 [WARNING]  * Debugger is active!
2023-06-23 12:54:23,657 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:54:25,809 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:54:25,809 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:54:25,823 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:54:26,246 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:54:26,248 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:54:26,248 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:54:26,249 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_vt2qYr1g4AHasW message='Dashboard link for request'
2023-06-23 12:54:26,252 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm
2023-06-23 12:54:26,252 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NLqUOIJTenxdmPoEgU2Kjqh
2023-06-23 12:54:26,599 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm HTTP/1.1" 400 1971
2023-06-23 12:54:26,601 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm response_code=400
2023-06-23 12:54:26,601 [DEBUG] body='{\n  "error": {\n    "message": "The PaymentMethod pm_1NLqUOIJTenxdmPoEgU2Kjqh does not belong to the Customer you supplied cus_O8NBUvatY5ecjm. Please use this PaymentMethod with the Customer that it belongs to instead.",\n    "param": "payment_method",\n    "payment_intent": {\n      "id": "pi_3NM6TOIJTenxdmPo0kSsV4HS",\n      "object": "payment_intent",\n      "amount": 95000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NM6TOIJTenxdmPo0kSsV4HS_secret_uelohCwvNJrFFlYVcLVGBY8eW",\n      "confirmation_method": "automatic",\n      "created": 1687513210,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n        "product_id": "prod_O8NBcStczGEHFb"\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_UrMijqgmJI27g6?t=1687514066",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:54:26,601 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_UrMijqgmJI27g6 message='Dashboard link for request'
2023-06-23 12:54:26,602 [INFO] error_code=None error_message='The PaymentMethod pm_1NLqUOIJTenxdmPoEgU2Kjqh does not belong to the Customer you supplied cus_O8NBUvatY5ecjm. Please use this PaymentMethod with the Customer that it belongs to instead.' error_param=payment_method error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:54:26,619 [INFO] 127.0.0.1 - - [23/Jun/2023 12:54:26] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:54:56,914 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:54:57,361 [INFO]  * Restarting with stat
2023-06-23 12:54:57,542 [WARNING]  * Debugger is active!
2023-06-23 12:54:57,546 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:54:59,712 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:54:59,713 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:54:59,730 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:55:00,147 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:55:00,147 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:55:00,147 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:55:00,147 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_KHFhDJQIDP07Fk message='Dashboard link for request'
2023-06-23 12:55:00,148 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm
2023-06-23 12:55:00,148 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NLqUOIJTenxdmPoEgU2Kjqh
2023-06-23 12:55:00,477 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm HTTP/1.1" 400 1971
2023-06-23 12:55:00,479 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NM6TOIJTenxdmPo0kSsV4HS/confirm response_code=400
2023-06-23 12:55:00,479 [DEBUG] body='{\n  "error": {\n    "message": "The PaymentMethod pm_1NLqUOIJTenxdmPoEgU2Kjqh does not belong to the Customer you supplied cus_O8NBUvatY5ecjm. Please use this PaymentMethod with the Customer that it belongs to instead.",\n    "param": "payment_method",\n    "payment_intent": {\n      "id": "pi_3NM6TOIJTenxdmPo0kSsV4HS",\n      "object": "payment_intent",\n      "amount": 95000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NM6TOIJTenxdmPo0kSsV4HS_secret_uelohCwvNJrFFlYVcLVGBY8eW",\n      "confirmation_method": "automatic",\n      "created": 1687513210,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n        "product_id": "prod_O8NBcStczGEHFb"\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_MX397JD7Cw5EWH?t=1687514100",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:55:00,479 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_MX397JD7Cw5EWH message='Dashboard link for request'
2023-06-23 12:55:00,479 [INFO] error_code=None error_message='The PaymentMethod pm_1NLqUOIJTenxdmPoEgU2Kjqh does not belong to the Customer you supplied cus_O8NBUvatY5ecjm. Please use this PaymentMethod with the Customer that it belongs to instead.' error_param=payment_method error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:55:00,494 [INFO] 127.0.0.1 - - [23/Jun/2023 12:55:00] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:55:09,310 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 12:55:09,677 [INFO]  * Restarting with stat
2023-06-23 12:55:09,864 [WARNING]  * Debugger is active!
2023-06-23 12:55:09,869 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:55:18,821 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:55:18,822 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:55:18,828 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:55:19,249 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:55:19,250 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:55:19,251 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:55:19,251 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_gOF2jpQBpvrObq message='Dashboard link for request'
2023-06-23 12:55:19,254 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm
2023-06-23 12:55:19,255 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NLqUOIJTenxdmPoEgU2Kjqh
2023-06-23 12:55:19,546 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm HTTP/1.1" 404 352
2023-06-23 12:55:19,546 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm response_code=404
2023-06-23 12:55:19,546 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such payment_intent: \'pm_1NM6SuIJTenxdmPocJWYIlQI\'",\n    "param": "intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_Q078bxkjQA4jSB?t=1687514119",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:55:19,546 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Q078bxkjQA4jSB message='Dashboard link for request'
2023-06-23 12:55:19,546 [INFO] error_code=resource_missing error_message="No such payment_intent: 'pm_1NM6SuIJTenxdmPocJWYIlQI'" error_param=intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:55:19,553 [INFO] 127.0.0.1 - - [23/Jun/2023 12:55:19] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:55:44,011 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 12:55:44,423 [INFO]  * Restarting with stat
2023-06-23 12:55:44,597 [WARNING]  * Debugger is active!
2023-06-23 12:55:44,602 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:55:47,158 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:55:47,158 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:55:47,170 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:55:47,603 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:55:47,605 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:55:47,605 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:55:47,605 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NBZK46DlfCy8YF message='Dashboard link for request'
2023-06-23 12:55:47,609 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm
2023-06-23 12:55:47,609 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-23 12:55:47,909 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm HTTP/1.1" 404 352
2023-06-23 12:55:47,909 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm response_code=404
2023-06-23 12:55:47,909 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such payment_intent: \'pm_1NM6SuIJTenxdmPocJWYIlQI\'",\n    "param": "intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_ubwO9pzdHRCom4?t=1687514147",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:55:47,909 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ubwO9pzdHRCom4 message='Dashboard link for request'
2023-06-23 12:55:47,909 [INFO] error_code=resource_missing error_message="No such payment_intent: 'pm_1NM6SuIJTenxdmPocJWYIlQI'" error_param=intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:55:47,921 [INFO] 127.0.0.1 - - [23/Jun/2023 12:55:47] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:56:30,346 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:56:30,346 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:56:30,347 [INFO]  * Restarting with stat
2023-06-23 12:56:30,548 [WARNING]  * Debugger is active!
2023-06-23 12:56:30,553 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:56:32,251 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:56:32,251 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:56:32,265 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:56:32,682 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:56:32,684 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:56:32,684 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:56:32,685 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ZztOYD19QWUcAC message='Dashboard link for request'
2023-06-23 12:56:32,688 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm
2023-06-23 12:56:32,688 [DEBUG] api_version=None message='Post details' post_data=payment_method=cus_O8NBUvatY5ecjm
2023-06-23 12:56:33,027 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm HTTP/1.1" 404 352
2023-06-23 12:56:33,028 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm response_code=404
2023-06-23 12:56:33,028 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such payment_intent: \'pm_1NM6SuIJTenxdmPocJWYIlQI\'",\n    "param": "intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_glKPnLVFWKvYUc?t=1687514192",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:56:33,029 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_glKPnLVFWKvYUc message='Dashboard link for request'
2023-06-23 12:56:33,029 [INFO] error_code=resource_missing error_message="No such payment_intent: 'pm_1NM6SuIJTenxdmPocJWYIlQI'" error_param=intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:56:33,045 [INFO] 127.0.0.1 - - [23/Jun/2023 12:56:33] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:57:12,570 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:57:12,570 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:57:12,572 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:57:12,980 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:57:12,980 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:57:12,980 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:57:12,980 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_L1Yzusk3onaaTZ message='Dashboard link for request'
2023-06-23 12:57:12,981 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm
2023-06-23 12:57:12,981 [DEBUG] api_version=None message='Post details' post_data=payment_method=cus_O8NBUvatY5ecjm
2023-06-23 12:57:13,294 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm HTTP/1.1" 404 352
2023-06-23 12:57:13,295 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm response_code=404
2023-06-23 12:57:13,296 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such payment_intent: \'pm_1NM6SuIJTenxdmPocJWYIlQI\'",\n    "param": "intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_LF6I2V8EZ2IcZ1?t=1687514233",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:57:13,296 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LF6I2V8EZ2IcZ1 message='Dashboard link for request'
2023-06-23 12:57:13,296 [INFO] error_code=resource_missing error_message="No such payment_intent: 'pm_1NM6SuIJTenxdmPocJWYIlQI'" error_param=intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:57:13,307 [INFO] 127.0.0.1 - - [23/Jun/2023 12:57:13] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 12:59:28,952 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 12:59:29,496 [INFO]  * Restarting with stat
2023-06-23 12:59:29,758 [WARNING]  * Debugger is active!
2023-06-23 12:59:29,763 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:59:30,754 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 12:59:30,755 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 12:59:30,755 [INFO]  * Restarting with stat
2023-06-23 12:59:30,961 [WARNING]  * Debugger is active!
2023-06-23 12:59:30,968 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 12:59:34,120 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 12:59:34,120 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 12:59:34,138 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 12:59:34,570 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 12:59:34,571 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 12:59:34,571 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 12:59:34,571 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_7aRVIXTyMjhhZ1 message='Dashboard link for request'
2023-06-23 12:59:34,577 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm
2023-06-23 12:59:34,577 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-23 12:59:34,877 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm HTTP/1.1" 404 352
2023-06-23 12:59:34,878 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm response_code=404
2023-06-23 12:59:34,878 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such payment_intent: \'pm_1NM6SuIJTenxdmPocJWYIlQI\'",\n    "param": "intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_WxDgtJiNxEvAcd?t=1687514374",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 12:59:34,878 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_WxDgtJiNxEvAcd message='Dashboard link for request'
2023-06-23 12:59:34,878 [INFO] error_code=resource_missing error_message="No such payment_intent: 'pm_1NM6SuIJTenxdmPocJWYIlQI'" error_param=intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 12:59:34,904 [INFO] 127.0.0.1 - - [23/Jun/2023 12:59:34] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 13:00:12,561 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 13:00:12,562 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 13:00:12,564 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 13:00:13,040 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 13:00:13,041 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 13:00:13,041 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 13:00:13,041 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_vMpHtcTiDIfeS1 message='Dashboard link for request'
2023-06-23 13:00:13,042 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm
2023-06-23 13:00:13,042 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-23 13:00:13,337 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm HTTP/1.1" 404 352
2023-06-23 13:00:13,339 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pm_1NM6SuIJTenxdmPocJWYIlQI/confirm response_code=404
2023-06-23 13:00:13,339 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such payment_intent: \'pm_1NM6SuIJTenxdmPocJWYIlQI\'",\n    "param": "intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_gmQ7gO2yBYcijD?t=1687514413",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 13:00:13,340 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_gmQ7gO2yBYcijD message='Dashboard link for request'
2023-06-23 13:00:13,340 [INFO] error_code=resource_missing error_message="No such payment_intent: 'pm_1NM6SuIJTenxdmPocJWYIlQI'" error_param=intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 13:00:13,357 [INFO] 127.0.0.1 - - [23/Jun/2023 13:00:13] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 13:01:05,664 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 13:01:06,820 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 13:01:06,820 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 13:01:06,820 [INFO]  * Restarting with stat
2023-06-23 13:01:07,025 [WARNING]  * Debugger is active!
2023-06-23 13:01:07,031 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 13:01:09,169 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 13:01:09,170 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 13:01:09,182 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 13:01:09,708 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 13:01:09,710 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 13:01:09,710 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 13:01:09,711 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_AfXmzpK6VRW2Ni message='Dashboard link for request'
2023-06-23 13:01:09,732 [INFO] 127.0.0.1 - - [23/Jun/2023 13:01:09] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 13:01:29,622 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 13:01:30,757 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 13:01:30,758 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 13:01:30,759 [INFO]  * Restarting with stat
2023-06-23 13:01:30,951 [WARNING]  * Debugger is active!
2023-06-23 13:01:30,956 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 13:01:34,186 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 13:01:34,186 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 13:01:34,205 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 13:01:34,621 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 13:01:34,623 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 13:01:34,623 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 13:01:34,623 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_lOKWvvr3KEmB9i message='Dashboard link for request'
2023-06-23 13:01:34,643 [INFO] 127.0.0.1 - - [23/Jun/2023 13:01:34] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 13:01:38,551 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 13:01:38,974 [INFO]  * Restarting with stat
2023-06-23 13:01:39,169 [WARNING]  * Debugger is active!
2023-06-23 13:01:39,174 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 13:01:40,442 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 13:01:40,442 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 13:01:40,448 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 13:01:40,887 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 709
2023-06-23 13:01:40,887 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 13:01:40,887 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": null,\n  "default_source": null,\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 13:01:40,887 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_oSMhRZVMJU0FfL message='Dashboard link for request'
2023-06-23 13:01:40,894 [INFO] 127.0.0.1 - - [23/Jun/2023 13:01:40] "[35m[1mPOST /payment/intent/completed HTTP/1.1[0m" 500 -
2023-06-23 19:49:42,954 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-23 19:49:43,336 [INFO]  * Restarting with stat
2023-06-23 19:49:43,582 [WARNING]  * Debugger is active!
2023-06-23 19:49:43,587 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 19:49:47,198 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-23 19:49:47,198 [DEBUG] api_version=None message='Post details' post_data=name=Free&type=service&description=Free+plan+-+Monthly+interval&metadata[credits]=5&metadata[seats]=1
2023-06-23 19:49:47,210 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 19:49:47,682 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 492
2023-06-23 19:49:47,687 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-23 19:49:47,687 [DEBUG] body='{\n  "id": "prod_O8U9MneICNZm8E",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687538987,\n  "default_price": null,\n  "description": "Free plan - Monthly interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "5",\n    "seats": "1"\n  },\n  "name": "Free",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687538987,\n  "url": null\n}' message='API response body'
2023-06-23 19:49:47,687 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_b2USjiTEEAhgCe message='Dashboard link for request'
2023-06-23 19:49:47,696 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-23 19:49:47,697 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8U9MneICNZm8E&unit_amount=0&currency=usd&recurring[interval]=month&recurring[usage_type]=licensed&metadata[label]=Monthly+Plan&metadata[description]=Monthly+subscription
2023-06-23 19:49:48,017 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 200 701
2023-06-23 19:49:48,018 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2023-06-23 19:49:48,018 [DEBUG] body='{\n  "id": "price_1NMDB9IJTenxdmPoQzeoRZ0Y",\n  "object": "price",\n  "active": true,\n  "billing_scheme": "per_unit",\n  "created": 1687538987,\n  "currency": "usd",\n  "custom_unit_amount": null,\n  "livemode": false,\n  "lookup_key": null,\n  "metadata": {\n    "description": "Monthly subscription",\n    "label": "Monthly Plan"\n  },\n  "nickname": null,\n  "product": "prod_O8U9MneICNZm8E",\n  "recurring": {\n    "aggregate_usage": null,\n    "interval": "month",\n    "interval_count": 1,\n    "trial_period_days": null,\n    "usage_type": "licensed"\n  },\n  "tax_behavior": "unspecified",\n  "tiers_mode": null,\n  "transform_quantity": null,\n  "type": "recurring",\n  "unit_amount": 0,\n  "unit_amount_decimal": "0"\n}' message='API response body'
2023-06-23 19:49:48,018 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_bnBTrKGp7NKIVK message='Dashboard link for request'
2023-06-23 19:49:48,772 [INFO] 127.0.0.1 - - [23/Jun/2023 19:49:48] "POST /product/create HTTP/1.1" 200 -
2023-06-23 19:50:31,674 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/product/product_routes.py', reloading
2023-06-23 19:50:31,708 [INFO]  * Restarting with stat
2023-06-23 19:50:31,894 [WARNING]  * Debugger is active!
2023-06-23 19:50:31,899 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 19:51:25,724 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/product/product_routes.py', reloading
2023-06-23 19:51:25,773 [INFO]  * Restarting with stat
2023-06-23 19:52:54,495 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 19:52:54,497 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 19:52:54,498 [INFO]  * Restarting with stat
2023-06-23 19:52:54,688 [WARNING]  * Debugger is active!
2023-06-23 19:52:54,693 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 19:52:56,530 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-23 19:52:56,530 [DEBUG] api_version=None message='Post details' post_data=name=Professional&type=service&description=Professional+plan+-+Monthly+interval&metadata[credits]=30&metadata[seats]=1
2023-06-23 19:52:56,543 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 19:52:57,031 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 509
2023-06-23 19:52:57,032 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-23 19:52:57,032 [DEBUG] body='{\n  "id": "prod_O8UCiYKmf7mpkH",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687539176,\n  "default_price": null,\n  "description": "Professional plan - Monthly interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "30",\n    "seats": "1"\n  },\n  "name": "Professional",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687539176,\n  "url": null\n}' message='API response body'
2023-06-23 19:52:57,032 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_bz0sVHLR3utwrO message='Dashboard link for request'
2023-06-23 19:52:57,034 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-23 19:52:57,034 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8UCiYKmf7mpkH&unit_amount=1000&currency=usd&recurring[interval]=month&recurring[usage_type]=licensed&metadata[label]=Monthly+Plan&metadata[description]=Monthly+subscription
2023-06-23 19:52:57,352 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 200 707
2023-06-23 19:52:57,354 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2023-06-23 19:52:57,354 [DEBUG] body='{\n  "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n  "object": "price",\n  "active": true,\n  "billing_scheme": "per_unit",\n  "created": 1687539177,\n  "currency": "usd",\n  "custom_unit_amount": null,\n  "livemode": false,\n  "lookup_key": null,\n  "metadata": {\n    "description": "Monthly subscription",\n    "label": "Monthly Plan"\n  },\n  "nickname": null,\n  "product": "prod_O8UCiYKmf7mpkH",\n  "recurring": {\n    "aggregate_usage": null,\n    "interval": "month",\n    "interval_count": 1,\n    "trial_period_days": null,\n    "usage_type": "licensed"\n  },\n  "tax_behavior": "unspecified",\n  "tiers_mode": null,\n  "transform_quantity": null,\n  "type": "recurring",\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 19:52:57,355 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_vtGqqCJyfn6F1n message='Dashboard link for request'
2023-06-23 19:52:58,102 [INFO] 127.0.0.1 - - [23/Jun/2023 19:52:58] "POST /product/create HTTP/1.1" 200 -
2023-06-23 19:53:29,500 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/product/product_routes.py', reloading
2023-06-23 19:53:29,535 [INFO]  * Restarting with stat
2023-06-23 19:53:29,721 [WARNING]  * Debugger is active!
2023-06-23 19:53:29,725 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 19:54:17,980 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-23 19:54:17,980 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Monthly+interval&metadata[credits]=100&metadata[seats]=1
2023-06-23 19:54:17,995 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 19:54:18,485 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 500
2023-06-23 19:54:18,486 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-23 19:54:18,486 [DEBUG] body='{\n  "id": "prod_O8UDPHRFLrl0qF",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687539258,\n  "default_price": null,\n  "description": "Premium plan - Monthly interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "100",\n    "seats": "1"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687539258,\n  "url": null\n}' message='API response body'
2023-06-23 19:54:18,487 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_M300A58kGIN46w message='Dashboard link for request'
2023-06-23 19:54:18,491 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-23 19:54:18,491 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8UDPHRFLrl0qF&unit_amount=5000&currency=usd&recurring[interval]=month&recurring[usage_type]=licensed&metadata[label]=Monthly+Plan&metadata[description]=Monthly+subscription
2023-06-23 19:54:18,811 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 200 707
2023-06-23 19:54:18,812 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2023-06-23 19:54:18,812 [DEBUG] body='{\n  "id": "price_1NMDFWIJTenxdmPo3ldgUan7",\n  "object": "price",\n  "active": true,\n  "billing_scheme": "per_unit",\n  "created": 1687539258,\n  "currency": "usd",\n  "custom_unit_amount": null,\n  "livemode": false,\n  "lookup_key": null,\n  "metadata": {\n    "description": "Monthly subscription",\n    "label": "Monthly Plan"\n  },\n  "nickname": null,\n  "product": "prod_O8UDPHRFLrl0qF",\n  "recurring": {\n    "aggregate_usage": null,\n    "interval": "month",\n    "interval_count": 1,\n    "trial_period_days": null,\n    "usage_type": "licensed"\n  },\n  "tax_behavior": "unspecified",\n  "tiers_mode": null,\n  "transform_quantity": null,\n  "type": "recurring",\n  "unit_amount": 5000,\n  "unit_amount_decimal": "5000"\n}' message='API response body'
2023-06-23 19:54:18,813 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_sj41wDP9Fpr0cl message='Dashboard link for request'
2023-06-23 19:54:19,548 [INFO] 127.0.0.1 - - [23/Jun/2023 19:54:19] "[35m[1mPOST /product/create HTTP/1.1[0m" 201 -
2023-06-23 20:01:41,840 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:01:41,882 [INFO]  * Restarting with stat
2023-06-23 20:01:42,121 [WARNING]  * Debugger is active!
2023-06-23 20:01:42,126 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:02:01,327 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:02:01,374 [INFO]  * Restarting with stat
2023-06-23 20:02:01,563 [WARNING]  * Debugger is active!
2023-06-23 20:02:01,567 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:02:57,973 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port .py', reloading
2023-06-23 20:02:58,025 [INFO]  * Restarting with stat
2023-06-23 20:02:58,226 [WARNING]  * Debugger is active!
2023-06-23 20:02:58,231 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:04:08,579 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_mongo_port.py', reloading
2023-06-23 20:04:08,613 [INFO]  * Restarting with stat
2023-06-23 20:04:08,795 [WARNING]  * Debugger is active!
2023-06-23 20:04:08,800 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:04:25,987 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_mongo_port.py', reloading
2023-06-23 20:04:26,020 [INFO]  * Restarting with stat
2023-06-23 20:04:26,211 [WARNING]  * Debugger is active!
2023-06-23 20:04:26,216 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:07:01,147 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:07:01,187 [INFO]  * Restarting with stat
2023-06-23 20:07:01,380 [WARNING]  * Debugger is active!
2023-06-23 20:07:01,385 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:08:14,880 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:08:14,915 [INFO]  * Restarting with stat
2023-06-23 20:08:15,086 [WARNING]  * Debugger is active!
2023-06-23 20:08:15,090 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:08:38,610 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port .py', reloading
2023-06-23 20:08:38,645 [INFO]  * Restarting with stat
2023-06-23 20:08:38,816 [WARNING]  * Debugger is active!
2023-06-23 20:08:38,820 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:08:44,208 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:08:44,249 [INFO]  * Restarting with stat
2023-06-23 20:08:44,447 [WARNING]  * Debugger is active!
2023-06-23 20:08:44,451 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:09:02,671 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:09:02,708 [INFO]  * Restarting with stat
2023-06-23 20:09:02,892 [WARNING]  * Debugger is active!
2023-06-23 20:09:02,897 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:09:50,842 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:09:50,875 [INFO]  * Restarting with stat
2023-06-23 20:09:51,046 [WARNING]  * Debugger is active!
2023-06-23 20:09:51,051 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:12:23,410 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:12:23,448 [INFO]  * Restarting with stat
2023-06-23 20:12:23,644 [WARNING]  * Debugger is active!
2023-06-23 20:12:23,650 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:13:38,287 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:13:38,327 [INFO]  * Restarting with stat
2023-06-23 20:13:38,520 [WARNING]  * Debugger is active!
2023-06-23 20:13:38,525 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:14:08,393 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:14:08,440 [INFO]  * Restarting with stat
2023-06-23 20:14:08,631 [WARNING]  * Debugger is active!
2023-06-23 20:14:08,635 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:14:09,765 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:14:09,805 [INFO]  * Restarting with stat
2023-06-23 20:14:09,995 [WARNING]  * Debugger is active!
2023-06-23 20:14:09,999 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:15:42,378 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-23 20:15:42,414 [INFO]  * Restarting with stat
2023-06-23 20:15:42,602 [WARNING]  * Debugger is active!
2023-06-23 20:15:42,607 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:16:38,972 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-23 20:16:39,006 [INFO]  * Restarting with stat
2023-06-23 20:16:39,179 [WARNING]  * Debugger is active!
2023-06-23 20:16:39,184 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:16:44,554 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-23 20:16:44,596 [INFO]  * Restarting with stat
2023-06-23 20:16:44,796 [WARNING]  * Debugger is active!
2023-06-23 20:16:44,800 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:16:45,942 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-23 20:16:45,982 [INFO]  * Restarting with stat
2023-06-23 20:16:46,172 [WARNING]  * Debugger is active!
2023-06-23 20:16:46,176 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:17:12,754 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/invoice/invoice_routes.py', reloading
2023-06-23 20:17:12,795 [INFO]  * Restarting with stat
2023-06-23 20:17:12,997 [WARNING]  * Debugger is active!
2023-06-23 20:17:13,001 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:17:15,214 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/register_routes.py', reloading
2023-06-23 20:17:15,256 [INFO]  * Restarting with stat
2023-06-23 20:17:15,453 [WARNING]  * Debugger is active!
2023-06-23 20:17:15,457 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:17:20,825 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/register_routes.py', reloading
2023-06-23 20:17:20,858 [INFO]  * Restarting with stat
2023-06-23 20:17:21,041 [WARNING]  * Debugger is active!
2023-06-23 20:17:21,046 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:18:22,814 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/invoice/invoice_routes.py', reloading
2023-06-23 20:18:22,853 [INFO]  * Restarting with stat
2023-06-23 20:22:50,610 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 20:22:50,612 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 20:22:50,613 [INFO]  * Restarting with stat
2023-06-23 20:22:50,797 [WARNING]  * Debugger is active!
2023-06-23 20:22:50,803 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:23:38,348 [INFO] 127.0.0.1 - - [23/Jun/2023 20:23:38] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:24:05,302 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 20:24:05,648 [INFO]  * Restarting with stat
2023-06-23 20:24:05,907 [WARNING]  * Debugger is active!
2023-06-23 20:24:05,912 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:24:07,051 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 20:24:07,096 [INFO]  * Restarting with stat
2023-06-23 20:24:07,298 [WARNING]  * Debugger is active!
2023-06-23 20:24:07,303 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:24:09,580 [INFO] 127.0.0.1 - - [23/Jun/2023 20:24:09] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:25:00,673 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-23 20:25:01,216 [INFO]  * Restarting with stat
2023-06-23 20:25:01,473 [WARNING]  * Debugger is active!
2023-06-23 20:25:01,478 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:25:04,753 [INFO] 127.0.0.1 - - [23/Jun/2023 20:25:04] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:25:18,630 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:25:18,994 [INFO]  * Restarting with stat
2023-06-23 20:25:19,256 [WARNING]  * Debugger is active!
2023-06-23 20:25:19,260 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:25:23,324 [INFO] 127.0.0.1 - - [23/Jun/2023 20:25:23] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:25:40,655 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:25:41,088 [INFO]  * Restarting with stat
2023-06-23 20:25:41,276 [WARNING]  * Debugger is active!
2023-06-23 20:25:41,281 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:25:43,141 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 20:25:43,141 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 20:25:43,142 [INFO]  * Restarting with stat
2023-06-23 20:25:43,365 [WARNING]  * Debugger is active!
2023-06-23 20:25:43,369 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:25:47,632 [INFO] 127.0.0.1 - - [23/Jun/2023 20:25:47] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:26:06,890 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:26:07,964 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 20:26:07,964 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 20:26:07,965 [INFO]  * Restarting with stat
2023-06-23 20:26:08,148 [WARNING]  * Debugger is active!
2023-06-23 20:26:08,153 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:26:11,107 [INFO] 127.0.0.1 - - [23/Jun/2023 20:26:11] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:27:15,434 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-23 20:27:15,775 [INFO]  * Restarting with stat
2023-06-23 20:27:15,974 [WARNING]  * Debugger is active!
2023-06-23 20:27:15,979 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:27:20,354 [INFO] 127.0.0.1 - - [23/Jun/2023 20:27:20] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:28:17,812 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:28:18,343 [INFO]  * Restarting with stat
2023-06-23 20:28:18,530 [WARNING]  * Debugger is active!
2023-06-23 20:28:18,535 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:28:23,900 [INFO] 127.0.0.1 - - [23/Jun/2023 20:28:23] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:28:47,437 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:28:47,777 [INFO]  * Restarting with stat
2023-06-23 20:28:47,957 [WARNING]  * Debugger is active!
2023-06-23 20:28:47,961 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:28:56,555 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-23 20:28:56,596 [INFO]  * Restarting with stat
2023-06-23 20:28:56,792 [WARNING]  * Debugger is active!
2023-06-23 20:28:56,797 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:29:36,260 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:29:36,298 [INFO]  * Restarting with stat
2023-06-23 20:29:36,480 [WARNING]  * Debugger is active!
2023-06-23 20:29:36,484 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:29:41,333 [INFO] 127.0.0.1 - - [23/Jun/2023 20:29:41] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:30:49,171 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:30:49,624 [INFO]  * Restarting with stat
2023-06-23 20:30:49,811 [WARNING]  * Debugger is active!
2023-06-23 20:30:49,815 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:31:26,058 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/invoice/invoice_routes.py', reloading
2023-06-23 20:31:26,092 [INFO]  * Restarting with stat
2023-06-23 20:31:26,294 [WARNING]  * Debugger is active!
2023-06-23 20:31:26,299 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:31:30,566 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:31:30,566 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10&line_items[0][price]=price_1NMDEDIJTenxdmPoiEJzYAhq&line_items[0][quantity]=2
2023-06-23 20:31:30,584 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:31:31,021 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 400 343
2023-06-23 20:31:31,023 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=400
2023-06-23 20:31:31,023 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: line_items",\n    "param": "line_items",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_eaVZTkPp7TUwKx?t=1687541490",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:31:31,024 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_eaVZTkPp7TUwKx message='Dashboard link for request'
2023-06-23 20:31:31,024 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: line_items' error_param=line_items error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:31:31,038 [INFO] 127.0.0.1 - - [23/Jun/2023 20:31:31] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:32:48,984 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:32:49,413 [INFO]  * Restarting with stat
2023-06-23 20:32:49,664 [WARNING]  * Debugger is active!
2023-06-23 20:32:49,669 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:32:54,006 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:32:54,042 [INFO]  * Restarting with stat
2023-06-23 20:32:54,251 [WARNING]  * Debugger is active!
2023-06-23 20:32:54,255 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:32:59,800 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:32:59,800 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10&line_items[0][price]=price_1NMDEDIJTenxdmPoiEJzYAhq&line_items[0][quantity]=1
2023-06-23 20:32:59,814 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:33:00,224 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 400 343
2023-06-23 20:33:00,225 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=400
2023-06-23 20:33:00,225 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: line_items",\n    "param": "line_items",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_jZkkG7qLVylRPj?t=1687541580",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:33:00,225 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_jZkkG7qLVylRPj message='Dashboard link for request'
2023-06-23 20:33:00,225 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: line_items' error_param=line_items error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:33:00,238 [INFO] 127.0.0.1 - - [23/Jun/2023 20:33:00] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:34:44,271 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-23 20:34:44,685 [INFO]  * Restarting with stat
2023-06-23 20:34:44,872 [WARNING]  * Debugger is active!
2023-06-23 20:34:44,877 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:35:17,093 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:35:17,129 [INFO]  * Restarting with stat
2023-06-23 20:35:17,302 [WARNING]  * Debugger is active!
2023-06-23 20:35:17,307 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:35:23,319 [INFO] 127.0.0.1 - - [23/Jun/2023 20:35:23] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:35:40,927 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:35:41,459 [INFO]  * Restarting with stat
2023-06-23 20:35:41,642 [WARNING]  * Debugger is active!
2023-06-23 20:35:41,646 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:35:45,347 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:35:45,347 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:35:45,362 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:35:45,869 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 400 298
2023-06-23 20:35:45,870 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=400
2023-06-23 20:35:45,871 [DEBUG] body='{\n  "error": {\n    "message": "The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.",\n    "param": "price",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_3jRaaybwXqKqJ9?t=1687541745",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:35:45,871 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3jRaaybwXqKqJ9 message='Dashboard link for request'
2023-06-23 20:35:45,871 [INFO] error_code=None error_message='The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.' error_param=price error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:35:45,883 [INFO] 127.0.0.1 - - [23/Jun/2023 20:35:45] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:37:22,485 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:37:23,894 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 20:37:23,894 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 20:37:23,896 [INFO]  * Restarting with stat
2023-06-23 20:37:24,078 [WARNING]  * Debugger is active!
2023-06-23 20:37:24,084 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:37:30,333 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:37:30,333 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:37:30,347 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:37:30,770 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 400 298
2023-06-23 20:37:30,771 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=400
2023-06-23 20:37:30,771 [DEBUG] body='{\n  "error": {\n    "message": "The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.",\n    "param": "price",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_ObmX9Qi0BvyKVz?t=1687541850",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:37:30,771 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ObmX9Qi0BvyKVz message='Dashboard link for request'
2023-06-23 20:37:30,771 [INFO] error_code=None error_message='The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.' error_param=price error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:37:30,784 [INFO] 127.0.0.1 - - [23/Jun/2023 20:37:30] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:38:02,921 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:38:03,402 [INFO]  * Restarting with stat
2023-06-23 20:38:03,581 [WARNING]  * Debugger is active!
2023-06-23 20:38:03,585 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:38:07,678 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:38:07,679 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:38:07,689 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:38:08,206 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 400 298
2023-06-23 20:38:08,208 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=400
2023-06-23 20:38:08,208 [DEBUG] body='{\n  "error": {\n    "message": "The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.",\n    "param": "price",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_OjclfLzfTZDF5r?t=1687541888",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:38:08,208 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_OjclfLzfTZDF5r message='Dashboard link for request'
2023-06-23 20:38:08,208 [INFO] error_code=None error_message='The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.' error_param=price error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:38:08,223 [INFO] 127.0.0.1 - - [23/Jun/2023 20:38:08] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:38:36,551 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:38:36,552 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:38:36,556 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:38:37,066 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1166
2023-06-23 20:38:37,069 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 20:38:37,069 [DEBUG] body='{\n  "id": "ii_1NMDwOIJTenxdmPoER3wp7EN",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O88n6FDYiOyslr",\n  "date": 1687541916,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": null,\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687541916,\n    "start": 1687541916\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 20:38:37,069 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_5qufbf1wf5QEfb message='Dashboard link for request'
2023-06-23 20:38:37,073 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:38:37,073 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 20:38:37,470 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 20:38:37,472 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 20:38:37,472 [DEBUG] body='{\n  "id": "in_1NMDwPIJTenxdmPofa2x5YQu",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687541917,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O88n6FDYiOyslr",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688405917,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMDwPIJTenxdmPofa2x5YQu/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687541917,\n  "period_start": 1687541917,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687541917\n}' message='API response body'
2023-06-23 20:38:37,472 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NCBW1GiH9FRElH message='Dashboard link for request'
2023-06-23 20:38:37,484 [INFO] 127.0.0.1 - - [23/Jun/2023 20:38:37] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:39:16,087 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:39:16,518 [INFO]  * Restarting with stat
2023-06-23 20:39:16,806 [WARNING]  * Debugger is active!
2023-06-23 20:39:16,811 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:39:19,023 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:39:19,061 [INFO]  * Restarting with stat
2023-06-23 20:39:19,239 [WARNING]  * Debugger is active!
2023-06-23 20:39:19,242 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:39:23,031 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:39:23,031 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10&line_items[0][price]=price_1NMDEDIJTenxdmPoiEJzYAhq&line_items[0][quantity]=1
2023-06-23 20:39:23,045 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:39:23,494 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 400 343
2023-06-23 20:39:23,496 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=400
2023-06-23 20:39:23,496 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: line_items",\n    "param": "line_items",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_VZi6icEzurvdt3?t=1687541963",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:39:23,497 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_VZi6icEzurvdt3 message='Dashboard link for request'
2023-06-23 20:39:23,497 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: line_items' error_param=line_items error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:39:23,513 [INFO] 127.0.0.1 - - [23/Jun/2023 20:39:23] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:41:01,874 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 20:41:02,389 [INFO]  * Restarting with stat
2023-06-23 20:41:02,567 [WARNING]  * Debugger is active!
2023-06-23 20:41:02,573 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:41:07,572 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:41:07,572 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 20:41:07,588 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:41:08,225 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 20:41:08,226 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 20:41:08,226 [DEBUG] body='{\n  "id": "in_1NMDyqIJTenxdmPoTgUsibT9",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687542068,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O88n6FDYiOyslr",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688406068,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMDyqIJTenxdmPoTgUsibT9/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687542068,\n  "period_start": 1687542068,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687542068\n}' message='API response body'
2023-06-23 20:41:08,226 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_bLtbc3S5O7xVY0 message='Dashboard link for request'
2023-06-23 20:41:08,228 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:41:08,228 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&invoice=in_1NMDyqIJTenxdmPoTgUsibT9&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:41:08,736 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 20:41:08,737 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 20:41:08,737 [DEBUG] body='{\n  "id": "ii_1NMDyqIJTenxdmPooJk8rNfJ",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O88n6FDYiOyslr",\n  "date": 1687542068,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMDyqIJTenxdmPoTgUsibT9",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687542068,\n    "start": 1687542068\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 20:41:08,737 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_RmgQaZyDv05K8F message='Dashboard link for request'
2023-06-23 20:41:08,743 [INFO] 127.0.0.1 - - [23/Jun/2023 20:41:08] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:43:37,834 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:43:38,343 [INFO]  * Restarting with stat
2023-06-23 20:43:38,602 [WARNING]  * Debugger is active!
2023-06-23 20:43:38,607 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:43:40,806 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:43:40,854 [INFO]  * Restarting with stat
2023-06-23 20:43:41,059 [WARNING]  * Debugger is active!
2023-06-23 20:43:41,064 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:43:58,942 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:43:58,943 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 20:43:58,957 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:43:59,642 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 20:43:59,642 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 20:43:59,642 [DEBUG] body='{\n  "id": "in_1NME1bIJTenxdmPodQD00HbO",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687542239,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O88n6FDYiOyslr",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688406239,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NME1bIJTenxdmPodQD00HbO/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687542239,\n  "period_start": 1687542239,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687542239\n}' message='API response body'
2023-06-23 20:43:59,643 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_yUPV0oEh2zqC1j message='Dashboard link for request'
2023-06-23 20:43:59,645 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:43:59,645 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&invoice=in_1NME1bIJTenxdmPodQD00HbO&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:44:00,054 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 20:44:00,055 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 20:44:00,055 [DEBUG] body='{\n  "id": "ii_1NME1bIJTenxdmPol9KqJD4p",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O88n6FDYiOyslr",\n  "date": 1687542239,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NME1bIJTenxdmPodQD00HbO",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687542239,\n    "start": 1687542239\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 20:44:00,056 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qBgagFL84F1zZz message='Dashboard link for request'
2023-06-23 20:44:00,067 [INFO] 127.0.0.1 - - [23/Jun/2023 20:44:00] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:44:05,949 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-23 20:44:06,497 [INFO]  * Restarting with stat
2023-06-23 20:44:06,774 [WARNING]  * Debugger is active!
2023-06-23 20:44:06,779 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:44:19,813 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:44:19,813 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 20:44:19,824 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:44:20,365 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 20:44:20,367 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 20:44:20,367 [DEBUG] body='{\n  "id": "in_1NME1wIJTenxdmPoBlwnB51s",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687542260,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O88n6FDYiOyslr",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688406260,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NME1wIJTenxdmPoBlwnB51s/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687542260,\n  "period_start": 1687542260,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687542260\n}' message='API response body'
2023-06-23 20:44:20,368 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_vnATf31w2eukii message='Dashboard link for request'
2023-06-23 20:44:20,370 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:44:20,370 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&invoice=in_1NME1wIJTenxdmPoBlwnB51s&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:44:20,839 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 20:44:20,839 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 20:44:20,839 [DEBUG] body='{\n  "id": "ii_1NME1wIJTenxdmPo3HbYNdI2",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O88n6FDYiOyslr",\n  "date": 1687542260,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NME1wIJTenxdmPoBlwnB51s",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687542260,\n    "start": 1687542260\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 20:44:20,839 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_eGEFgHiR7ysGbL message='Dashboard link for request'
2023-06-23 20:44:20,849 [INFO] 127.0.0.1 - - [23/Jun/2023 20:44:20] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-23 20:45:05,841 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-23 20:45:06,289 [INFO]  * Restarting with stat
2023-06-23 20:45:06,555 [WARNING]  * Debugger is active!
2023-06-23 20:45:06,560 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:45:18,488 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 20:45:18,488 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 20:45:18,504 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:45:19,106 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 20:45:19,109 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 20:45:19,109 [DEBUG] body='{\n  "id": "in_1NME2sIJTenxdmPov7erFlLN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687542318,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O88n6FDYiOyslr",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688406318,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NME2sIJTenxdmPov7erFlLN/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687542318,\n  "period_start": 1687542318,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687542318\n}' message='API response body'
2023-06-23 20:45:19,109 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Olqrywtye6CanT message='Dashboard link for request'
2023-06-23 20:45:19,112 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 20:45:19,112 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O88n6FDYiOyslr&invoice=in_1NME2sIJTenxdmPov7erFlLN&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 20:45:19,617 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 20:45:19,617 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 20:45:19,617 [DEBUG] body='{\n  "id": "ii_1NME2tIJTenxdmPoO5nAYhbl",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O88n6FDYiOyslr",\n  "date": 1687542319,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NME2sIJTenxdmPov7erFlLN",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687542319,\n    "start": 1687542319\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 20:45:19,617 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_2vLSe3pHEfThuD message='Dashboard link for request'
2023-06-23 20:45:20,396 [INFO] 127.0.0.1 - - [23/Jun/2023 20:45:20] "POST /invoice/create HTTP/1.1" 200 -
2023-06-23 20:48:12,543 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-23 20:48:12,586 [INFO]  * Restarting with stat
2023-06-23 20:48:12,834 [WARNING]  * Debugger is active!
2023-06-23 20:48:12,839 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:50:56,206 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 20:50:56,240 [INFO]  * Restarting with stat
2023-06-23 20:50:56,425 [WARNING]  * Debugger is active!
2023-06-23 20:50:56,429 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:51:07,155 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 20:51:07,194 [INFO]  * Restarting with stat
2023-06-23 20:53:23,073 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 20:53:23,073 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 20:53:23,074 [INFO]  * Restarting with stat
2023-06-23 20:53:23,255 [WARNING]  * Debugger is active!
2023-06-23 20:53:23,259 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:55:17,886 [INFO] 127.0.0.1 - - [23/Jun/2023 20:55:17] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 20:55:38,228 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-23 20:55:38,568 [INFO]  * Restarting with stat
2023-06-23 20:55:38,819 [WARNING]  * Debugger is active!
2023-06-23 20:55:38,825 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:55:43,701 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 20:55:43,701 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 20:55:43,702 [INFO]  * Restarting with stat
2023-06-23 20:55:43,911 [WARNING]  * Debugger is active!
2023-06-23 20:55:43,916 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:55:44,718 [INFO] 127.0.0.1 - - [23/Jun/2023 20:55:44] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 20:56:36,313 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 20:56:36,831 [INFO]  * Restarting with stat
2023-06-23 20:56:37,083 [WARNING]  * Debugger is active!
2023-06-23 20:56:37,088 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:56:39,156 [INFO] 127.0.0.1 - - [23/Jun/2023 20:56:39] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 20:57:43,467 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-23 20:57:43,828 [INFO]  * Restarting with stat
2023-06-23 20:57:44,014 [WARNING]  * Debugger is active!
2023-06-23 20:57:44,018 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 20:57:47,120 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 20:57:47,120 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O88n6FDYiOyslr&invoice=in_1NME2sIJTenxdmPov7erFlLN
2023-06-23 20:57:47,139 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 20:57:47,573 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 20:57:47,575 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 20:57:47,575 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_frmf9XeOIntKVs?t=1687543067",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 20:57:47,576 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_frmf9XeOIntKVs message='Dashboard link for request'
2023-06-23 20:57:47,576 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 20:57:47,591 [INFO] 127.0.0.1 - - [23/Jun/2023 20:57:47] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:00:21,406 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:00:21,944 [INFO]  * Restarting with stat
2023-06-23 21:00:22,195 [WARNING]  * Debugger is active!
2023-06-23 21:00:22,200 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:00:31,461 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:00:31,462 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O88n6FDYiOyslr&invoice=in_1NME2sIJTenxdmPov7erFlLN&confirm=True
2023-06-23 21:00:31,475 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:00:31,907 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 21:00:31,907 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:00:31,908 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_4X5EvGsMXIr7XX?t=1687543231",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:00:31,908 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_4X5EvGsMXIr7XX message='Dashboard link for request'
2023-06-23 21:00:31,908 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:00:31,918 [INFO] 127.0.0.1 - - [23/Jun/2023 21:00:31] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:01:34,897 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:01:35,161 [INFO]  * Restarting with stat
2023-06-23 21:01:35,422 [WARNING]  * Debugger is active!
2023-06-23 21:01:35,426 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:01:38,684 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:01:38,724 [INFO]  * Restarting with stat
2023-06-23 21:01:38,907 [WARNING]  * Debugger is active!
2023-06-23 21:01:38,911 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:02:49,934 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 21:02:49,976 [INFO]  * Restarting with stat
2023-06-23 21:02:50,174 [WARNING]  * Debugger is active!
2023-06-23 21:02:50,180 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:03:06,796 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:03:06,797 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O88n6FDYiOyslr&invoice=in_1NME2sIJTenxdmPov7erFlLN&confirm=True
2023-06-23 21:03:06,817 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:03:07,359 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 21:03:07,361 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:03:07,362 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_lPUqUetklOGHeI?t=1687543387",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:03:07,362 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_lPUqUetklOGHeI message='Dashboard link for request'
2023-06-23 21:03:07,362 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:03:07,385 [INFO] 127.0.0.1 - - [23/Jun/2023 21:03:07] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:05:11,148 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:05:11,587 [INFO]  * Restarting with stat
2023-06-23 21:05:11,863 [WARNING]  * Debugger is active!
2023-06-23 21:05:11,868 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:05:21,607 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:05:21,607 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:05:21,608 [INFO]  * Restarting with stat
2023-06-23 21:05:21,793 [WARNING]  * Debugger is active!
2023-06-23 21:05:21,798 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:05:26,949 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:05:26,950 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O88n6FDYiOyslr&confirm=True
2023-06-23 21:05:26,969 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:05:27,442 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 651
2023-06-23 21:05:27,443 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:05:27,443 [DEBUG] body='{\n  "error": {\n    "code": "payment_intent_incompatible_payment_method",\n    "doc_url": "https://stripe.com/docs/error-codes/payment-intent-incompatible-payment-method",\n    "message": "The provided Customer\'s default_source\'s type is not allowed by the PaymentIntent\'s payment_method_types. In this case, the Customer\'s default_source was of type ach_credit_transfer, and the PaymentIntent\'s payment_method_types are: card. Try again with a different source or use a different value for payment_method_types.",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_wdr7mF34s6Ksy5?t=1687543527",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:05:27,443 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_wdr7mF34s6Ksy5 message='Dashboard link for request'
2023-06-23 21:05:27,443 [INFO] error_code=payment_intent_incompatible_payment_method error_message="The provided Customer's default_source's type is not allowed by the PaymentIntent's payment_method_types. In this case, the Customer's default_source was of type ach_credit_transfer, and the PaymentIntent's payment_method_types are: card. Try again with a different source or use a different value for payment_method_types." error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:05:27,455 [INFO] 127.0.0.1 - - [23/Jun/2023 21:05:27] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:05:54,197 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 21:05:54,201 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 21:05:54,208 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:05:54,991 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 21:05:54,992 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 21:05:54,992 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:05:54,993 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_J4OMxQOxsOWsGv message='Dashboard link for request'
2023-06-23 21:05:54,997 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 21:05:54,997 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMEMoIJTenxdmPoGidG5xn1&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 21:05:55,499 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 21:05:55,499 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 21:05:55,499 [DEBUG] body='{\n  "id": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687543555,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687543555,\n    "start": 1687543555\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 21:05:55,499 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_FNiOWtuVevd3zI message='Dashboard link for request'
2023-06-23 21:05:56,241 [INFO] 127.0.0.1 - - [23/Jun/2023 21:05:56] "POST /invoice/create HTTP/1.1" 200 -
2023-06-23 21:06:19,715 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:06:19,717 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm&confirm=True
2023-06-23 21:06:19,723 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:06:20,283 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 651
2023-06-23 21:06:20,284 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:06:20,284 [DEBUG] body='{\n  "error": {\n    "code": "payment_intent_incompatible_payment_method",\n    "doc_url": "https://stripe.com/docs/error-codes/payment-intent-incompatible-payment-method",\n    "message": "The provided Customer\'s default_source\'s type is not allowed by the PaymentIntent\'s payment_method_types. In this case, the Customer\'s default_source was of type ach_credit_transfer, and the PaymentIntent\'s payment_method_types are: card. Try again with a different source or use a different value for payment_method_types.",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_tze61YIRZNEViU?t=1687543580",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:06:20,284 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_tze61YIRZNEViU message='Dashboard link for request'
2023-06-23 21:06:20,284 [INFO] error_code=payment_intent_incompatible_payment_method error_message="The provided Customer's default_source's type is not allowed by the PaymentIntent's payment_method_types. In this case, the Customer's default_source was of type ach_credit_transfer, and the PaymentIntent's payment_method_types are: card. Try again with a different source or use a different value for payment_method_types." error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:06:20,295 [INFO] 127.0.0.1 - - [23/Jun/2023 21:06:20] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:08:12,461 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:08:12,980 [INFO]  * Restarting with stat
2023-06-23 21:08:13,250 [WARNING]  * Debugger is active!
2023-06-23 21:08:13,255 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:08:14,392 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:08:14,434 [INFO]  * Restarting with stat
2023-06-23 21:08:14,623 [WARNING]  * Debugger is active!
2023-06-23 21:08:14,627 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:08:18,661 [INFO] 127.0.0.1 - - [23/Jun/2023 21:08:18] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:08:23,241 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:08:23,782 [INFO]  * Restarting with stat
2023-06-23 21:08:23,952 [WARNING]  * Debugger is active!
2023-06-23 21:08:23,956 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:08:26,972 [INFO] 127.0.0.1 - - [23/Jun/2023 21:08:26] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:09:16,105 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:09:16,505 [INFO]  * Restarting with stat
2023-06-23 21:09:16,693 [WARNING]  * Debugger is active!
2023-06-23 21:09:16,697 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:09:38,994 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-23 21:09:39,028 [INFO]  * Restarting with stat
2023-06-23 21:09:39,219 [WARNING]  * Debugger is active!
2023-06-23 21:09:39,223 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:09:40,375 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:09:40,418 [INFO]  * Restarting with stat
2023-06-23 21:09:40,617 [WARNING]  * Debugger is active!
2023-06-23 21:09:40,622 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:09:46,425 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:09:46,426 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:09:46,502 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:09:46,926 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:09:46,927 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:09:46,928 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:09:46,928 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_oTkL7Ygv8jEXee message='Dashboard link for request'
2023-06-23 21:09:46,932 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:09:46,932 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:09:47,272 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:09:47,273 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:09:47,273 [DEBUG] body='{\n  "id": "pi_3NMEQZIJTenxdmPo1k8yBywh",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEQZIJTenxdmPo1k8yBywh_secret_E0w2N7LXsvpSt20rBQxxLy5LR",\n  "confirmation_method": "automatic",\n  "created": 1687543787,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:09:47,273 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_6kAV1dlk7dAqKo message='Dashboard link for request'
2023-06-23 21:09:47,284 [INFO] 127.0.0.1 - - [23/Jun/2023 21:09:47] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:10:23,582 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:10:24,063 [INFO]  * Restarting with stat
2023-06-23 21:10:24,305 [WARNING]  * Debugger is active!
2023-06-23 21:10:24,310 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:10:25,363 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:10:25,363 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:10:25,364 [INFO]  * Restarting with stat
2023-06-23 21:10:25,574 [WARNING]  * Debugger is active!
2023-06-23 21:10:25,578 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:10:29,659 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:10:29,660 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:10:29,670 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:10:30,118 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:10:30,118 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:10:30,118 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:10:30,118 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_QElwyGZAXbmlF0 message='Dashboard link for request'
2023-06-23 21:10:30,120 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:10:30,120 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:10:30,546 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:10:30,547 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:10:30,547 [DEBUG] body='{\n  "id": "pi_3NMERGIJTenxdmPo0DCG3bve",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMERGIJTenxdmPo0DCG3bve_secret_l5iMn65iYcnqVfP5Mz6dxbLry",\n  "confirmation_method": "automatic",\n  "created": 1687543830,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:10:30,547 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ybrFgIUktoukip message='Dashboard link for request'
2023-06-23 21:10:30,558 [INFO] 127.0.0.1 - - [23/Jun/2023 21:10:30] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:12:52,895 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:12:53,444 [INFO]  * Restarting with stat
2023-06-23 21:13:03,963 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:13:03,963 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:13:03,964 [INFO]  * Restarting with stat
2023-06-23 21:13:04,143 [WARNING]  * Debugger is active!
2023-06-23 21:13:04,147 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:13:10,667 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:13:10,667 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:13:10,682 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:13:11,096 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:13:11,099 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:13:11,100 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:13:11,100 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_EbMP7JABr2Cs0b message='Dashboard link for request'
2023-06-23 21:13:11,103 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:13:11,104 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:13:11,424 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:13:11,427 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:13:11,427 [DEBUG] body='{\n  "id": "pi_3NMETrIJTenxdmPo0sr0mKnX",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMETrIJTenxdmPo0sr0mKnX_secret_RZFfeKzQXkAVS1j4lKVWV2LbJ",\n  "confirmation_method": "automatic",\n  "created": 1687543991,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:13:11,427 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_DSofdslvFFvuUa message='Dashboard link for request'
2023-06-23 21:13:11,438 [INFO] 127.0.0.1 - - [23/Jun/2023 21:13:11] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:14:12,968 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:14:13,391 [INFO]  * Restarting with stat
2023-06-23 21:14:13,567 [WARNING]  * Debugger is active!
2023-06-23 21:14:13,572 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:14:17,267 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:14:17,267 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:14:17,277 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:14:17,709 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:14:17,711 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:14:17,711 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:14:17,711 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_szyHCWFlb7FWle message='Dashboard link for request'
2023-06-23 21:14:17,713 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:14:17,714 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:14:18,042 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:14:18,042 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:14:18,042 [DEBUG] body='{\n  "id": "pi_3NMEUvIJTenxdmPo1bOw02EG",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEUvIJTenxdmPo1bOw02EG_secret_7KuWG08XfXdnXsw1lK9Wy2V2H",\n  "confirmation_method": "automatic",\n  "created": 1687544057,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:14:18,042 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_mMF3PgJzohjaEd message='Dashboard link for request'
2023-06-23 21:14:18,049 [INFO] 127.0.0.1 - - [23/Jun/2023 21:14:18] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:15:20,588 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:15:20,993 [INFO]  * Restarting with stat
2023-06-23 21:15:21,164 [WARNING]  * Debugger is active!
2023-06-23 21:15:21,168 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:15:26,945 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:15:26,945 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:15:26,968 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:15:27,394 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:15:27,395 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:15:27,396 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:15:27,396 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zzeDS7esHwlq0S message='Dashboard link for request'
2023-06-23 21:15:27,397 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:15:27,397 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm&invoice=in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:15:27,670 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 21:15:27,670 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:15:27,670 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_ZMj1LiFFLU6ubU?t=1687544127",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:15:27,670 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ZMj1LiFFLU6ubU message='Dashboard link for request'
2023-06-23 21:15:27,670 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:15:27,677 [INFO] 127.0.0.1 - - [23/Jun/2023 21:15:27] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:15:30,815 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:15:31,350 [INFO]  * Restarting with stat
2023-06-23 21:15:31,522 [WARNING]  * Debugger is active!
2023-06-23 21:15:31,526 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:15:39,091 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:15:39,135 [INFO]  * Restarting with stat
2023-06-23 21:15:39,320 [WARNING]  * Debugger is active!
2023-06-23 21:15:39,325 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:15:45,771 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:15:45,807 [INFO]  * Restarting with stat
2023-06-23 21:15:45,989 [WARNING]  * Debugger is active!
2023-06-23 21:15:45,993 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:15:52,733 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:15:52,733 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:15:52,740 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:15:53,161 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:15:53,164 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:15:53,164 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:15:53,164 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_UEmkTsLm3AfCIo message='Dashboard link for request'
2023-06-23 21:15:53,166 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:15:53,166 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:15:53,498 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:15:53,499 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:15:53,500 [DEBUG] body='{\n  "id": "pi_3NMEWTIJTenxdmPo0ayeMkx5",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEWTIJTenxdmPo0ayeMkx5_secret_E0HRgNOPorw3pvoG0tJHoSpXs",\n  "confirmation_method": "automatic",\n  "created": 1687544153,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:15:53,500 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_KM06U7zZTMHkhW message='Dashboard link for request'
2023-06-23 21:15:53,513 [INFO] 127.0.0.1 - - [23/Jun/2023 21:15:53] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:17:45,192 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:17:45,588 [INFO]  * Restarting with stat
2023-06-23 21:17:45,783 [WARNING]  * Debugger is active!
2023-06-23 21:17:45,787 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:17:48,983 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:17:48,983 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:17:49,005 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:17:49,423 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:17:49,425 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:17:49,425 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:17:49,426 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Hh9B4GSRY4EnlC message='Dashboard link for request'
2023-06-23 21:17:49,428 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:17:49,428 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:17:49,756 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:17:49,757 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:17:49,757 [DEBUG] body='{\n  "id": "pi_3NMEYLIJTenxdmPo0xAu9L4a",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEYLIJTenxdmPo0xAu9L4a_secret_wtZfbyJe72KPzrRwbWKY0HnXl",\n  "confirmation_method": "automatic",\n  "created": 1687544269,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:17:49,757 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_O84FkNyTekoM03 message='Dashboard link for request'
2023-06-23 21:17:49,770 [INFO] 127.0.0.1 - - [23/Jun/2023 21:17:49] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:18:07,353 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:18:07,764 [INFO]  * Restarting with stat
2023-06-23 21:18:07,957 [WARNING]  * Debugger is active!
2023-06-23 21:18:07,962 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:18:09,106 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:18:09,145 [INFO]  * Restarting with stat
2023-06-23 21:18:09,344 [WARNING]  * Debugger is active!
2023-06-23 21:18:09,349 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:18:13,196 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:18:13,196 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:18:13,207 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:18:13,628 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:18:13,630 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:18:13,630 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:18:13,631 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_F1k6H8TW67QsPH message='Dashboard link for request'
2023-06-23 21:18:13,634 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:18:13,634 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:18:13,951 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:18:13,953 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:18:13,953 [DEBUG] body='{\n  "id": "pi_3NMEYjIJTenxdmPo0qSNH7lC",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEYjIJTenxdmPo0qSNH7lC_secret_LymX8oRdh05HbzBYAi3kFFuBE",\n  "confirmation_method": "automatic",\n  "created": 1687544293,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:18:13,953 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_a48Wv0Wme4cms0 message='Dashboard link for request'
2023-06-23 21:18:13,954 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMEYjIJTenxdmPo0qSNH7lC/confirm
2023-06-23 21:18:13,954 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:18:14,292 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMEYjIJTenxdmPo0qSNH7lC/confirm HTTP/1.1" 400 2051
2023-06-23 21:18:14,293 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMEYjIJTenxdmPo0qSNH7lC/confirm response_code=400
2023-06-23 21:18:14,293 [DEBUG] body='{\n  "error": {\n    "code": "payment_intent_unexpected_state",\n    "doc_url": "https://stripe.com/docs/error-codes/payment-intent-unexpected-state",\n    "message": "You cannot confirm this PaymentIntent because it\'s missing a payment method. To confirm the PaymentIntent with cus_O8NBUvatY5ecjm, specify a payment method attached to this customer along with the customer ID.",\n    "payment_intent": {\n      "id": "pi_3NMEYjIJTenxdmPo0qSNH7lC",\n      "object": "payment_intent",\n      "amount": 1000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NMEYjIJTenxdmPo0qSNH7lC_secret_LymX8oRdh05HbzBYAi3kFFuBE",\n      "confirmation_method": "automatic",\n      "created": 1687544293,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_rpKy3WvUyDmBuR?t=1687544294",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:18:14,293 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_rpKy3WvUyDmBuR message='Dashboard link for request'
2023-06-23 21:18:14,293 [INFO] error_code=payment_intent_unexpected_state error_message="You cannot confirm this PaymentIntent because it's missing a payment method. To confirm the PaymentIntent with cus_O8NBUvatY5ecjm, specify a payment method attached to this customer along with the customer ID." error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:18:14,303 [INFO] 127.0.0.1 - - [23/Jun/2023 21:18:14] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:18:24,376 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:18:24,910 [INFO]  * Restarting with stat
2023-06-23 21:18:34,691 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:18:34,691 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:18:34,692 [INFO]  * Restarting with stat
2023-06-23 21:18:34,919 [WARNING]  * Debugger is active!
2023-06-23 21:18:34,924 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:18:38,235 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:18:38,235 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:18:38,240 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:18:38,662 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:18:38,663 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:18:38,663 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:18:38,664 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_OtKz4YFP0dB9bk message='Dashboard link for request'
2023-06-23 21:18:38,665 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:18:38,666 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:18:39,071 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:18:39,073 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:18:39,073 [DEBUG] body='{\n  "id": "pi_3NMEZ8IJTenxdmPo0bJZqJn0",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEZ8IJTenxdmPo0bJZqJn0_secret_2kLi8jNvcz0w8JcFLIGSAbvl5",\n  "confirmation_method": "automatic",\n  "created": 1687544318,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:18:39,073 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_uounSLxlZE4V3e message='Dashboard link for request'
2023-06-23 21:18:39,074 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMEZ8IJTenxdmPo0bJZqJn0/confirm
2023-06-23 21:18:39,074 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-23 21:18:39,390 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMEZ8IJTenxdmPo0bJZqJn0/confirm HTTP/1.1" 400 1875
2023-06-23 21:18:39,390 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMEZ8IJTenxdmPo0bJZqJn0/confirm response_code=400
2023-06-23 21:18:39,390 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: customer",\n    "param": "customer",\n    "payment_intent": {\n      "id": "pi_3NMEZ8IJTenxdmPo0bJZqJn0",\n      "object": "payment_intent",\n      "amount": 1000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NMEZ8IJTenxdmPo0bJZqJn0_secret_2kLi8jNvcz0w8JcFLIGSAbvl5",\n      "confirmation_method": "automatic",\n      "created": 1687544318,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_QhoGlTIaqBG5Jy?t=1687544319",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:18:39,390 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_QhoGlTIaqBG5Jy message='Dashboard link for request'
2023-06-23 21:18:39,390 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: customer' error_param=customer error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:18:39,397 [INFO] 127.0.0.1 - - [23/Jun/2023 21:18:39] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:18:57,547 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:18:58,073 [INFO]  * Restarting with stat
2023-06-23 21:18:58,258 [WARNING]  * Debugger is active!
2023-06-23 21:18:58,262 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:19:01,503 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:19:01,545 [INFO]  * Restarting with stat
2023-06-23 21:19:01,739 [WARNING]  * Debugger is active!
2023-06-23 21:19:01,743 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:19:05,227 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:19:05,228 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:19:05,237 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:19:05,677 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:19:05,679 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:19:05,680 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:19:05,680 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_RA7FsYq1Dfv5hk message='Dashboard link for request'
2023-06-23 21:19:05,682 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:19:05,682 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:19:06,005 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:19:06,007 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:19:06,007 [DEBUG] body='{\n  "id": "pi_3NMEZZIJTenxdmPo0I9T7O7a",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEZZIJTenxdmPo0I9T7O7a_secret_gY7Es3y8Sd3NwstSH24gBQHyq",\n  "confirmation_method": "automatic",\n  "created": 1687544345,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:19:06,007 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_FSJ6dew4cXE1Cw message='Dashboard link for request'
2023-06-23 21:19:06,008 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMEZZIJTenxdmPo0I9T7O7a/confirm
2023-06-23 21:19:06,008 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-23 21:19:07,111 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMEZZIJTenxdmPo0I9T7O7a/confirm HTTP/1.1" 200 1331
2023-06-23 21:19:07,112 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMEZZIJTenxdmPo0I9T7O7a/confirm response_code=200
2023-06-23 21:19:07,112 [DEBUG] body='{\n  "id": "pi_3NMEZZIJTenxdmPo0I9T7O7a",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 1000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEZZIJTenxdmPo0I9T7O7a_secret_gY7Es3y8Sd3NwstSH24gBQHyq",\n  "confirmation_method": "automatic",\n  "created": 1687544345,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMEZZIJTenxdmPo0J5wtZYt",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:19:07,112 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_v5rRPG3QJ4Sz5e message='Dashboard link for request'
2023-06-23 21:19:07,114 [INFO] 127.0.0.1 - - [23/Jun/2023 21:19:07] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-23 21:21:19,445 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:21:19,492 [INFO]  * Restarting with stat
2023-06-23 21:23:36,225 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:23:36,225 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:23:36,227 [INFO]  * Restarting with stat
2023-06-23 21:23:36,417 [WARNING]  * Debugger is active!
2023-06-23 21:23:36,424 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:23:41,679 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:23:41,680 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:23:41,697 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:23:42,109 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:23:42,111 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:23:42,111 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:23:42,111 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_SVWxzb3Usa8plQ message='Dashboard link for request'
2023-06-23 21:23:42,116 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:23:42,116 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:23:42,465 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:23:42,466 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:23:42,467 [DEBUG] body='{\n  "id": "pi_3NMEe2IJTenxdmPo0tlZxokE",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEe2IJTenxdmPo0tlZxokE_secret_rNhwcTB74AszdiV3GlckVGLbl",\n  "confirmation_method": "automatic",\n  "created": 1687544622,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:23:42,467 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_XKGfwYGCGJ3PvZ message='Dashboard link for request'
2023-06-23 21:23:42,467 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMEe2IJTenxdmPo0tlZxokE
2023-06-23 21:23:42,468 [DEBUG] api_version=None message='Post details' post_data=invoice=in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:23:42,788 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMEe2IJTenxdmPo0tlZxokE HTTP/1.1" 400 1873
2023-06-23 21:23:42,789 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMEe2IJTenxdmPo0tlZxokE response_code=400
2023-06-23 21:23:42,789 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "payment_intent": {\n      "id": "pi_3NMEe2IJTenxdmPo0tlZxokE",\n      "object": "payment_intent",\n      "amount": 1000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NMEe2IJTenxdmPo0tlZxokE_secret_rNhwcTB74AszdiV3GlckVGLbl",\n      "confirmation_method": "automatic",\n      "created": 1687544622,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_PFEygUzRvOJDky?t=1687544622",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:23:42,789 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_PFEygUzRvOJDky message='Dashboard link for request'
2023-06-23 21:23:42,790 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:23:42,811 [INFO] 127.0.0.1 - - [23/Jun/2023 21:23:42] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:24:22,413 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:24:22,887 [INFO]  * Restarting with stat
2023-06-23 21:24:23,068 [WARNING]  * Debugger is active!
2023-06-23 21:24:23,072 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:24:27,046 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:24:27,046 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:24:27,067 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:24:27,499 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:24:27,499 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:24:27,499 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:24:27,499 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_aER4E1HIzo9oWK message='Dashboard link for request'
2023-06-23 21:24:27,500 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:24:27,500 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:24:27,832 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:24:27,833 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:24:27,834 [DEBUG] body='{\n  "id": "pi_3NMEelIJTenxdmPo0ExjabY1",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEelIJTenxdmPo0ExjabY1_secret_ySVI7rvtfw32rmG225XR6dQiP",\n  "confirmation_method": "automatic",\n  "created": 1687544667,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:24:27,834 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Tz9geoOiKNULx3 message='Dashboard link for request'
2023-06-23 21:24:27,846 [INFO] 127.0.0.1 - - [23/Jun/2023 21:24:27] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:25:36,290 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:25:36,789 [INFO]  * Restarting with stat
2023-06-23 21:26:03,409 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:26:03,409 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:26:03,410 [INFO]  * Restarting with stat
2023-06-23 21:26:03,595 [WARNING]  * Debugger is active!
2023-06-23 21:26:03,599 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:26:06,870 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:26:06,909 [INFO]  * Restarting with stat
2023-06-23 21:26:07,094 [WARNING]  * Debugger is active!
2023-06-23 21:26:07,098 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:26:11,462 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:26:11,462 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:26:11,475 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:26:11,883 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:26:11,885 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:26:11,885 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:26:11,885 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_WbXBQjniZmyLyJ message='Dashboard link for request'
2023-06-23 21:26:11,888 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:26:11,889 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:26:11,962 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 401 129
2023-06-23 21:26:11,963 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=401
2023-06-23 21:26:11,963 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: in_1NMEM***************5xn1",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:26:11,963 [INFO] error_code=None error_message='Invalid API Key provided: in_1NMEM***************5xn1' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:26:11,973 [INFO] 127.0.0.1 - - [23/Jun/2023 21:26:11] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:26:28,552 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:26:28,727 [INFO]  * Restarting with stat
2023-06-23 21:26:28,927 [WARNING]  * Debugger is active!
2023-06-23 21:26:28,932 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:26:30,048 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:26:30,048 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:26:30,048 [INFO]  * Restarting with stat
2023-06-23 21:26:30,226 [WARNING]  * Debugger is active!
2023-06-23 21:26:30,230 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:26:33,925 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:26:33,926 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:26:33,937 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:26:34,350 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:26:34,352 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:26:34,352 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:26:34,352 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_gzWmSe4gn8vSgP message='Dashboard link for request'
2023-06-23 21:26:34,354 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:26:34,355 [DEBUG] api_version=None message='Post details' post_data=invoice=in_1NMEMoIJTenxdmPoGidG5xn1&amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:26:34,628 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 21:26:34,629 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:26:34,629 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_39Md3r6YA7VBWn?t=1687544794",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:26:34,629 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_39Md3r6YA7VBWn message='Dashboard link for request'
2023-06-23 21:26:34,629 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:26:34,635 [INFO] 127.0.0.1 - - [23/Jun/2023 21:26:34] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:30:38,906 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:30:39,418 [INFO]  * Restarting with stat
2023-06-23 21:30:39,668 [WARNING]  * Debugger is active!
2023-06-23 21:30:39,673 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:30:40,847 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:30:40,888 [INFO]  * Restarting with stat
2023-06-23 21:30:41,079 [WARNING]  * Debugger is active!
2023-06-23 21:30:41,083 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:30:45,572 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:30:45,572 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:30:45,582 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:30:46,018 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:30:46,020 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:30:46,020 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:30:46,020 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_7AUTTFPCrACi3G message='Dashboard link for request'
2023-06-23 21:30:46,025 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:30:46,025 [DEBUG] api_version=None message='Post details' post_data=invoice[id]=in_1NMEMoIJTenxdmPoGidG5xn1&amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:30:46,300 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 21:30:46,302 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:30:46,302 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_KtvVhJv6AO5owq?t=1687545046",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:30:46,302 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_KtvVhJv6AO5owq message='Dashboard link for request'
2023-06-23 21:30:46,302 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:30:46,319 [INFO] 127.0.0.1 - - [23/Jun/2023 21:30:46] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:33:47,713 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:33:48,127 [INFO]  * Restarting with stat
2023-06-23 21:33:48,311 [WARNING]  * Debugger is active!
2023-06-23 21:33:48,316 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:35:34,236 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 21:35:34,272 [INFO]  * Restarting with stat
2023-06-23 21:35:34,455 [WARNING]  * Debugger is active!
2023-06-23 21:35:34,459 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:35:36,652 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 21:35:36,689 [INFO]  * Restarting with stat
2023-06-23 21:35:36,871 [WARNING]  * Debugger is active!
2023-06-23 21:35:36,875 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:35:48,620 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-23 21:35:48,654 [INFO]  * Restarting with stat
2023-06-23 21:35:48,833 [WARNING]  * Debugger is active!
2023-06-23 21:35:48,837 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:36:41,224 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-23 21:36:41,262 [INFO]  * Restarting with stat
2023-06-23 21:36:41,461 [WARNING]  * Debugger is active!
2023-06-23 21:36:41,467 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:37:19,803 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 21:37:19,836 [INFO]  * Restarting with stat
2023-06-23 21:37:20,025 [WARNING]  * Debugger is active!
2023-06-23 21:37:20,030 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:37:44,455 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:37:44,496 [INFO]  * Restarting with stat
2023-06-23 21:37:44,687 [WARNING]  * Debugger is active!
2023-06-23 21:37:44,691 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:37:50,352 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:37:50,352 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:37:50,369 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:37:50,790 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:37:50,790 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:37:50,790 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:37:50,790 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_RGvTVlcGMVLb1q message='Dashboard link for request'
2023-06-23 21:37:50,792 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:37:50,792 [DEBUG] api_version=None message='Post details' post_data=invoice[id]=in_1NMEMoIJTenxdmPoGidG5xn1&amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:37:51,072 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 400 337
2023-06-23 21:37:51,073 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=400
2023-06-23 21:37:51,073 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: invoice",\n    "param": "invoice",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_8rvBKxInG6vzzP?t=1687545470",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:37:51,074 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_8rvBKxInG6vzzP message='Dashboard link for request'
2023-06-23 21:37:51,074 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: invoice' error_param=invoice error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:37:51,090 [INFO] 127.0.0.1 - - [23/Jun/2023 21:37:51] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:38:14,593 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:38:15,086 [INFO]  * Restarting with stat
2023-06-23 21:38:15,287 [WARNING]  * Debugger is active!
2023-06-23 21:38:15,292 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:38:17,939 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:38:17,939 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:38:17,958 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:38:18,414 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:38:18,416 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:38:18,416 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:38:18,417 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_eJkeTP1CYZPT1A message='Dashboard link for request'
2023-06-23 21:38:18,419 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:38:18,419 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:38:18,850 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:38:18,852 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:38:18,852 [DEBUG] body='{\n  "id": "pi_3NMEsAIJTenxdmPo0ekCh4fG",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEsAIJTenxdmPo0ekCh4fG_secret_LCqpi2bYGMMxfM4xJYnVFHYxA",\n  "confirmation_method": "automatic",\n  "created": 1687545498,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:38:18,852 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_12M4vbsBi0fjR6 message='Dashboard link for request'
2023-06-23 21:38:18,864 [INFO] 127.0.0.1 - - [23/Jun/2023 21:38:18] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:38:55,790 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-23 21:38:56,165 [INFO]  * Restarting with stat
2023-06-23 21:39:03,202 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:39:03,202 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:39:03,203 [INFO]  * Restarting with stat
2023-06-23 21:39:03,401 [WARNING]  * Debugger is active!
2023-06-23 21:39:03,406 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:39:06,410 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:39:06,411 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:39:06,421 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:39:06,855 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:39:06,855 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:39:06,855 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:39:06,855 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_BC3KlfTyjM8Usi message='Dashboard link for request'
2023-06-23 21:39:06,856 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:39:06,856 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:39:07,210 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:39:07,211 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:39:07,211 [DEBUG] body='{\n  "id": "pi_3NMEsxIJTenxdmPo1DZ8z0Eh",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEsxIJTenxdmPo1DZ8z0Eh_secret_NcZx4NtmRTUITYe2KqyePgpFn",\n  "confirmation_method": "automatic",\n  "created": 1687545547,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:39:07,211 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Mzcg7vUA5GM52d message='Dashboard link for request'
2023-06-23 21:39:07,212 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:39:07,212 [DEBUG] api_version=None message='Post details' post_data=payment_intent=pi_3NMEsxIJTenxdmPo1DZ8z0Eh
2023-06-23 21:39:07,591 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 400 383
2023-06-23 21:39:07,591 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=400
2023-06-23 21:39:07,591 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: payment_intent. Did you mean payment_settings?",\n    "param": "payment_intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_D15DSl4VH3GMH1?t=1687545547",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:39:07,591 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_D15DSl4VH3GMH1 message='Dashboard link for request'
2023-06-23 21:39:07,591 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: payment_intent. Did you mean payment_settings?' error_param=payment_intent error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:39:07,598 [INFO] 127.0.0.1 - - [23/Jun/2023 21:39:07] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:40:02,398 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 21:40:02,815 [INFO]  * Restarting with stat
2023-06-23 21:40:03,063 [WARNING]  * Debugger is active!
2023-06-23 21:40:03,068 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:40:06,915 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:40:06,916 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:40:06,931 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:40:07,392 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:40:07,393 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:40:07,393 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:40:07,393 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_z55DlLt9QeDB9v message='Dashboard link for request'
2023-06-23 21:40:07,396 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:40:07,396 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:40:07,803 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:40:07,803 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:40:07,803 [DEBUG] body='{\n  "id": "pi_3NMEtvIJTenxdmPo09TnSB4T",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEtvIJTenxdmPo09TnSB4T_secret_gGPjnoDMxB4iJ0DjctXJLLXYV",\n  "confirmation_method": "automatic",\n  "created": 1687545607,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:40:07,803 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_gxBJ4lryTHLHye message='Dashboard link for request'
2023-06-23 21:40:07,804 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:40:07,804 [DEBUG] api_version=None message='Post details' post_data=payment_settings[payment_intent]=pi_3NMEtvIJTenxdmPo09TnSB4T
2023-06-23 21:40:08,112 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 400 425
2023-06-23 21:40:08,115 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=400
2023-06-23 21:40:08,116 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: payment_settings[payment_intent]. Did you mean payment_method_options?",\n    "param": "payment_settings[payment_intent]",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_JIkpRw1AI4Ym6W?t=1687545608",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:40:08,116 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_JIkpRw1AI4Ym6W message='Dashboard link for request'
2023-06-23 21:40:08,116 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: payment_settings[payment_intent]. Did you mean payment_method_options?' error_param=payment_settings[payment_intent] error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:40:08,130 [INFO] 127.0.0.1 - - [23/Jun/2023 21:40:08] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:40:53,009 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-23 21:40:53,457 [INFO]  * Restarting with stat
2023-06-23 21:40:53,662 [WARNING]  * Debugger is active!
2023-06-23 21:40:53,667 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:40:58,076 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:40:58,076 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:40:58,082 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:40:58,515 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:40:58,517 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:40:58,517 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:40:58,518 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LTAVasvRDeiudz message='Dashboard link for request'
2023-06-23 21:40:58,521 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:40:58,521 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:40:58,862 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:40:58,864 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:40:58,864 [DEBUG] body='{\n  "id": "pi_3NMEukIJTenxdmPo0OqqRLLl",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEukIJTenxdmPo0OqqRLLl_secret_Z433TCLu3Z7zmA3kt8z0v8MDs",\n  "confirmation_method": "automatic",\n  "created": 1687545658,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:40:58,864 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_0vcj2BMXmHS3za message='Dashboard link for request'
2023-06-23 21:40:58,865 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:40:58,865 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMEukIJTenxdmPo0OqqRLLl
2023-06-23 21:40:59,315 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:40:59,316 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:40:59,317 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMEukIJTenxdmPo0OqqRLLl"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:40:59,317 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ghQEH8oWDBRfpz message='Dashboard link for request'
2023-06-23 21:40:59,328 [INFO] 127.0.0.1 - - [23/Jun/2023 21:40:59] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:41:04,449 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:41:04,798 [INFO]  * Restarting with stat
2023-06-23 21:41:04,989 [WARNING]  * Debugger is active!
2023-06-23 21:41:04,993 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:43:35,482 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:43:35,525 [INFO]  * Restarting with stat
2023-06-23 21:43:35,789 [WARNING]  * Debugger is active!
2023-06-23 21:43:35,794 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:43:42,200 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:43:42,243 [INFO]  * Restarting with stat
2023-06-23 21:43:42,421 [WARNING]  * Debugger is active!
2023-06-23 21:43:42,426 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:43:43,575 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:43:43,615 [INFO]  * Restarting with stat
2023-06-23 21:43:43,792 [WARNING]  * Debugger is active!
2023-06-23 21:43:43,796 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:43:47,055 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:43:47,099 [INFO]  * Restarting with stat
2023-06-23 21:43:47,295 [WARNING]  * Debugger is active!
2023-06-23 21:43:47,300 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:43:54,329 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:43:54,330 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:43:54,350 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:43:54,799 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:43:54,801 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:43:54,801 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:43:54,802 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_tQ9AkLz3yWvKCT message='Dashboard link for request'
2023-06-23 21:43:54,806 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:43:54,806 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:43:55,151 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:43:55,152 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:43:55,152 [DEBUG] body='{\n  "id": "pi_3NMExbIJTenxdmPo19uUWBdX",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMExbIJTenxdmPo19uUWBdX_secret_5DiWWQOItLeekmjyu6ZrHSSPo",\n  "confirmation_method": "automatic",\n  "created": 1687545835,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:43:55,152 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_TTp7wfBFYyCIT1 message='Dashboard link for request'
2023-06-23 21:43:55,152 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:43:55,152 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMExbIJTenxdmPo19uUWBdX
2023-06-23 21:43:55,514 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:43:55,514 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:43:55,514 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMExbIJTenxdmPo19uUWBdX"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:43:55,514 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3feWa99dLbBiaF message='Dashboard link for request'
2023-06-23 21:43:55,525 [INFO] 127.0.0.1 - - [23/Jun/2023 21:43:55] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:45:43,475 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:45:43,738 [INFO]  * Restarting with stat
2023-06-23 21:45:43,947 [WARNING]  * Debugger is active!
2023-06-23 21:45:43,952 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:45:47,866 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:45:47,866 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:45:47,886 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:45:48,316 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:45:48,317 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:45:48,317 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:45:48,317 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3KxBTfGKYgrKst message='Dashboard link for request'
2023-06-23 21:45:48,318 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:45:48,318 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:45:48,668 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:45:48,670 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:45:48,670 [DEBUG] body='{\n  "id": "pi_3NMEzQIJTenxdmPo1gAzvZCR",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMEzQIJTenxdmPo1gAzvZCR_secret_s8yACxihMAWYICAqqy1tmdtpS",\n  "confirmation_method": "automatic",\n  "created": 1687545948,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:45:48,670 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_TSoJXYXLni9Hz9 message='Dashboard link for request'
2023-06-23 21:45:48,671 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:45:48,671 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMEzQIJTenxdmPo1gAzvZCR
2023-06-23 21:45:49,029 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:45:49,030 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:45:49,031 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMEzQIJTenxdmPo1gAzvZCR"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:45:49,031 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_TMbazss9lmAPOf message='Dashboard link for request'
2023-06-23 21:45:49,044 [INFO] 127.0.0.1 - - [23/Jun/2023 21:45:49] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:46:21,360 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:46:21,870 [INFO]  * Restarting with stat
2023-06-23 21:46:22,046 [WARNING]  * Debugger is active!
2023-06-23 21:46:22,050 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:46:26,029 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:46:26,030 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:46:26,039 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:46:26,456 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:46:26,456 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:46:26,456 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:46:26,457 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_7Ve31t4tIYGCVz message='Dashboard link for request'
2023-06-23 21:46:26,457 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:46:26,457 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:46:26,795 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:46:26,795 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:46:26,795 [DEBUG] body='{\n  "id": "pi_3NMF02IJTenxdmPo1g3Eiwia",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF02IJTenxdmPo1g3Eiwia_secret_BGF9sp0Jo021ABYHohKAvQdrG",\n  "confirmation_method": "automatic",\n  "created": 1687545986,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:46:26,795 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_7LkoLVtdYwa5ko message='Dashboard link for request'
2023-06-23 21:46:26,796 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:46:26,796 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF02IJTenxdmPo1g3Eiwia
2023-06-23 21:46:27,191 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:46:27,191 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:46:27,191 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF02IJTenxdmPo1g3Eiwia"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:46:27,192 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Lg2ywNnrNd5qUh message='Dashboard link for request'
2023-06-23 21:46:27,200 [INFO] 127.0.0.1 - - [23/Jun/2023 21:46:27] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:46:41,331 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/payment_stripe_port.py', reloading
2023-06-23 21:46:41,823 [INFO]  * Restarting with stat
2023-06-23 21:46:42,017 [WARNING]  * Debugger is active!
2023-06-23 21:46:42,021 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:46:45,617 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:46:45,617 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:46:45,622 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:46:46,032 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:46:46,034 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:46:46,035 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:46:46,035 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NazlwK0PP6ey79 message='Dashboard link for request'
2023-06-23 21:46:46,037 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:46:46,037 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:46:46,367 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:46:46,367 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:46:46,367 [DEBUG] body='{\n  "id": "pi_3NMF0MIJTenxdmPo1JFf5k1o",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF0MIJTenxdmPo1JFf5k1o_secret_suaODpBLF1IIIjA5wo5cWkHzl",\n  "confirmation_method": "automatic",\n  "created": 1687546006,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:46:46,367 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_9QKG7DvnL2aBDa message='Dashboard link for request'
2023-06-23 21:46:46,368 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:46:46,368 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF0MIJTenxdmPo1JFf5k1o
2023-06-23 21:46:46,754 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:46:46,755 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:46:46,756 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF0MIJTenxdmPo1JFf5k1o"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:46:46,756 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_YssMf3i2hOCyFZ message='Dashboard link for request'
2023-06-23 21:46:46,767 [INFO] 127.0.0.1 - - [23/Jun/2023 21:46:46] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:46:58,063 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-23 21:46:58,392 [INFO]  * Restarting with stat
2023-06-23 21:46:58,587 [WARNING]  * Debugger is active!
2023-06-23 21:46:58,592 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:47:04,266 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:47:04,267 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:47:04,278 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:47:04,716 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:47:04,717 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:47:04,717 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:47:04,717 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_wULUFNatmSdczS message='Dashboard link for request'
2023-06-23 21:47:04,718 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:47:04,718 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:47:05,033 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:47:05,034 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:47:05,034 [DEBUG] body='{\n  "id": "pi_3NMF0eIJTenxdmPo1MlMQxYm",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF0eIJTenxdmPo1MlMQxYm_secret_3wJ19OT1vEqEP8Qrxrpmi883L",\n  "confirmation_method": "automatic",\n  "created": 1687546024,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:47:05,034 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_tDlEjCATGe4IkC message='Dashboard link for request'
2023-06-23 21:47:05,035 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:47:05,035 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF0eIJTenxdmPo1MlMQxYm
2023-06-23 21:47:05,422 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:47:05,422 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:47:05,422 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF0eIJTenxdmPo1MlMQxYm"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:47:05,422 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_fOjr2vy2cQJWQz message='Dashboard link for request'
2023-06-23 21:47:05,427 [INFO] 127.0.0.1 - - [23/Jun/2023 21:47:05] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:47:27,631 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:47:28,124 [INFO]  * Restarting with stat
2023-06-23 21:47:28,310 [WARNING]  * Debugger is active!
2023-06-23 21:47:28,315 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:47:32,638 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:47:32,680 [INFO]  * Restarting with stat
2023-06-23 21:47:57,788 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-23 21:47:57,789 [INFO] [33mPress CTRL+C to quit[0m
2023-06-23 21:47:57,789 [INFO]  * Restarting with stat
2023-06-23 21:47:57,994 [WARNING]  * Debugger is active!
2023-06-23 21:47:57,998 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:48:01,456 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:48:01,457 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:48:01,463 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:48:01,883 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:48:01,883 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:48:01,883 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:48:01,883 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_QZkPfRbvQRZcwi message='Dashboard link for request'
2023-06-23 21:48:01,884 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:48:01,884 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:48:02,227 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:48:02,227 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:48:02,227 [DEBUG] body='{\n  "id": "pi_3NMF1aIJTenxdmPo0acvlIF7",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF1aIJTenxdmPo0acvlIF7_secret_U4KZfJfEZI83EReZlDdMkNAjj",\n  "confirmation_method": "automatic",\n  "created": 1687546082,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:48:02,227 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_hhUKtwjeZH0Xm8 message='Dashboard link for request'
2023-06-23 21:48:02,227 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:48:02,227 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF1aIJTenxdmPo0acvlIF7
2023-06-23 21:48:02,628 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:48:02,630 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:48:02,630 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF1aIJTenxdmPo0acvlIF7"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:48:02,630 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ijtKUqdCR9sn5i message='Dashboard link for request'
2023-06-23 21:48:02,632 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMF1aIJTenxdmPo0acvlIF7/confirm
2023-06-23 21:48:02,632 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:48:03,037 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMF1aIJTenxdmPo0acvlIF7/confirm HTTP/1.1" 400 2051
2023-06-23 21:48:03,039 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMF1aIJTenxdmPo0acvlIF7/confirm response_code=400
2023-06-23 21:48:03,039 [DEBUG] body='{\n  "error": {\n    "code": "payment_intent_unexpected_state",\n    "doc_url": "https://stripe.com/docs/error-codes/payment-intent-unexpected-state",\n    "message": "You cannot confirm this PaymentIntent because it\'s missing a payment method. To confirm the PaymentIntent with cus_O8NBUvatY5ecjm, specify a payment method attached to this customer along with the customer ID.",\n    "payment_intent": {\n      "id": "pi_3NMF1aIJTenxdmPo0acvlIF7",\n      "object": "payment_intent",\n      "amount": 1000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NMF1aIJTenxdmPo0acvlIF7_secret_U4KZfJfEZI83EReZlDdMkNAjj",\n      "confirmation_method": "automatic",\n      "created": 1687546082,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_jQ9NbgdOEgbjCz?t=1687546082",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:48:03,039 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_jQ9NbgdOEgbjCz message='Dashboard link for request'
2023-06-23 21:48:03,040 [INFO] error_code=payment_intent_unexpected_state error_message="You cannot confirm this PaymentIntent because it's missing a payment method. To confirm the PaymentIntent with cus_O8NBUvatY5ecjm, specify a payment method attached to this customer along with the customer ID." error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:48:03,056 [INFO] 127.0.0.1 - - [23/Jun/2023 21:48:03] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:48:18,364 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:48:18,751 [INFO]  * Restarting with stat
2023-06-23 21:48:18,939 [WARNING]  * Debugger is active!
2023-06-23 21:48:18,943 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:48:27,378 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:48:27,379 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:48:27,403 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:48:27,829 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:48:27,832 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:48:27,832 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:48:27,832 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_epiTyttsshy9kf message='Dashboard link for request'
2023-06-23 21:48:27,834 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:48:27,834 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:48:28,228 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:48:28,229 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:48:28,229 [DEBUG] body='{\n  "id": "pi_3NMF20IJTenxdmPo1rqZmebB",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF20IJTenxdmPo1rqZmebB_secret_32qNAVk6sZl8GGcg55sc6N5Pr",\n  "confirmation_method": "automatic",\n  "created": 1687546108,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:48:28,229 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_DxCyQJ45fUkMCO message='Dashboard link for request'
2023-06-23 21:48:28,231 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:48:28,231 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF20IJTenxdmPo1rqZmebB
2023-06-23 21:48:28,636 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:48:28,636 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:48:28,636 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF20IJTenxdmPo1rqZmebB"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:48:28,637 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qIulgrP8jOcziP message='Dashboard link for request'
2023-06-23 21:48:28,637 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMF20IJTenxdmPo1rqZmebB/confirm
2023-06-23 21:48:28,637 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:48:28,711 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMF20IJTenxdmPo1rqZmebB/confirm HTTP/1.1" 401 129
2023-06-23 21:48:28,711 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMF20IJTenxdmPo1rqZmebB/confirm response_code=401
2023-06-23 21:48:28,711 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: pm_1NM6S***************IlQI",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:48:28,711 [INFO] error_code=None error_message='Invalid API Key provided: pm_1NM6S***************IlQI' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:48:28,718 [INFO] 127.0.0.1 - - [23/Jun/2023 21:48:28] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:48:59,764 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-23 21:49:00,293 [INFO]  * Restarting with stat
2023-06-23 21:49:00,505 [WARNING]  * Debugger is active!
2023-06-23 21:49:00,509 [INFO]  * Debugger PIN: 458-791-220
2023-06-23 21:49:03,836 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:49:03,836 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:49:03,841 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:49:04,266 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:49:04,268 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:49:04,268 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:49:04,269 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_hD3wtlB5uDHz1t message='Dashboard link for request'
2023-06-23 21:49:04,271 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:49:04,272 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:49:04,685 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:49:04,687 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:49:04,687 [DEBUG] body='{\n  "id": "pi_3NMF2aIJTenxdmPo1nW7cUTI",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF2aIJTenxdmPo1nW7cUTI_secret_gXTlyp3CmLGSwdqtILWtCKmfy",\n  "confirmation_method": "automatic",\n  "created": 1687546144,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:49:04,687 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_MwGU5KmUPqzImw message='Dashboard link for request'
2023-06-23 21:49:04,688 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1
2023-06-23 21:49:04,689 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF2aIJTenxdmPo1nW7cUTI
2023-06-23 21:49:05,091 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 HTTP/1.1" 200 4068
2023-06-23 21:49:05,092 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1 response_code=200
2023-06-23 21:49:05,092 [DEBUG] body='{\n  "id": "in_1NMEMoIJTenxdmPoGidG5xn1",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687543554,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688407554,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMEMpIJTenxdmPokGgFL4rt",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMEMpIJTenxdmPovRM2eP2Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687543555,\n          "start": 1687543555\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMEMoIJTenxdmPoGidG5xn1/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF2aIJTenxdmPo1nW7cUTI"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687543554,\n  "period_start": 1687543554,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687543554\n}' message='API response body'
2023-06-23 21:49:05,092 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_VshWfpeu4dOrNN message='Dashboard link for request'
2023-06-23 21:49:05,093 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMF2aIJTenxdmPo1nW7cUTI/confirm
2023-06-23 21:49:05,093 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:49:05,170 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMF2aIJTenxdmPo1nW7cUTI/confirm HTTP/1.1" 401 129
2023-06-23 21:49:05,171 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMF2aIJTenxdmPo1nW7cUTI/confirm response_code=401
2023-06-23 21:49:05,171 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: pm_1NM6S***************IlQI",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:49:05,171 [INFO] error_code=None error_message='Invalid API Key provided: pm_1NM6S***************IlQI' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:49:05,186 [INFO] 127.0.0.1 - - [23/Jun/2023 21:49:05] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:50:10,493 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 21:50:10,493 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 21:50:10,510 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:50:11,139 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 21:50:11,140 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 21:50:11,140 [DEBUG] body='{\n  "id": "in_1NMF3eIJTenxdmPoiI4MR0n3",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687546210,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688410210,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687546210,\n  "period_start": 1687546210,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687546210\n}' message='API response body'
2023-06-23 21:50:11,140 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_R69ml9Q9z7itfa message='Dashboard link for request'
2023-06-23 21:50:11,140 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 21:50:11,140 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMF3eIJTenxdmPoiI4MR0n3&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 21:50:11,652 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 21:50:11,654 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 21:50:11,654 [DEBUG] body='{\n  "id": "ii_1NMF3fIJTenxdmPoglgez94d",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687546211,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMF3eIJTenxdmPoiI4MR0n3",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687546211,\n    "start": 1687546211\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 21:50:11,654 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_UwwXpyPE4kQsT0 message='Dashboard link for request'
2023-06-23 21:50:12,400 [INFO] 127.0.0.1 - - [23/Jun/2023 21:50:12] "POST /invoice/create HTTP/1.1" 200 -
2023-06-23 21:50:38,931 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:50:38,933 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:50:38,939 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:50:39,364 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:50:39,365 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:50:39,365 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:50:39,365 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_bH9gc5mcqSprKf message='Dashboard link for request'
2023-06-23 21:50:39,367 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:50:39,367 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:50:39,813 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:50:39,814 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:50:39,814 [DEBUG] body='{\n  "id": "pi_3NMF47IJTenxdmPo18mzbn7j",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF47IJTenxdmPo18mzbn7j_secret_CprY9JtSROxKZSmCTPgLKdkgO",\n  "confirmation_method": "automatic",\n  "created": 1687546239,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:50:39,814 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_dNY6kKuIjBHgNJ message='Dashboard link for request'
2023-06-23 21:50:39,815 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3
2023-06-23 21:50:39,815 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF47IJTenxdmPo18mzbn7j
2023-06-23 21:50:40,222 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3 HTTP/1.1" 200 4068
2023-06-23 21:50:40,223 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3 response_code=200
2023-06-23 21:50:40,223 [DEBUG] body='{\n  "id": "in_1NMF3eIJTenxdmPoiI4MR0n3",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687546210,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688410210,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMF3fIJTenxdmPocaozlLfS",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMF3fIJTenxdmPoglgez94d",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687546211,\n          "start": 1687546211\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF47IJTenxdmPo18mzbn7j"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687546210,\n  "period_start": 1687546210,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687546210\n}' message='API response body'
2023-06-23 21:50:40,223 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_oE7Xx3dpRw5oOx message='Dashboard link for request'
2023-06-23 21:50:40,224 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMF47IJTenxdmPo18mzbn7j/confirm
2023-06-23 21:50:40,225 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:50:40,298 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMF47IJTenxdmPo18mzbn7j/confirm HTTP/1.1" 401 129
2023-06-23 21:50:40,299 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMF47IJTenxdmPo18mzbn7j/confirm response_code=401
2023-06-23 21:50:40,299 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: pm_1NM6S***************IlQI",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:50:40,299 [INFO] error_code=None error_message='Invalid API Key provided: pm_1NM6S***************IlQI' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:50:40,313 [INFO] 127.0.0.1 - - [23/Jun/2023 21:50:40] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:52:57,831 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:52:57,833 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:52:57,848 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:52:58,279 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:52:58,279 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:52:58,279 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:52:58,279 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_4SaWK0e6ElVVt8 message='Dashboard link for request'
2023-06-23 21:52:58,279 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:52:58,279 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:52:58,666 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:52:58,668 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:52:58,669 [DEBUG] body='{\n  "id": "pi_3NMF6MIJTenxdmPo1WsYZ9Nk",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF6MIJTenxdmPo1WsYZ9Nk_secret_r5bGqO8oQUk1AzTsu6wmUnb0t",\n  "confirmation_method": "automatic",\n  "created": 1687546378,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:52:58,669 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_eGVv2ix7jqMXdv message='Dashboard link for request'
2023-06-23 21:52:58,670 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3
2023-06-23 21:52:58,670 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF6MIJTenxdmPo1WsYZ9Nk
2023-06-23 21:52:59,076 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3 HTTP/1.1" 200 4068
2023-06-23 21:52:59,077 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3 response_code=200
2023-06-23 21:52:59,077 [DEBUG] body='{\n  "id": "in_1NMF3eIJTenxdmPoiI4MR0n3",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687546210,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688410210,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMF3fIJTenxdmPocaozlLfS",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMF3fIJTenxdmPoglgez94d",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687546211,\n          "start": 1687546211\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMF3eIJTenxdmPoiI4MR0n3/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF6MIJTenxdmPo1WsYZ9Nk"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687546210,\n  "period_start": 1687546210,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687546210\n}' message='API response body'
2023-06-23 21:52:59,078 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_IGMhcbgsruYstp message='Dashboard link for request'
2023-06-23 21:52:59,079 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMF6MIJTenxdmPo1WsYZ9Nk/confirm
2023-06-23 21:52:59,079 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:52:59,157 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMF6MIJTenxdmPo1WsYZ9Nk/confirm HTTP/1.1" 401 129
2023-06-23 21:52:59,158 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMF6MIJTenxdmPo1WsYZ9Nk/confirm response_code=401
2023-06-23 21:52:59,159 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: pm_1NM6S***************IlQI",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:52:59,159 [INFO] error_code=None error_message='Invalid API Key provided: pm_1NM6S***************IlQI' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:52:59,171 [INFO] 127.0.0.1 - - [23/Jun/2023 21:52:59] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-23 21:53:22,463 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-23 21:53:22,463 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-23 21:53:22,466 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:53:23,039 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-23 21:53:23,040 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-23 21:53:23,040 [DEBUG] body='{\n  "id": "in_1NMF6kIJTenxdmPopkh9Bwlq",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687546402,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688410402,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMF6kIJTenxdmPopkh9Bwlq/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687546402,\n  "period_start": 1687546402,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687546402\n}' message='API response body'
2023-06-23 21:53:23,040 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ELKBQcx6aN4nt8 message='Dashboard link for request'
2023-06-23 21:53:23,042 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-23 21:53:23,042 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMF6kIJTenxdmPopkh9Bwlq&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-23 21:53:23,447 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-23 21:53:23,447 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-23 21:53:23,447 [DEBUG] body='{\n  "id": "ii_1NMF6lIJTenxdmPoUyAQuyST",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687546403,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMF6kIJTenxdmPopkh9Bwlq",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687546403,\n    "start": 1687546403\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-23 21:53:23,447 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_kl9NKGJ6SyY59o message='Dashboard link for request'
2023-06-23 21:53:24,191 [INFO] 127.0.0.1 - - [23/Jun/2023 21:53:24] "POST /invoice/create HTTP/1.1" 200 -
2023-06-23 21:54:01,826 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-23 21:54:01,828 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:54:01,833 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-23 21:54:02,268 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-23 21:54:02,268 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-23 21:54:02,268 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-23 21:54:02,268 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_iSmPpEbHDZz1vA message='Dashboard link for request'
2023-06-23 21:54:02,269 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-23 21:54:02,269 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-23 21:54:02,668 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-23 21:54:02,669 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-23 21:54:02,669 [DEBUG] body='{\n  "id": "pi_3NMF7OIJTenxdmPo0BIk5vPh",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMF7OIJTenxdmPo0BIk5vPh_secret_7E59uMAZI87c4TVuUDgmIjg7c",\n  "confirmation_method": "automatic",\n  "created": 1687546442,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-23 21:54:02,671 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_O4Jbqo6COZGLf1 message='Dashboard link for request'
2023-06-23 21:54:02,672 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMF6kIJTenxdmPopkh9Bwlq
2023-06-23 21:54:02,672 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMF7OIJTenxdmPo0BIk5vPh
2023-06-23 21:54:03,076 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMF6kIJTenxdmPopkh9Bwlq HTTP/1.1" 200 4068
2023-06-23 21:54:03,080 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMF6kIJTenxdmPopkh9Bwlq response_code=200
2023-06-23 21:54:03,080 [DEBUG] body='{\n  "id": "in_1NMF6kIJTenxdmPopkh9Bwlq",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687546402,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688410402,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMF6lIJTenxdmPoQ5tjSgdy",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMF6lIJTenxdmPoUyAQuyST",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687546403,\n          "start": 1687546403\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMF6kIJTenxdmPopkh9Bwlq/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMF7OIJTenxdmPo0BIk5vPh"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687546402,\n  "period_start": 1687546402,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687546402\n}' message='API response body'
2023-06-23 21:54:03,080 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qZK1eQlCA2bHGD message='Dashboard link for request'
2023-06-23 21:54:03,081 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMF7OIJTenxdmPo0BIk5vPh/confirm
2023-06-23 21:54:03,081 [DEBUG] api_version=None message='Post details' post_data=
2023-06-23 21:54:03,161 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMF7OIJTenxdmPo0BIk5vPh/confirm HTTP/1.1" 401 129
2023-06-23 21:54:03,162 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMF7OIJTenxdmPo0BIk5vPh/confirm response_code=401
2023-06-23 21:54:03,162 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: pm_1NM6S***************IlQI",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-23 21:54:03,162 [INFO] error_code=None error_message='Invalid API Key provided: pm_1NM6S***************IlQI' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-23 21:54:03,179 [INFO] 127.0.0.1 - - [23/Jun/2023 21:54:03] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:13:34,861 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:13:34,862 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:13:34,873 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:13:35,446 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:13:35,447 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:13:35,447 [DEBUG] body='{\n  "id": "in_1NMIEVIJTenxdmPo4qB5nkm6",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558415,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422415,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIEVIJTenxdmPo4qB5nkm6/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558415,\n  "period_start": 1687558415,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558415\n}' message='API response body'
2023-06-24 01:13:35,447 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ZC4XUM50nHQCNb message='Dashboard link for request'
2023-06-24 01:13:35,448 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:13:35,448 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMIEVIJTenxdmPo4qB5nkm6&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:13:35,945 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:13:35,946 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:13:35,946 [DEBUG] body='{\n  "id": "ii_1NMIEVIJTenxdmPoacpxiBnC",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687558415,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIEVIJTenxdmPo4qB5nkm6",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687558415,\n    "start": 1687558415\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:13:35,946 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_fGJCh7liZtvlKb message='Dashboard link for request'
2023-06-24 01:13:36,695 [INFO] 127.0.0.1 - - [24/Jun/2023 01:13:36] "POST /invoice/create HTTP/1.1" 200 -
2023-06-24 01:14:00,369 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/invoice/invoice_routes.py', reloading
2023-06-24 01:14:00,907 [INFO]  * Restarting with stat
2023-06-24 01:14:01,158 [WARNING]  * Debugger is active!
2023-06-24 01:14:01,163 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:14:04,553 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:14:04,553 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:14:04,560 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:14:05,236 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:14:05,238 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:14:05,238 [DEBUG] body='{\n  "id": "in_1NMIEzIJTenxdmPo5iJJM20h",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558445,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422445,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIEzIJTenxdmPo5iJJM20h/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558445,\n  "period_start": 1687558445,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558445\n}' message='API response body'
2023-06-24 01:14:05,238 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_HCTJwysHhCTD8K message='Dashboard link for request'
2023-06-24 01:14:05,243 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:14:05,244 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMIEzIJTenxdmPo5iJJM20h&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:14:05,642 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:14:05,642 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:14:05,642 [DEBUG] body='{\n  "id": "ii_1NMIEzIJTenxdmPoflA2FQl3",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687558445,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIEzIJTenxdmPo5iJJM20h",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687558445,\n    "start": 1687558445\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:14:05,642 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_g0fFsLFH9lwRwW message='Dashboard link for request'
2023-06-24 01:14:06,390 [INFO] 127.0.0.1 - - [24/Jun/2023 01:14:06] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:14:16,400 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/invoice/invoice_routes.py', reloading
2023-06-24 01:14:16,447 [INFO]  * Restarting with stat
2023-06-24 01:14:16,632 [WARNING]  * Debugger is active!
2023-06-24 01:14:16,636 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:14:19,421 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:14:19,421 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:14:19,428 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:14:19,980 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:14:19,981 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:14:19,981 [DEBUG] body='{\n  "id": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558459,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422459,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558459,\n  "period_start": 1687558459,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558459\n}' message='API response body'
2023-06-24 01:14:19,981 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_xHWexP12qOnoaL message='Dashboard link for request'
2023-06-24 01:14:19,981 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:14:19,981 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMIFDIJTenxdmPoPAPOppTW&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:14:20,496 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:14:20,498 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:14:20,498 [DEBUG] body='{\n  "id": "ii_1NMIFEIJTenxdmPoKYPH8tme",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687558460,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687558460,\n    "start": 1687558460\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:14:20,498 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_RZZ784CcrUnVTn message='Dashboard link for request'
2023-06-24 01:14:21,238 [INFO] 127.0.0.1 - - [24/Jun/2023 01:14:21] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:14:35,555 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:14:35,555 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:14:35,564 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:14:35,993 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:14:35,994 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:14:35,994 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:14:35,994 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_0wzDV59eY79EO0 message='Dashboard link for request'
2023-06-24 01:14:35,995 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:14:35,995 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:14:36,321 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:14:36,321 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:14:36,321 [DEBUG] body='{\n  "id": "pi_3NMIFUIJTenxdmPo0YcRigGg",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIFUIJTenxdmPo0YcRigGg_secret_26vmawoyaK1Q7gkui8kS7BSUE",\n  "confirmation_method": "automatic",\n  "created": 1687558476,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:14:36,321 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_BJutWYFnOfFYEj message='Dashboard link for request'
2023-06-24 01:14:36,321 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW
2023-06-24 01:14:36,321 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIFUIJTenxdmPo0YcRigGg
2023-06-24 01:14:36,694 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW HTTP/1.1" 200 4068
2023-06-24 01:14:36,694 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW response_code=200
2023-06-24 01:14:36,694 [DEBUG] body='{\n  "id": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558459,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422459,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIFEIJTenxdmPoKR9K1Ohy",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIFEIJTenxdmPoKYPH8tme",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687558460,\n          "start": 1687558460\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIFUIJTenxdmPo0YcRigGg"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558459,\n  "period_start": 1687558459,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558459\n}' message='API response body'
2023-06-24 01:14:36,694 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_4QNfhBd09wNxK1 message='Dashboard link for request'
2023-06-24 01:14:36,695 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIFUIJTenxdmPo0YcRigGg/confirm
2023-06-24 01:14:36,695 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:14:36,771 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIFUIJTenxdmPo0YcRigGg/confirm HTTP/1.1" 401 129
2023-06-24 01:14:36,771 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIFUIJTenxdmPo0YcRigGg/confirm response_code=401
2023-06-24 01:14:36,771 [DEBUG] body='{\n  "error": {\n    "message": "Invalid API Key provided: pm_1NM6S***************IlQI",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:14:36,771 [INFO] error_code=None error_message='Invalid API Key provided: pm_1NM6S***************IlQI' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:14:36,783 [INFO] 127.0.0.1 - - [24/Jun/2023 01:14:36] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:17:16,599 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 01:17:16,943 [INFO]  * Restarting with stat
2023-06-24 01:17:17,144 [WARNING]  * Debugger is active!
2023-06-24 01:17:17,149 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:17:23,049 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:17:23,050 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:17:23,070 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:17:23,483 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:17:23,484 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:17:23,484 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:17:23,484 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_9PmyS1ZMWCODov message='Dashboard link for request'
2023-06-24 01:17:23,485 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:17:23,485 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:17:23,884 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:17:23,886 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:17:23,886 [DEBUG] body='{\n  "id": "pi_3NMIIBIJTenxdmPo1s6UVaRm",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIIBIJTenxdmPo1s6UVaRm_secret_zW7GQtejKo4y9Bk4ckgz01QEy",\n  "confirmation_method": "automatic",\n  "created": 1687558643,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:17:23,886 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_XjIFPkmnbR3xXv message='Dashboard link for request'
2023-06-24 01:17:23,887 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW
2023-06-24 01:17:23,887 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIIBIJTenxdmPo1s6UVaRm
2023-06-24 01:17:24,294 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW HTTP/1.1" 200 4068
2023-06-24 01:17:24,296 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW response_code=200
2023-06-24 01:17:24,297 [DEBUG] body='{\n  "id": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558459,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422459,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIFEIJTenxdmPoKR9K1Ohy",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIFEIJTenxdmPoKYPH8tme",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687558460,\n          "start": 1687558460\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIIBIJTenxdmPo1s6UVaRm"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558459,\n  "period_start": 1687558459,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558459\n}' message='API response body'
2023-06-24 01:17:24,297 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_yGaM8WQ3Rv6H9R message='Dashboard link for request'
2023-06-24 01:17:24,309 [INFO] 127.0.0.1 - - [24/Jun/2023 01:17:24] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:18:52,498 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 01:18:53,037 [INFO]  * Restarting with stat
2023-06-24 01:18:55,807 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-24 01:18:55,807 [INFO] [33mPress CTRL+C to quit[0m
2023-06-24 01:18:55,808 [INFO]  * Restarting with stat
2023-06-24 01:18:55,995 [WARNING]  * Debugger is active!
2023-06-24 01:18:55,999 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:19:00,021 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:19:00,022 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:00,038 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:19:00,455 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:19:00,455 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:19:00,455 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:19:00,455 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ngG5aF1w2g25TJ message='Dashboard link for request'
2023-06-24 01:19:00,456 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:19:00,456 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:19:00,855 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:19:00,855 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:19:00,855 [DEBUG] body='{\n  "id": "pi_3NMIJkIJTenxdmPo0VRrswbs",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIJkIJTenxdmPo0VRrswbs_secret_vxn3hRBLUS2CiHQ7vUWgw08tE",\n  "confirmation_method": "automatic",\n  "created": 1687558740,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:00,855 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zR3X3T5iWoxmhk message='Dashboard link for request'
2023-06-24 01:19:00,856 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW
2023-06-24 01:19:00,856 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIJkIJTenxdmPo0VRrswbs
2023-06-24 01:19:01,267 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW HTTP/1.1" 200 4068
2023-06-24 01:19:01,268 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW response_code=200
2023-06-24 01:19:01,268 [DEBUG] body='{\n  "id": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558459,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422459,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIFEIJTenxdmPoKR9K1Ohy",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIFEIJTenxdmPoKYPH8tme",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687558460,\n          "start": 1687558460\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIJkIJTenxdmPo0VRrswbs"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558459,\n  "period_start": 1687558459,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558459\n}' message='API response body'
2023-06-24 01:19:01,269 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ADwxjLiSU0YpTX message='Dashboard link for request'
2023-06-24 01:19:01,270 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIJkIJTenxdmPo0VRrswbs
2023-06-24 01:19:01,270 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:01,565 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIJkIJTenxdmPo0VRrswbs HTTP/1.1" 200 1292
2023-06-24 01:19:01,565 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIJkIJTenxdmPo0VRrswbs response_code=200
2023-06-24 01:19:01,565 [DEBUG] body='{\n  "id": "pi_3NMIJkIJTenxdmPo0VRrswbs",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIJkIJTenxdmPo0VRrswbs_secret_vxn3hRBLUS2CiHQ7vUWgw08tE",\n  "confirmation_method": "automatic",\n  "created": 1687558740,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:01,565 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_QD0ZJxK0orJDcc message='Dashboard link for request'
2023-06-24 01:19:01,565 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIJkIJTenxdmPo0VRrswbs/confirm
2023-06-24 01:19:01,565 [DEBUG] api_version=None message='Post details' post_data=payment_intent_id=pi_3NMIJkIJTenxdmPo0VRrswbs&payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-24 01:19:01,892 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIJkIJTenxdmPo0VRrswbs/confirm HTTP/1.1" 400 1931
2023-06-24 01:19:01,893 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIJkIJTenxdmPo0VRrswbs/confirm response_code=400
2023-06-24 01:19:01,893 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: payment_intent_id. Did you mean payment_method_options?",\n    "param": "payment_intent_id",\n    "payment_intent": {\n      "id": "pi_3NMIJkIJTenxdmPo0VRrswbs",\n      "object": "payment_intent",\n      "amount": 1000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NMIJkIJTenxdmPo0VRrswbs_secret_vxn3hRBLUS2CiHQ7vUWgw08tE",\n      "confirmation_method": "automatic",\n      "created": 1687558740,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_z2AntpgETHUx4x?t=1687558741",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:19:01,893 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_z2AntpgETHUx4x message='Dashboard link for request'
2023-06-24 01:19:01,894 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: payment_intent_id. Did you mean payment_method_options?' error_param=payment_intent_id error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:19:01,910 [INFO] 127.0.0.1 - - [24/Jun/2023 01:19:01] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:19:18,493 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 01:19:18,958 [INFO]  * Restarting with stat
2023-06-24 01:19:19,137 [WARNING]  * Debugger is active!
2023-06-24 01:19:19,141 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:19:22,630 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:19:22,630 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:22,642 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:19:23,079 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:19:23,081 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:19:23,081 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:19:23,082 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_pni5wtofz2JgQ1 message='Dashboard link for request'
2023-06-24 01:19:23,084 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:19:23,085 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:19:23,485 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:19:23,485 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:19:23,485 [DEBUG] body='{\n  "id": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ_secret_DElYkoO4oSHh1C9SCYtdluJ78",\n  "confirmation_method": "automatic",\n  "created": 1687558763,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:23,485 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_sMOkqGpcFhzodb message='Dashboard link for request'
2023-06-24 01:19:23,485 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW
2023-06-24 01:19:23,485 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIK7IJTenxdmPo0Ew1wmHJ
2023-06-24 01:19:23,896 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW HTTP/1.1" 200 4068
2023-06-24 01:19:23,898 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW response_code=200
2023-06-24 01:19:23,898 [DEBUG] body='{\n  "id": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558459,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422459,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIFEIJTenxdmPoKR9K1Ohy",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIFEIJTenxdmPoKYPH8tme",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687558460,\n          "start": 1687558460\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558459,\n  "period_start": 1687558459,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558459\n}' message='API response body'
2023-06-24 01:19:23,898 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qqzOZ6qTJoDhbP message='Dashboard link for request'
2023-06-24 01:19:23,900 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIK7IJTenxdmPo0Ew1wmHJ
2023-06-24 01:19:23,900 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:24,202 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIK7IJTenxdmPo0Ew1wmHJ HTTP/1.1" 200 1292
2023-06-24 01:19:24,204 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIK7IJTenxdmPo0Ew1wmHJ response_code=200
2023-06-24 01:19:24,204 [DEBUG] body='{\n  "id": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ_secret_DElYkoO4oSHh1C9SCYtdluJ78",\n  "confirmation_method": "automatic",\n  "created": 1687558763,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:24,204 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_DbArcttJ2tgCNU message='Dashboard link for request'
2023-06-24 01:19:24,205 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIK7IJTenxdmPo0Ew1wmHJ/confirm
2023-06-24 01:19:24,205 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:24,614 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIK7IJTenxdmPo0Ew1wmHJ/confirm HTTP/1.1" 400 2051
2023-06-24 01:19:24,614 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIK7IJTenxdmPo0Ew1wmHJ/confirm response_code=400
2023-06-24 01:19:24,614 [DEBUG] body='{\n  "error": {\n    "code": "payment_intent_unexpected_state",\n    "doc_url": "https://stripe.com/docs/error-codes/payment-intent-unexpected-state",\n    "message": "You cannot confirm this PaymentIntent because it\'s missing a payment method. To confirm the PaymentIntent with cus_O8NBUvatY5ecjm, specify a payment method attached to this customer along with the customer ID.",\n    "payment_intent": {\n      "id": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ",\n      "object": "payment_intent",\n      "amount": 1000,\n      "amount_capturable": 0,\n      "amount_details": {\n        "tip": {\n        }\n      },\n      "amount_received": 0,\n      "application": null,\n      "application_fee_amount": null,\n      "automatic_payment_methods": null,\n      "canceled_at": null,\n      "cancellation_reason": null,\n      "capture_method": "automatic",\n      "client_secret": "pi_3NMIK7IJTenxdmPo0Ew1wmHJ_secret_DElYkoO4oSHh1C9SCYtdluJ78",\n      "confirmation_method": "automatic",\n      "created": 1687558763,\n      "currency": "usd",\n      "customer": "cus_O8NBUvatY5ecjm",\n      "description": null,\n      "invoice": null,\n      "last_payment_error": null,\n      "latest_charge": null,\n      "livemode": false,\n      "metadata": {\n      },\n      "next_action": null,\n      "on_behalf_of": null,\n      "payment_method": null,\n      "payment_method_options": {\n        "card": {\n          "installments": null,\n          "mandate_options": null,\n          "network": null,\n          "request_three_d_secure": "automatic"\n        }\n      },\n      "payment_method_types": [\n        "card"\n      ],\n      "processing": null,\n      "receipt_email": null,\n      "review": null,\n      "setup_future_usage": null,\n      "shipping": null,\n      "source": null,\n      "statement_descriptor": null,\n      "statement_descriptor_suffix": null,\n      "status": "requires_payment_method",\n      "transfer_data": null,\n      "transfer_group": null\n    },\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_g9j2rKBlO3xBZq?t=1687558764",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:19:24,614 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_g9j2rKBlO3xBZq message='Dashboard link for request'
2023-06-24 01:19:24,614 [INFO] error_code=payment_intent_unexpected_state error_message="You cannot confirm this PaymentIntent because it's missing a payment method. To confirm the PaymentIntent with cus_O8NBUvatY5ecjm, specify a payment method attached to this customer along with the customer ID." error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:19:24,620 [INFO] 127.0.0.1 - - [24/Jun/2023 01:19:24] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:19:38,396 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 01:19:38,930 [INFO]  * Restarting with stat
2023-06-24 01:19:39,119 [WARNING]  * Debugger is active!
2023-06-24 01:19:39,123 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:19:44,497 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 01:19:44,538 [INFO]  * Restarting with stat
2023-06-24 01:19:44,720 [WARNING]  * Debugger is active!
2023-06-24 01:19:44,724 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:19:48,264 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:19:48,264 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:48,272 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:19:48,695 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:19:48,697 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:19:48,697 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:19:48,697 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_FrE34GRBX80vbh message='Dashboard link for request'
2023-06-24 01:19:48,699 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:19:48,700 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:19:49,029 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:19:49,030 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:19:49,030 [DEBUG] body='{\n  "id": "pi_3NMIKXIJTenxdmPo0LRenZp4",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIKXIJTenxdmPo0LRenZp4_secret_DjkFOSwO13MsYL5M8skAryuHt",\n  "confirmation_method": "automatic",\n  "created": 1687558789,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:49,030 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_tQb1pRRa24YiPY message='Dashboard link for request'
2023-06-24 01:19:49,031 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW
2023-06-24 01:19:49,031 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIKXIJTenxdmPo0LRenZp4
2023-06-24 01:19:49,496 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW HTTP/1.1" 200 4068
2023-06-24 01:19:49,498 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW response_code=200
2023-06-24 01:19:49,498 [DEBUG] body='{\n  "id": "in_1NMIFDIJTenxdmPoPAPOppTW",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687558459,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688422459,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIFEIJTenxdmPoKR9K1Ohy",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIFEIJTenxdmPoKYPH8tme",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687558460,\n          "start": 1687558460\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIFDIJTenxdmPoPAPOppTW/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIKXIJTenxdmPo0LRenZp4"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687558459,\n  "period_start": 1687558459,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687558459\n}' message='API response body'
2023-06-24 01:19:49,498 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_IcDyi2TfGfNSRk message='Dashboard link for request'
2023-06-24 01:19:49,500 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIKXIJTenxdmPo0LRenZp4
2023-06-24 01:19:49,500 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:19:49,802 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIKXIJTenxdmPo0LRenZp4 HTTP/1.1" 200 1292
2023-06-24 01:19:49,803 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIKXIJTenxdmPo0LRenZp4 response_code=200
2023-06-24 01:19:49,804 [DEBUG] body='{\n  "id": "pi_3NMIKXIJTenxdmPo0LRenZp4",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIKXIJTenxdmPo0LRenZp4_secret_DjkFOSwO13MsYL5M8skAryuHt",\n  "confirmation_method": "automatic",\n  "created": 1687558789,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:49,804 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_sT7idEUoGrRWxU message='Dashboard link for request'
2023-06-24 01:19:49,805 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIKXIJTenxdmPo0LRenZp4/confirm
2023-06-24 01:19:49,805 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-24 01:19:50,953 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIKXIJTenxdmPo0LRenZp4/confirm HTTP/1.1" 200 1331
2023-06-24 01:19:50,954 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIKXIJTenxdmPo0LRenZp4/confirm response_code=200
2023-06-24 01:19:50,954 [DEBUG] body='{\n  "id": "pi_3NMIKXIJTenxdmPo0LRenZp4",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 1000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIKXIJTenxdmPo0LRenZp4_secret_DjkFOSwO13MsYL5M8skAryuHt",\n  "confirmation_method": "automatic",\n  "created": 1687558789,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMIKXIJTenxdmPo0xqeYoWU",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:19:50,954 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_7Mlra4PsMHMPAp message='Dashboard link for request'
2023-06-24 01:19:50,956 [INFO] 127.0.0.1 - - [24/Jun/2023 01:19:50] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:24:27,072 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 01:24:27,107 [INFO]  * Restarting with stat
2023-06-24 01:24:27,278 [WARNING]  * Debugger is active!
2023-06-24 01:24:27,282 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:24:38,178 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:24:38,178 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:24:38,192 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:24:38,775 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:24:38,777 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:24:38,777 [DEBUG] body='{\n  "id": "in_1NMIPCIJTenxdmPo6AUmICQ5",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559078,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423078,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIPCIJTenxdmPo6AUmICQ5/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559078,\n  "period_start": 1687559078,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559078\n}' message='API response body'
2023-06-24 01:24:38,777 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_lGwDXZ48tcDhvj message='Dashboard link for request'
2023-06-24 01:24:38,780 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:24:38,780 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMIPCIJTenxdmPo6AUmICQ5&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:24:39,190 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:24:39,192 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:24:39,192 [DEBUG] body='{\n  "id": "ii_1NMIPDIJTenxdmPowgjqHXnt",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687559079,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIPCIJTenxdmPo6AUmICQ5",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687559079,\n    "start": 1687559079\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:24:39,192 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_eq484B4bu35ZI4 message='Dashboard link for request'
2023-06-24 01:24:39,937 [INFO] 127.0.0.1 - - [24/Jun/2023 01:24:39] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:24:47,090 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:24:47,090 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:24:47,094 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:24:47,513 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:24:47,514 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:24:47,514 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:24:47,514 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_VXHd7wgUdpMaeG message='Dashboard link for request'
2023-06-24 01:24:47,514 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:24:47,514 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:24:47,858 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:24:47,859 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:24:47,859 [DEBUG] body='{\n  "id": "pi_3NMIPLIJTenxdmPo0TluL3BU",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIPLIJTenxdmPo0TluL3BU_secret_xnCs1BUM2lc7U5N2m3tryxzea",\n  "confirmation_method": "automatic",\n  "created": 1687559087,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:24:47,859 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zD5qNVTSszDm3x message='Dashboard link for request'
2023-06-24 01:24:47,860 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIPCIJTenxdmPo6AUmICQ5
2023-06-24 01:24:47,860 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIPLIJTenxdmPo0TluL3BU
2023-06-24 01:24:48,298 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIPCIJTenxdmPo6AUmICQ5 HTTP/1.1" 200 4068
2023-06-24 01:24:48,300 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPCIJTenxdmPo6AUmICQ5 response_code=200
2023-06-24 01:24:48,300 [DEBUG] body='{\n  "id": "in_1NMIPCIJTenxdmPo6AUmICQ5",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559078,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423078,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPDIJTenxdmPogy4JYWc3",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPDIJTenxdmPowgjqHXnt",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559079,\n          "start": 1687559079\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPCIJTenxdmPo6AUmICQ5/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIPLIJTenxdmPo0TluL3BU"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559078,\n  "period_start": 1687559078,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559078\n}' message='API response body'
2023-06-24 01:24:48,300 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_GVfxxzQsISIKsB message='Dashboard link for request'
2023-06-24 01:24:48,301 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIPLIJTenxdmPo0TluL3BU
2023-06-24 01:24:48,301 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:24:48,594 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIPLIJTenxdmPo0TluL3BU HTTP/1.1" 200 1292
2023-06-24 01:24:48,596 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIPLIJTenxdmPo0TluL3BU response_code=200
2023-06-24 01:24:48,596 [DEBUG] body='{\n  "id": "pi_3NMIPLIJTenxdmPo0TluL3BU",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIPLIJTenxdmPo0TluL3BU_secret_xnCs1BUM2lc7U5N2m3tryxzea",\n  "confirmation_method": "automatic",\n  "created": 1687559087,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:24:48,596 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LxqQ9v0JPbAQiJ message='Dashboard link for request'
2023-06-24 01:24:48,597 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIPLIJTenxdmPo0TluL3BU/confirm
2023-06-24 01:24:48,597 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-24 01:24:49,710 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIPLIJTenxdmPo0TluL3BU/confirm HTTP/1.1" 200 1331
2023-06-24 01:24:49,712 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIPLIJTenxdmPo0TluL3BU/confirm response_code=200
2023-06-24 01:24:49,712 [DEBUG] body='{\n  "id": "pi_3NMIPLIJTenxdmPo0TluL3BU",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 1000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIPLIJTenxdmPo0TluL3BU_secret_xnCs1BUM2lc7U5N2m3tryxzea",\n  "confirmation_method": "automatic",\n  "created": 1687559087,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMIPLIJTenxdmPo0E4cDlIA",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:24:49,712 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Bypgj5mFNT58op message='Dashboard link for request'
2023-06-24 01:24:49,715 [INFO] 127.0.0.1 - - [24/Jun/2023 01:24:49] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:24:55,390 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 01:24:55,434 [INFO]  * Restarting with stat
2023-06-24 01:24:55,611 [WARNING]  * Debugger is active!
2023-06-24 01:24:55,615 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:25:00,609 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:25:00,609 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:25:00,622 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:25:01,304 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:25:01,306 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:25:01,307 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:25:01,307 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_cPbfBPBSKTN1pA message='Dashboard link for request'
2023-06-24 01:25:01,309 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:25:01,309 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&invoice=in_1NMIPZIJTenxdmPokdmPF6RN&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:25:01,784 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:25:01,786 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:25:01,786 [DEBUG] body='{\n  "id": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "date": 1687559101,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687559101,\n    "start": 1687559101\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:25:01,786 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_JzUZfvK5NBQ49C message='Dashboard link for request'
2023-06-24 01:25:02,523 [INFO] 127.0.0.1 - - [24/Jun/2023 01:25:02] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:25:10,749 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:25:10,750 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:25:10,755 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:25:11,186 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:25:11,188 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:25:11,188 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:25:11,188 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_H91cnNUrT4RcsJ message='Dashboard link for request'
2023-06-24 01:25:11,190 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:25:11,190 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:25:11,645 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:25:11,646 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:25:11,646 [DEBUG] body='{\n  "id": "pi_3NMIPjIJTenxdmPo0qv77d6m",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIPjIJTenxdmPo0qv77d6m_secret_77BdB9l6QUFHQKGIPsPWJ0Bs5",\n  "confirmation_method": "automatic",\n  "created": 1687559111,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:25:11,646 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qpCP06WjyJlTRR message='Dashboard link for request'
2023-06-24 01:25:11,648 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN
2023-06-24 01:25:11,648 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIPjIJTenxdmPo0qv77d6m
2023-06-24 01:25:12,054 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN HTTP/1.1" 200 4068
2023-06-24 01:25:12,054 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN response_code=200
2023-06-24 01:25:12,054 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPZIJTenxdmPogWu4xBQw",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559101,\n          "start": 1687559101\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIPjIJTenxdmPo0qv77d6m"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:25:12,054 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_orCQrN1JBciwHD message='Dashboard link for request'
2023-06-24 01:25:12,055 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN
2023-06-24 01:25:12,055 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIPjIJTenxdmPo0qv77d6m
2023-06-24 01:25:12,464 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN HTTP/1.1" 200 4068
2023-06-24 01:25:12,466 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN response_code=200
2023-06-24 01:25:12,466 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPZIJTenxdmPogWu4xBQw",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559101,\n          "start": 1687559101\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIPjIJTenxdmPo0qv77d6m"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:25:12,466 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_pXIkx4pZh8ptri message='Dashboard link for request'
2023-06-24 01:25:12,469 [INFO] 127.0.0.1 - - [24/Jun/2023 01:25:12] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:26:04,228 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 01:26:04,270 [INFO]  * Restarting with stat
2023-06-24 01:26:04,465 [WARNING]  * Debugger is active!
2023-06-24 01:26:04,469 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:26:11,662 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-24 01:26:11,663 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:26:11,681 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:26:12,136 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-24 01:26:12,137 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-24 01:26:12,137 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:26:12,137 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_rBNj7m1DqDXoQj message='Dashboard link for request'
2023-06-24 01:26:12,138 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:26:12,138 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-24 01:26:12,463 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:26:12,465 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:26:12,465 [DEBUG] body='{\n  "id": "pi_3NMIQiIJTenxdmPo1MA10URN",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIQiIJTenxdmPo1MA10URN_secret_5qynVyS79w7ZEhpEJE9NtLz0D",\n  "confirmation_method": "automatic",\n  "created": 1687559172,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:26:12,465 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_IyOON5SMqiaa2Y message='Dashboard link for request'
2023-06-24 01:26:12,466 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN
2023-06-24 01:26:12,466 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIQiIJTenxdmPo1MA10URN
2023-06-24 01:26:12,880 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN HTTP/1.1" 200 4068
2023-06-24 01:26:12,882 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN response_code=200
2023-06-24 01:26:12,882 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPZIJTenxdmPogWu4xBQw",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559101,\n          "start": 1687559101\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIQiIJTenxdmPo1MA10URN"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:26:12,882 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qzE6GpMPsFt5IK message='Dashboard link for request'
2023-06-24 01:26:12,883 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN
2023-06-24 01:26:12,883 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIQiIJTenxdmPo1MA10URN
2023-06-24 01:26:13,290 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN HTTP/1.1" 200 4068
2023-06-24 01:26:13,290 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN response_code=200
2023-06-24 01:26:13,290 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPZIJTenxdmPogWu4xBQw",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559101,\n          "start": 1687559101\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIQiIJTenxdmPo1MA10URN"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:26:13,290 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LRpZeQByJ6B4FV message='Dashboard link for request'
2023-06-24 01:26:13,291 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN
2023-06-24 01:26:13,291 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:26:13,700 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN HTTP/1.1" 200 4068
2023-06-24 01:26:13,701 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN response_code=200
2023-06-24 01:26:13,701 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPZIJTenxdmPogWu4xBQw",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559101,\n          "start": 1687559101\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIQiIJTenxdmPo1MA10URN"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:26:13,701 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_6U5772HbhwKN7S message='Dashboard link for request'
2023-06-24 01:26:13,703 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/pay
2023-06-24 01:26:13,703 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:26:15,543 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/pay HTTP/1.1" 200 4452
2023-06-24 01:26:15,545 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/pay response_code=200
2023-06-24 01:26:15,545 [DEBUG] body='{\n  "id": "in_1NMIPZIJTenxdmPokdmPF6RN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 1000,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 1,\n  "attempted": true,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": "ch_3NMIQkIJTenxdmPo18EAUYk1",\n  "collection_method": "send_invoice",\n  "created": 1687559101,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423101,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POFpZYWVnZnlvRGpZUDlYT25CY1poTlpNdGRTdTNTLDc4MDk5OTc10200eHmL5ix7?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POFpZYWVnZnlvRGpZUDlYT25CY1poTlpNdGRTdTNTLDc4MDk5OTc10200eHmL5ix7/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIPZIJTenxdmPogWu4xBQw",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIPZIJTenxdmPoNuAelYYp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559101,\n          "start": 1687559101\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIPZIJTenxdmPokdmPF6RN/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIQiIJTenxdmPo1MA10URN"\n  },\n  "next_payment_attempt": null,\n  "number": "FF241CBB-0003",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": false,\n  "payment_intent": "pi_3NMIQkIJTenxdmPo18BGNUcC",\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559101,\n  "period_start": 1687559101,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687559174,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687559174,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559101\n}' message='API response body'
2023-06-24 01:26:15,545 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_nkdVKIxLgl4J5p message='Dashboard link for request'
2023-06-24 01:26:15,548 [INFO] 127.0.0.1 - - [24/Jun/2023 01:26:15] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:27:58,477 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_customer_adapter.py', reloading
2023-06-24 01:27:58,511 [INFO]  * Restarting with stat
2023-06-24 01:27:58,693 [WARNING]  * Debugger is active!
2023-06-24 01:27:58,697 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:28:36,447 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_customer.py', reloading
2023-06-24 01:28:36,489 [INFO]  * Restarting with stat
2023-06-24 01:28:36,683 [WARNING]  * Debugger is active!
2023-06-24 01:28:36,687 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:28:57,936 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_customer.py', reloading
2023-06-24 01:28:57,992 [INFO]  * Restarting with stat
2023-06-24 01:28:58,189 [WARNING]  * Debugger is active!
2023-06-24 01:28:58,194 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:30:29,525 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:30:29,526 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZcHLL0Q3IWxV&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:30:29,540 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:30:30,105 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2419
2023-06-24 01:30:30,106 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:30:30,106 [DEBUG] body='{\n  "id": "in_1NMIUsIJTenxdmPo59eBfWz2",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559430,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423430,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559430,\n  "period_start": 1687559430,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559430\n}' message='API response body'
2023-06-24 01:30:30,107 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_g1KFbqNotX1qeX message='Dashboard link for request'
2023-06-24 01:30:30,111 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:30:30,111 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZcHLL0Q3IWxV&invoice=in_1NMIUsIJTenxdmPo59eBfWz2&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:30:30,518 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:30:30,519 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:30:30,519 [DEBUG] body='{\n  "id": "ii_1NMIUsIJTenxdmPoBDoMfzCp",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "date": 1687559430,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIUsIJTenxdmPo59eBfWz2",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687559430,\n    "start": 1687559430\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:30:30,519 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_DgjnjIm6kv3URy message='Dashboard link for request'
2023-06-24 01:30:31,276 [INFO] 127.0.0.1 - - [24/Jun/2023 01:30:31] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:31:11,753 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV
2023-06-24 01:31:11,753 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:31:11,759 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:31:12,184 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZcHLL0Q3IWxV HTTP/1.1" 200 742
2023-06-24 01:31:12,185 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV response_code=200
2023-06-24 01:31:12,185 [DEBUG] body='{\n  "id": "cus_O8ZcHLL0Q3IWxV",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687559347,\n  "currency": "usd",\n  "default_source": "src_1NMIUtIJTenxdmPoZ5JGp6dy",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "support1234@fivicom.com",\n  "invoice_prefix": "98FF0279",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIUcIJTenxdmPotuEvTqCu",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:31:12,185 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_dKw9wyeUc2nY4n message='Dashboard link for request'
2023-06-24 01:31:12,185 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:31:12,185 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZcHLL0Q3IWxV
2023-06-24 01:31:12,602 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:31:12,603 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:31:12,604 [DEBUG] body='{\n  "id": "pi_3NMIVYIJTenxdmPo0iAAk1e8",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIVYIJTenxdmPo0iAAk1e8_secret_LAhF6YqaLYiBkIhV4W13Tgilu",\n  "confirmation_method": "automatic",\n  "created": 1687559472,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:31:12,604 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_byrC0M0aSXbSdr message='Dashboard link for request'
2023-06-24 01:31:12,605 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2
2023-06-24 01:31:12,605 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIVYIJTenxdmPo0iAAk1e8
2023-06-24 01:31:13,003 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2 HTTP/1.1" 200 4074
2023-06-24 01:31:13,003 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2 response_code=200
2023-06-24 01:31:13,003 [DEBUG] body='{\n  "id": "in_1NMIUsIJTenxdmPo59eBfWz2",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559430,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423430,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIUsIJTenxdmPomZaNfiKD",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIUsIJTenxdmPoBDoMfzCp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559430,\n          "start": 1687559430\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIVYIJTenxdmPo0iAAk1e8"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559430,\n  "period_start": 1687559430,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559430\n}' message='API response body'
2023-06-24 01:31:13,003 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_EA2mikHpW5O65P message='Dashboard link for request'
2023-06-24 01:31:13,004 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2
2023-06-24 01:31:13,004 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIVYIJTenxdmPo0iAAk1e8
2023-06-24 01:31:13,356 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2 HTTP/1.1" 200 4074
2023-06-24 01:31:13,356 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2 response_code=200
2023-06-24 01:31:13,357 [DEBUG] body='{\n  "id": "in_1NMIUsIJTenxdmPo59eBfWz2",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559430,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423430,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIUsIJTenxdmPomZaNfiKD",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIUsIJTenxdmPoBDoMfzCp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559430,\n          "start": 1687559430\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIVYIJTenxdmPo0iAAk1e8"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559430,\n  "period_start": 1687559430,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559430\n}' message='API response body'
2023-06-24 01:31:13,357 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_AaZZIE4RYIm3RA message='Dashboard link for request'
2023-06-24 01:31:13,357 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2
2023-06-24 01:31:13,357 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:31:13,729 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2 HTTP/1.1" 200 4074
2023-06-24 01:31:13,729 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2 response_code=200
2023-06-24 01:31:13,730 [DEBUG] body='{\n  "id": "in_1NMIUsIJTenxdmPo59eBfWz2",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559430,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423430,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIUsIJTenxdmPomZaNfiKD",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIUsIJTenxdmPoBDoMfzCp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559430,\n          "start": 1687559430\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIVYIJTenxdmPo0iAAk1e8"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559430,\n  "period_start": 1687559430,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559430\n}' message='API response body'
2023-06-24 01:31:13,730 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Hn0k0xgmRavaWn message='Dashboard link for request'
2023-06-24 01:31:13,730 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/pay
2023-06-24 01:31:13,733 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:31:15,471 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/pay HTTP/1.1" 200 4458
2023-06-24 01:31:15,473 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/pay response_code=200
2023-06-24 01:31:15,473 [DEBUG] body='{\n  "id": "in_1NMIUsIJTenxdmPo59eBfWz2",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 1000,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 1,\n  "attempted": true,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": "ch_3NMIVaIJTenxdmPo0WMtPrIP",\n  "collection_method": "send_invoice",\n  "created": 1687559430,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423430,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POFplcm5Wa29pVmNVVU9oaUsxWUFyMmtLcjJkbWQyLDc4MTAwMjc10200ZGpFTbry?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POFplcm5Wa29pVmNVVU9oaUsxWUFyMmtLcjJkbWQyLDc4MTAwMjc10200ZGpFTbry/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIUsIJTenxdmPomZaNfiKD",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIUsIJTenxdmPoBDoMfzCp",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559430,\n          "start": 1687559430\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIUsIJTenxdmPo59eBfWz2/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIVYIJTenxdmPo0iAAk1e8"\n  },\n  "next_payment_attempt": null,\n  "number": "98FF0279-0001",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": false,\n  "payment_intent": "pi_3NMIVaIJTenxdmPo06hS5aG7",\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559430,\n  "period_start": 1687559430,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687559474,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687559474,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559430\n}' message='API response body'
2023-06-24 01:31:15,473 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_QCw39lQfhUgJ5l message='Dashboard link for request'
2023-06-24 01:31:15,475 [INFO] 127.0.0.1 - - [24/Jun/2023 01:31:15] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:34:09,234 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 01:34:09,273 [INFO]  * Restarting with stat
2023-06-24 01:34:09,466 [WARNING]  * Debugger is active!
2023-06-24 01:34:09,470 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:34:20,401 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:34:20,401 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZcHLL0Q3IWxV&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:34:20,416 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:34:20,960 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2419
2023-06-24 01:34:20,962 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:34:20,962 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:34:20,963 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_amA9kHoAd0Rh4v message='Dashboard link for request'
2023-06-24 01:34:20,965 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:34:20,965 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZcHLL0Q3IWxV&invoice=in_1NMIYaIJTenxdmPop2hkjA7v&price=price_1NMDEDIJTenxdmPoiEJzYAhq&quantity=1
2023-06-24 01:34:21,353 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1191
2023-06-24 01:34:21,354 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:34:21,354 [DEBUG] body='{\n  "id": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n  "object": "invoiceitem",\n  "amount": 1000,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "date": 1687559661,\n  "description": "Professional",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687559661,\n    "start": 1687559661\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687539177,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Monthly subscription",\n      "label": "Monthly Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8UCiYKmf7mpkH",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 1000,\n    "unit_amount_decimal": "1000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 1000,\n  "unit_amount_decimal": "1000"\n}' message='API response body'
2023-06-24 01:34:21,354 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_yvMa6z95ei9COf message='Dashboard link for request'
2023-06-24 01:34:22,103 [INFO] 127.0.0.1 - - [24/Jun/2023 01:34:22] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:34:30,421 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV
2023-06-24 01:34:30,421 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:34:30,422 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:34:30,842 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZcHLL0Q3IWxV HTTP/1.1" 200 742
2023-06-24 01:34:30,842 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV response_code=200
2023-06-24 01:34:30,843 [DEBUG] body='{\n  "id": "cus_O8ZcHLL0Q3IWxV",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687559347,\n  "currency": "usd",\n  "default_source": "src_1NMIUtIJTenxdmPoZ5JGp6dy",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "support1234@fivicom.com",\n  "invoice_prefix": "98FF0279",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIUcIJTenxdmPotuEvTqCu",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 2,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:34:30,843 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_i4aHenNYqlNR17 message='Dashboard link for request'
2023-06-24 01:34:30,843 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:34:30,843 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZcHLL0Q3IWxV
2023-06-24 01:34:31,190 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:34:31,192 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:34:31,192 [DEBUG] body='{\n  "id": "pi_3NMIYlIJTenxdmPo0PjQ0Y5L",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIYlIJTenxdmPo0PjQ0Y5L_secret_EgJmKPD6dQe2nML5ViT61ifHQ",\n  "confirmation_method": "automatic",\n  "created": 1687559671,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:34:31,193 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_EJ3Vqosg1lhU2u message='Dashboard link for request'
2023-06-24 01:34:31,194 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:34:31,194 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIYlIJTenxdmPo0PjQ0Y5L
2023-06-24 01:34:31,594 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:34:31,595 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:34:31,596 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIYlIJTenxdmPo0PjQ0Y5L"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:34:31,596 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_IgUtrSOaVKlwSo message='Dashboard link for request'
2023-06-24 01:34:31,597 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:34:31,597 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIYlIJTenxdmPo0PjQ0Y5L
2023-06-24 01:34:31,948 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:34:31,950 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:34:31,950 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIYlIJTenxdmPo0PjQ0Y5L"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:34:31,950 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_JfJpM0iKkrqiLm message='Dashboard link for request'
2023-06-24 01:34:31,952 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:34:31,952 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:34:32,263 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:34:32,265 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:34:32,265 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIYlIJTenxdmPo0PjQ0Y5L"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:34:32,265 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_WlnAYZ4SRUsCdK message='Dashboard link for request'
2023-06-24 01:34:32,266 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:34:32,267 [DEBUG] api_version=None message='Post details' post_data=payment_intent=pi_3NMIYlIJTenxdmPo0PjQ0Y5L
2023-06-24 01:34:32,540 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 400 383
2023-06-24 01:34:32,541 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=400
2023-06-24 01:34:32,541 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: payment_intent. Did you mean payment_settings?",\n    "param": "payment_intent",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_lcCtm3w0z0acxf?t=1687559672",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:34:32,541 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_lcCtm3w0z0acxf message='Dashboard link for request'
2023-06-24 01:34:32,541 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: payment_intent. Did you mean payment_settings?' error_param=payment_intent error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:34:32,551 [INFO] 127.0.0.1 - - [24/Jun/2023 01:34:32] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:35:18,504 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 01:35:18,937 [INFO]  * Restarting with stat
2023-06-24 01:35:19,133 [WARNING]  * Debugger is active!
2023-06-24 01:35:19,138 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:35:34,173 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 01:35:34,213 [INFO]  * Restarting with stat
2023-06-24 01:35:34,405 [WARNING]  * Debugger is active!
2023-06-24 01:35:34,409 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:35:38,003 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV
2023-06-24 01:35:38,003 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:35:38,022 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:35:38,443 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZcHLL0Q3IWxV HTTP/1.1" 200 742
2023-06-24 01:35:38,444 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV response_code=200
2023-06-24 01:35:38,445 [DEBUG] body='{\n  "id": "cus_O8ZcHLL0Q3IWxV",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687559347,\n  "currency": "usd",\n  "default_source": "src_1NMIUtIJTenxdmPoZ5JGp6dy",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "support1234@fivicom.com",\n  "invoice_prefix": "98FF0279",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIUcIJTenxdmPotuEvTqCu",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 2,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:35:38,445 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_L5dC0i4S3i7jdB message='Dashboard link for request'
2023-06-24 01:35:38,447 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:35:38,447 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZcHLL0Q3IWxV
2023-06-24 01:35:38,871 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:35:38,872 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:35:38,872 [DEBUG] body='{\n  "id": "pi_3NMIZqIJTenxdmPo1ypmmM7P",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIZqIJTenxdmPo1ypmmM7P_secret_bOgjC6gw9cZtBV6vzm3dKYH2t",\n  "confirmation_method": "automatic",\n  "created": 1687559738,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:35:38,872 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_eka1FwraxneT8N message='Dashboard link for request'
2023-06-24 01:35:38,872 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:35:38,872 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIZqIJTenxdmPo1ypmmM7P
2023-06-24 01:35:39,235 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:35:39,237 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:35:39,237 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIZqIJTenxdmPo1ypmmM7P"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:35:39,237 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_W2DgeEz5WAZmtp message='Dashboard link for request'
2023-06-24 01:35:39,239 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:35:39,239 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIZqIJTenxdmPo1ypmmM7P
2023-06-24 01:35:39,691 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:35:39,693 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:35:39,693 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIZqIJTenxdmPo1ypmmM7P"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:35:39,693 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_946FSAlyr09Acz message='Dashboard link for request'
2023-06-24 01:35:39,695 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:35:39,695 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:35:40,101 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:35:40,102 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:35:40,102 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIZqIJTenxdmPo1ypmmM7P"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:35:40,102 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LvUo656jIlwiNf message='Dashboard link for request'
2023-06-24 01:35:40,104 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:35:40,104 [DEBUG] api_version=None message='Post details' post_data=payment_settings[payment_method_options][required_payment_method_types][0]=card&payment_settings[payment_intent]=pi_3NMIZqIJTenxdmPo1ypmmM7P&payment_settings[payment_method_types]=&payment_settings[default_mandate]=
2023-06-24 01:35:40,382 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 400 425
2023-06-24 01:35:40,382 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=400
2023-06-24 01:35:40,382 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: payment_settings[payment_intent]. Did you mean payment_method_options?",\n    "param": "payment_settings[payment_intent]",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_kTJZdJK4hqZ3ZY?t=1687559740",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:35:40,383 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_kTJZdJK4hqZ3ZY message='Dashboard link for request'
2023-06-24 01:35:40,383 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: payment_settings[payment_intent]. Did you mean payment_method_options?' error_param=payment_settings[payment_intent] error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:35:40,395 [INFO] 127.0.0.1 - - [24/Jun/2023 01:35:40] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 01:38:24,171 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 01:38:24,519 [INFO]  * Restarting with stat
2023-06-24 01:38:24,701 [WARNING]  * Debugger is active!
2023-06-24 01:38:24,705 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:39:09,408 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 01:39:09,445 [INFO]  * Restarting with stat
2023-06-24 01:39:09,635 [WARNING]  * Debugger is active!
2023-06-24 01:39:09,639 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:39:14,990 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-24 01:39:15,034 [INFO]  * Restarting with stat
2023-06-24 01:39:15,231 [WARNING]  * Debugger is active!
2023-06-24 01:39:15,235 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:39:40,899 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 01:39:40,937 [INFO]  * Restarting with stat
2023-06-24 01:39:41,124 [WARNING]  * Debugger is active!
2023-06-24 01:39:41,128 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:39:42,255 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 01:39:42,295 [INFO]  * Restarting with stat
2023-06-24 01:39:42,475 [WARNING]  * Debugger is active!
2023-06-24 01:39:42,478 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:42:49,432 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 01:42:49,475 [INFO]  * Restarting with stat
2023-06-24 01:42:49,654 [WARNING]  * Debugger is active!
2023-06-24 01:42:49,659 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:42:53,984 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-24 01:42:54,020 [INFO]  * Restarting with stat
2023-06-24 01:42:54,201 [WARNING]  * Debugger is active!
2023-06-24 01:42:54,205 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:44:06,732 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 01:44:06,766 [INFO]  * Restarting with stat
2023-06-24 01:44:06,954 [WARNING]  * Debugger is active!
2023-06-24 01:44:06,958 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:44:13,970 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV
2023-06-24 01:44:13,970 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:44:13,986 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:44:14,414 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZcHLL0Q3IWxV HTTP/1.1" 200 742
2023-06-24 01:44:14,415 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZcHLL0Q3IWxV response_code=200
2023-06-24 01:44:14,415 [DEBUG] body='{\n  "id": "cus_O8ZcHLL0Q3IWxV",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687559347,\n  "currency": "usd",\n  "default_source": "src_1NMIUtIJTenxdmPoZ5JGp6dy",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "support1234@fivicom.com",\n  "invoice_prefix": "98FF0279",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIUcIJTenxdmPotuEvTqCu",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 2,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:44:14,415 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ZpAXETI74t0ifS message='Dashboard link for request'
2023-06-24 01:44:14,417 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:44:14,417 [DEBUG] api_version=None message='Post details' post_data=amount=1000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZcHLL0Q3IWxV
2023-06-24 01:44:14,757 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1292
2023-06-24 01:44:14,757 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:44:14,757 [DEBUG] body='{\n  "id": "pi_3NMIiAIJTenxdmPo00UoDH0H",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIiAIJTenxdmPo00UoDH0H_secret_eLWqnj7t9tyYGSbOTh2wgdlpz",\n  "confirmation_method": "automatic",\n  "created": 1687560254,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:44:14,757 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qiPnwYCONC9WY0 message='Dashboard link for request'
2023-06-24 01:44:14,757 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:44:14,757 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIiAIJTenxdmPo00UoDH0H
2023-06-24 01:44:15,172 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:44:15,174 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:44:15,174 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIiAIJTenxdmPo00UoDH0H"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:44:15,174 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Un6OzJmLAz4GiA message='Dashboard link for request'
2023-06-24 01:44:15,176 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:44:15,176 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIiAIJTenxdmPo00UoDH0H
2023-06-24 01:44:15,581 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:44:15,581 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:44:15,581 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIiAIJTenxdmPo00UoDH0H"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:44:15,581 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_HpjEDHWswlBfK1 message='Dashboard link for request'
2023-06-24 01:44:15,581 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v
2023-06-24 01:44:15,581 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:44:15,993 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v HTTP/1.1" 200 4074
2023-06-24 01:44:15,994 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v response_code=200
2023-06-24 01:44:15,995 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 0,\n  "amount_remaining": 1000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIiAIJTenxdmPo00UoDH0H"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:44:15,995 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_2U51Eyotq3eHGF message='Dashboard link for request'
2023-06-24 01:44:15,996 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/pay
2023-06-24 01:44:15,997 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:44:17,628 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/pay HTTP/1.1" 200 4458
2023-06-24 01:44:17,630 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/pay response_code=200
2023-06-24 01:44:17,630 [DEBUG] body='{\n  "id": "in_1NMIYaIJTenxdmPop2hkjA7v",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 1000,\n  "amount_paid": 1000,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 1,\n  "attempted": true,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": "ch_3NMIiCIJTenxdmPo0UErsW4o",\n  "collection_method": "send_invoice",\n  "created": 1687559660,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "customer_address": null,\n  "customer_email": "support1234@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688423660,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POFppTFBEN2x5Nk1oSkhzUVgxcFpkbFNwQWFCOWMzLDc4MTAxMDU30200kXIfhO9I?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POFppTFBEN2x5Nk1oSkhzUVgxcFpkbFNwQWFCOWMzLDc4MTAxMDU30200kXIfhO9I/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIYbIJTenxdmPoaNEMq8zQ",\n        "object": "line_item",\n        "amount": 1000,\n        "amount_excluding_tax": 1000,\n        "currency": "usd",\n        "description": "Professional",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIYbIJTenxdmPo55oKYZnq",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687559661,\n          "start": 1687559661\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMDEDIJTenxdmPoiEJzYAhq",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687539177,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Monthly subscription",\n            "label": "Monthly Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8UCiYKmf7mpkH",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 1000,\n          "unit_amount_decimal": "1000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "1000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIYaIJTenxdmPop2hkjA7v/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIiAIJTenxdmPo00UoDH0H"\n  },\n  "next_payment_attempt": null,\n  "number": "98FF0279-0002",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": false,\n  "payment_intent": "pi_3NMIiCIJTenxdmPo0i0LHe7p",\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687559660,\n  "period_start": 1687559660,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687560256,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687560256,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 1000,\n  "subtotal_excluding_tax": 1000,\n  "tax": null,\n  "test_clock": null,\n  "total": 1000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 1000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687559660\n}' message='API response body'
2023-06-24 01:44:17,630 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_12cO0XJFJD2jmJ message='Dashboard link for request'
2023-06-24 01:44:17,631 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIiAIJTenxdmPo00UoDH0H
2023-06-24 01:44:17,631 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:44:18,038 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIiAIJTenxdmPo00UoDH0H HTTP/1.1" 200 1292
2023-06-24 01:44:18,038 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIiAIJTenxdmPo00UoDH0H response_code=200
2023-06-24 01:44:18,038 [DEBUG] body='{\n  "id": "pi_3NMIiAIJTenxdmPo00UoDH0H",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIiAIJTenxdmPo00UoDH0H_secret_eLWqnj7t9tyYGSbOTh2wgdlpz",\n  "confirmation_method": "automatic",\n  "created": 1687560254,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:44:18,038 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_kTcUKOjtj6Ck7r message='Dashboard link for request'
2023-06-24 01:44:18,038 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIiAIJTenxdmPo00UoDH0H/confirm
2023-06-24 01:44:18,038 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIUcIJTenxdmPotuEvTqCu
2023-06-24 01:44:19,269 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIiAIJTenxdmPo00UoDH0H/confirm HTTP/1.1" 200 1331
2023-06-24 01:44:19,270 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIiAIJTenxdmPo00UoDH0H/confirm response_code=200
2023-06-24 01:44:19,270 [DEBUG] body='{\n  "id": "pi_3NMIiAIJTenxdmPo00UoDH0H",\n  "object": "payment_intent",\n  "amount": 1000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 1000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIiAIJTenxdmPo00UoDH0H_secret_eLWqnj7t9tyYGSbOTh2wgdlpz",\n  "confirmation_method": "automatic",\n  "created": 1687560254,\n  "currency": "usd",\n  "customer": "cus_O8ZcHLL0Q3IWxV",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMIiAIJTenxdmPo0W0xl9vd",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIUcIJTenxdmPotuEvTqCu",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:44:19,270 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_jBVmiVP4UdI3tB message='Dashboard link for request'
2023-06-24 01:44:19,274 [INFO] 127.0.0.1 - - [24/Jun/2023 01:44:19] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:47:27,739 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-24 01:47:27,739 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Annual+interval&metadata[credits]=500&metadata[seats]=3
2023-06-24 01:47:27,755 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:47:28,232 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 499
2023-06-24 01:47:28,233 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-24 01:47:28,233 [DEBUG] body='{\n  "id": "prod_O8ZvaUoiZT9SBo",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687560448,\n  "default_price": null,\n  "description": "Premium plan - Annual interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "500",\n    "seats": "3"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687560448,\n  "url": null\n}' message='API response body'
2023-06-24 01:47:28,233 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_OHeHKV2yCIfXhD message='Dashboard link for request'
2023-06-24 01:47:28,234 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-24 01:47:28,234 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8ZvaUoiZT9SBo&unit_amount=15000&currency=usd&recurring[interval]=year&recurring[usage_type]=licensed&metadata[label]=Annual+Plan&metadata[description]=Annual+subscription
2023-06-24 01:47:28,538 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 200 706
2023-06-24 01:47:28,539 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2023-06-24 01:47:28,539 [DEBUG] body='{\n  "id": "price_1NMIlIIJTenxdmPoQn1u6RyY",\n  "object": "price",\n  "active": true,\n  "billing_scheme": "per_unit",\n  "created": 1687560448,\n  "currency": "usd",\n  "custom_unit_amount": null,\n  "livemode": false,\n  "lookup_key": null,\n  "metadata": {\n    "description": "Annual subscription",\n    "label": "Annual Plan"\n  },\n  "nickname": null,\n  "product": "prod_O8ZvaUoiZT9SBo",\n  "recurring": {\n    "aggregate_usage": null,\n    "interval": "year",\n    "interval_count": 1,\n    "trial_period_days": null,\n    "usage_type": "licensed"\n  },\n  "tax_behavior": "unspecified",\n  "tiers_mode": null,\n  "transform_quantity": null,\n  "type": "recurring",\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 01:47:28,539 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_tnPzZxM9o26ngh message='Dashboard link for request'
2023-06-24 01:47:29,282 [INFO] 127.0.0.1 - - [24/Jun/2023 01:47:29] "[35m[1mPOST /product/create HTTP/1.1[0m" 201 -
2023-06-24 01:48:10,013 [INFO] 127.0.0.1 - - [24/Jun/2023 01:48:10] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-24 01:49:04,581 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 01:49:05,014 [INFO]  * Restarting with stat
2023-06-24 01:49:05,189 [WARNING]  * Debugger is active!
2023-06-24 01:49:05,199 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:49:09,927 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:49:09,927 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:49:09,950 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:49:10,586 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:49:10,588 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:49:10,588 [DEBUG] body='{\n  "id": "in_1NMImwIJTenxdmPoMojHmZus",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687560550,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688424550,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMImwIJTenxdmPoMojHmZus/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687560550,\n  "period_start": 1687560550,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687560550\n}' message='API response body'
2023-06-24 01:49:10,588 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_bwr43WtwUCaRWi message='Dashboard link for request'
2023-06-24 01:49:10,591 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:49:10,591 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMImwIJTenxdmPoMojHmZus&price=price_1NMIlIIJTenxdmPoQn1u6RyY&quantity=1
2023-06-24 01:49:10,880 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 400 298
2023-06-24 01:49:10,880 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=400
2023-06-24 01:49:10,880 [DEBUG] body='{\n  "error": {\n    "message": "The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.",\n    "param": "price",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_pjstOXCqbFIKtv?t=1687560550",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:49:10,880 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_pjstOXCqbFIKtv message='Dashboard link for request'
2023-06-24 01:49:10,880 [INFO] error_code=None error_message='The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.' error_param=price error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:49:10,888 [INFO] 127.0.0.1 - - [24/Jun/2023 01:49:10] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-24 01:50:03,945 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 01:50:04,436 [INFO]  * Restarting with stat
2023-06-24 01:50:04,612 [WARNING]  * Debugger is active!
2023-06-24 01:50:04,617 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:50:13,206 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 01:50:13,247 [INFO]  * Restarting with stat
2023-06-24 01:50:13,440 [WARNING]  * Debugger is active!
2023-06-24 01:50:13,444 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:50:17,358 [INFO] 127.0.0.1 - - [24/Jun/2023 01:50:17] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-24 01:51:09,810 [INFO] 127.0.0.1 - - [24/Jun/2023 01:51:09] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-24 01:51:19,007 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 01:51:19,543 [INFO]  * Restarting with stat
2023-06-24 01:51:19,752 [WARNING]  * Debugger is active!
2023-06-24 01:51:19,758 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:51:26,205 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:51:26,205 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:51:26,276 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:51:26,844 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:51:26,846 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:51:26,847 [DEBUG] body='{\n  "id": "in_1NMIp8IJTenxdmPoMvuHu3EA",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687560686,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688424686,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIp8IJTenxdmPoMvuHu3EA/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687560686,\n  "period_start": 1687560686,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687560686\n}' message='API response body'
2023-06-24 01:51:26,847 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_wluu4pwACzaQBd message='Dashboard link for request'
2023-06-24 01:51:26,849 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:51:26,850 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMIp8IJTenxdmPoMvuHu3EA&price=price_1NMIlIIJTenxdmPoQn1u6RyY&quantity=1
2023-06-24 01:51:27,130 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 400 298
2023-06-24 01:51:27,132 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=400
2023-06-24 01:51:27,132 [DEBUG] body='{\n  "error": {\n    "message": "The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.",\n    "param": "price",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_0hYLhX0rRpzaUq?t=1687560687",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:51:27,132 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_0hYLhX0rRpzaUq message='Dashboard link for request'
2023-06-24 01:51:27,133 [INFO] error_code=None error_message='The price specified is set to `type=recurring` but this field only accepts prices with `type=one_time`.' error_param=price error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:51:27,147 [INFO] 127.0.0.1 - - [24/Jun/2023 01:51:27] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 500 -
2023-06-24 01:53:18,194 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_product_adapter.py', reloading
2023-06-24 01:53:18,691 [INFO]  * Restarting with stat
2023-06-24 01:53:58,634 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-24 01:53:58,634 [INFO] [33mPress CTRL+C to quit[0m
2023-06-24 01:53:58,635 [INFO]  * Restarting with stat
2023-06-24 01:53:58,833 [WARNING]  * Debugger is active!
2023-06-24 01:53:58,837 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:53:59,568 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-24 01:53:59,568 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Annual+interval&metadata[credits]=500&metadata[seats]=3
2023-06-24 01:53:59,584 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:54:00,074 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 499
2023-06-24 01:54:00,074 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-24 01:54:00,074 [DEBUG] body='{\n  "id": "prod_O8a1UVVdbs8JLQ",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687560840,\n  "default_price": null,\n  "description": "Premium plan - Annual interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "500",\n    "seats": "3"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687560840,\n  "url": null\n}' message='API response body'
2023-06-24 01:54:00,074 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_TrLEEdeH019Ky8 message='Dashboard link for request'
2023-06-24 01:54:00,075 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-24 01:54:00,075 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8a1UVVdbs8JLQ&unit_amount=15000&currency=usd&recurring[interval]=year&recurring[usage_type]=licensed&type=one_time&metadata[label]=Annual+Plan&metadata[description]=Annual+subscription
2023-06-24 01:54:00,348 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 400 331
2023-06-24 01:54:00,352 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=400
2023-06-24 01:54:00,353 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: type",\n    "param": "type",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_rZ7DO8vjoFo7TQ?t=1687560840",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:54:00,353 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_rZ7DO8vjoFo7TQ message='Dashboard link for request'
2023-06-24 01:54:00,353 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: type' error_param=type error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:54:00,381 [INFO] 127.0.0.1 - - [24/Jun/2023 01:54:00] "[35m[1mPOST /product/create HTTP/1.1[0m" 500 -
2023-06-24 01:54:35,527 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_product_adapter.py', reloading
2023-06-24 01:54:36,585 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-24 01:54:36,585 [INFO] [33mPress CTRL+C to quit[0m
2023-06-24 01:54:36,586 [INFO]  * Restarting with stat
2023-06-24 01:54:36,765 [WARNING]  * Debugger is active!
2023-06-24 01:54:36,769 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:54:39,705 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-24 01:54:39,705 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Annual+interval&metadata[credits]=500&metadata[seats]=3
2023-06-24 01:54:39,711 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:54:40,212 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 499
2023-06-24 01:54:40,213 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-24 01:54:40,213 [DEBUG] body='{\n  "id": "prod_O8a2RqcgozGwZ8",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687560880,\n  "default_price": null,\n  "description": "Premium plan - Annual interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "500",\n    "seats": "3"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687560880,\n  "url": null\n}' message='API response body'
2023-06-24 01:54:40,213 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Q6CvGQkbOWV58F message='Dashboard link for request'
2023-06-24 01:54:40,214 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-24 01:54:40,214 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8a2RqcgozGwZ8&unit_amount=15000&currency=usd&recurring[interval]=year&recurring[usage_type]=licensed&type=one_time&metadata[label]=Annual+Plan&metadata[description]=Annual+subscription
2023-06-24 01:54:40,476 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 400 331
2023-06-24 01:54:40,477 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=400
2023-06-24 01:54:40,477 [DEBUG] body='{\n  "error": {\n    "code": "parameter_unknown",\n    "doc_url": "https://stripe.com/docs/error-codes/parameter-unknown",\n    "message": "Received unknown parameter: type",\n    "param": "type",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_GnsMb5FLJikzuq?t=1687560880",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:54:40,477 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_GnsMb5FLJikzuq message='Dashboard link for request'
2023-06-24 01:54:40,477 [INFO] error_code=parameter_unknown error_message='Received unknown parameter: type' error_param=type error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:54:40,503 [INFO] 127.0.0.1 - - [24/Jun/2023 01:54:40] "[35m[1mPOST /product/create HTTP/1.1[0m" 500 -
2023-06-24 01:54:44,390 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_product_adapter.py', reloading
2023-06-24 01:54:44,773 [INFO]  * Restarting with stat
2023-06-24 01:54:44,949 [WARNING]  * Debugger is active!
2023-06-24 01:54:44,953 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:54:45,448 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-24 01:54:45,449 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Annual+interval&metadata[credits]=500&metadata[seats]=3
2023-06-24 01:54:45,454 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:54:45,925 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 499
2023-06-24 01:54:45,926 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-24 01:54:45,926 [DEBUG] body='{\n  "id": "prod_O8a2Sfi8t1ZJZO",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687560885,\n  "default_price": null,\n  "description": "Premium plan - Annual interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "500",\n    "seats": "3"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687560885,\n  "url": null\n}' message='API response body'
2023-06-24 01:54:45,926 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_PQnWCdxNhmsZ3D message='Dashboard link for request'
2023-06-24 01:54:45,927 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-24 01:54:45,928 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8a2Sfi8t1ZJZO&unit_amount=15000&currency=usd&recurring[interval]=year&recurring[usage_type]=licensed&metadata[label]=Annual+Plan&metadata[description]=Annual+subscription
2023-06-24 01:54:46,228 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 200 706
2023-06-24 01:54:46,228 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2023-06-24 01:54:46,228 [DEBUG] body='{\n  "id": "price_1NMIsMIJTenxdmPoTHA1Eq0J",\n  "object": "price",\n  "active": true,\n  "billing_scheme": "per_unit",\n  "created": 1687560886,\n  "currency": "usd",\n  "custom_unit_amount": null,\n  "livemode": false,\n  "lookup_key": null,\n  "metadata": {\n    "description": "Annual subscription",\n    "label": "Annual Plan"\n  },\n  "nickname": null,\n  "product": "prod_O8a2Sfi8t1ZJZO",\n  "recurring": {\n    "aggregate_usage": null,\n    "interval": "year",\n    "interval_count": 1,\n    "trial_period_days": null,\n    "usage_type": "licensed"\n  },\n  "tax_behavior": "unspecified",\n  "tiers_mode": null,\n  "transform_quantity": null,\n  "type": "recurring",\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 01:54:46,228 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_PRLjfdXVGwjUth message='Dashboard link for request'
2023-06-24 01:54:46,969 [INFO] 127.0.0.1 - - [24/Jun/2023 01:54:46] "[35m[1mPOST /product/create HTTP/1.1[0m" 201 -
2023-06-24 01:55:24,085 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_product_adapter.py', reloading
2023-06-24 01:55:24,126 [INFO]  * Restarting with stat
2023-06-24 01:55:44,088 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-24 01:55:44,088 [INFO] [33mPress CTRL+C to quit[0m
2023-06-24 01:55:44,089 [INFO]  * Restarting with stat
2023-06-24 01:55:44,280 [WARNING]  * Debugger is active!
2023-06-24 01:55:44,285 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:55:46,020 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-24 01:55:46,020 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Annual+interval&metadata[credits]=500&metadata[seats]=3
2023-06-24 01:55:46,034 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:55:46,507 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 499
2023-06-24 01:55:46,508 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-24 01:55:46,508 [DEBUG] body='{\n  "id": "prod_O8a3IWjMTj5eXf",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687560946,\n  "default_price": null,\n  "description": "Premium plan - Annual interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "500",\n    "seats": "3"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687560946,\n  "url": null\n}' message='API response body'
2023-06-24 01:55:46,508 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3Ms3315fvfn09L message='Dashboard link for request'
2023-06-24 01:55:46,510 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-24 01:55:46,510 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8a3IWjMTj5eXf&unit_amount=15000&currency=usd&recurring=False&metadata[label]=Annual+Plan&metadata[description]=Annual+subscription
2023-06-24 01:55:46,780 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 400 213
2023-06-24 01:55:46,781 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=400
2023-06-24 01:55:46,781 [DEBUG] body='{\n  "error": {\n    "message": "Invalid object",\n    "param": "recurring",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_LO2ZryfI1N0kNn?t=1687560946",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-24 01:55:46,781 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LO2ZryfI1N0kNn message='Dashboard link for request'
2023-06-24 01:55:46,782 [INFO] error_code=None error_message='Invalid object' error_param=recurring error_type=invalid_request_error message='Stripe API error received'
2023-06-24 01:55:46,805 [INFO] 127.0.0.1 - - [24/Jun/2023 01:55:46] "[35m[1mPOST /product/create HTTP/1.1[0m" 500 -
2023-06-24 01:56:00,485 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_product_adapter.py', reloading
2023-06-24 01:56:00,782 [INFO]  * Restarting with stat
2023-06-24 01:56:00,981 [WARNING]  * Debugger is active!
2023-06-24 01:56:00,985 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 01:56:02,881 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/products
2023-06-24 01:56:02,881 [DEBUG] api_version=None message='Post details' post_data=name=Premium&type=service&description=Premium+plan+-+Annual+interval&metadata[credits]=500&metadata[seats]=3
2023-06-24 01:56:02,887 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:56:03,391 [DEBUG] https://api.stripe.com:443 "POST /v1/products HTTP/1.1" 200 499
2023-06-24 01:56:03,391 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/products response_code=200
2023-06-24 01:56:03,392 [DEBUG] body='{\n  "id": "prod_O8a3p03CbfmFd3",\n  "object": "product",\n  "active": true,\n  "attributes": [],\n  "created": 1687560963,\n  "default_price": null,\n  "description": "Premium plan - Annual interval",\n  "images": [],\n  "livemode": false,\n  "metadata": {\n    "credits": "500",\n    "seats": "3"\n  },\n  "name": "Premium",\n  "package_dimensions": null,\n  "shippable": null,\n  "statement_descriptor": null,\n  "tax_code": null,\n  "type": "service",\n  "unit_label": null,\n  "updated": 1687560963,\n  "url": null\n}' message='API response body'
2023-06-24 01:56:03,392 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_vdMWSSJETOzBlz message='Dashboard link for request'
2023-06-24 01:56:03,393 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/prices
2023-06-24 01:56:03,393 [DEBUG] api_version=None message='Post details' post_data=product=prod_O8a3p03CbfmFd3&unit_amount=15000&currency=usd&metadata[label]=Annual+Plan&metadata[description]=Annual+subscription
2023-06-24 01:56:03,714 [DEBUG] https://api.stripe.com:443 "POST /v1/prices HTTP/1.1" 200 566
2023-06-24 01:56:03,716 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/prices response_code=200
2023-06-24 01:56:03,716 [DEBUG] body='{\n  "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n  "object": "price",\n  "active": true,\n  "billing_scheme": "per_unit",\n  "created": 1687560963,\n  "currency": "usd",\n  "custom_unit_amount": null,\n  "livemode": false,\n  "lookup_key": null,\n  "metadata": {\n    "description": "Annual subscription",\n    "label": "Annual Plan"\n  },\n  "nickname": null,\n  "product": "prod_O8a3p03CbfmFd3",\n  "recurring": null,\n  "tax_behavior": "unspecified",\n  "tiers_mode": null,\n  "transform_quantity": null,\n  "type": "one_time",\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 01:56:03,716 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NLkA8jttymivxa message='Dashboard link for request'
2023-06-24 01:56:04,452 [INFO] 127.0.0.1 - - [24/Jun/2023 01:56:04] "[35m[1mPOST /product/create HTTP/1.1[0m" 201 -
2023-06-24 01:56:40,686 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:56:40,686 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:56:40,692 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:56:41,345 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:56:41,347 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:56:41,347 [DEBUG] body='{\n  "id": "in_1NMIuDIJTenxdmPoC4xd3eAe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561001,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425001,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561001,\n  "period_start": 1687561001,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561001\n}' message='API response body'
2023-06-24 01:56:41,347 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_JKubXkzpf8109I message='Dashboard link for request'
2023-06-24 01:56:41,349 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:56:41,349 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMIuDIJTenxdmPoC4xd3eAe&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 01:56:41,736 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 01:56:41,737 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:56:41,737 [DEBUG] body='{\n  "id": "ii_1NMIuDIJTenxdmPoiHwBOUWo",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687561001,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIuDIJTenxdmPoC4xd3eAe",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687561001,\n    "start": 1687561001\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 01:56:41,737 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_IvjD3yioBotjzH message='Dashboard link for request'
2023-06-24 01:56:42,487 [INFO] 127.0.0.1 - - [24/Jun/2023 01:56:42] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:57:02,395 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 01:57:02,395 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:57:02,398 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:57:02,828 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 01:57:02,829 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 01:57:02,829 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 1,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:57:02,829 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_mzXT7nmBOroKEZ message='Dashboard link for request'
2023-06-24 01:57:02,830 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:57:02,831 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 01:57:03,189 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 01:57:03,190 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:57:03,190 [DEBUG] body='{\n  "id": "pi_3NMIuZIJTenxdmPo1c1rhSDT",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIuZIJTenxdmPo1c1rhSDT_secret_kFpQhJTr3TDHXfUXJu6V9H5Js",\n  "confirmation_method": "automatic",\n  "created": 1687561023,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:57:03,190 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Zy2O1xbXKMmeLs message='Dashboard link for request'
2023-06-24 01:57:03,191 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe
2023-06-24 01:57:03,191 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIuZIJTenxdmPo1c1rhSDT
2023-06-24 01:57:03,565 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe HTTP/1.1" 200 4072
2023-06-24 01:57:03,567 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe response_code=200
2023-06-24 01:57:03,568 [DEBUG] body='{\n  "id": "in_1NMIuDIJTenxdmPoC4xd3eAe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561001,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425001,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIuDIJTenxdmPoLad1r01e",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIuDIJTenxdmPoiHwBOUWo",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561001,\n          "start": 1687561001\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIuZIJTenxdmPo1c1rhSDT"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561001,\n  "period_start": 1687561001,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561001\n}' message='API response body'
2023-06-24 01:57:03,568 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_gTCqdXJhrFYaRb message='Dashboard link for request'
2023-06-24 01:57:03,569 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe
2023-06-24 01:57:03,569 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIuZIJTenxdmPo1c1rhSDT
2023-06-24 01:57:03,975 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe HTTP/1.1" 200 4072
2023-06-24 01:57:03,976 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe response_code=200
2023-06-24 01:57:03,977 [DEBUG] body='{\n  "id": "in_1NMIuDIJTenxdmPoC4xd3eAe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561001,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425001,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIuDIJTenxdmPoLad1r01e",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIuDIJTenxdmPoiHwBOUWo",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561001,\n          "start": 1687561001\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIuZIJTenxdmPo1c1rhSDT"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561001,\n  "period_start": 1687561001,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561001\n}' message='API response body'
2023-06-24 01:57:03,977 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_r6WKG4T3ngqMSW message='Dashboard link for request'
2023-06-24 01:57:03,978 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe
2023-06-24 01:57:03,978 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:57:04,384 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe HTTP/1.1" 200 4072
2023-06-24 01:57:04,385 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe response_code=200
2023-06-24 01:57:04,385 [DEBUG] body='{\n  "id": "in_1NMIuDIJTenxdmPoC4xd3eAe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561001,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425001,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIuDIJTenxdmPoLad1r01e",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIuDIJTenxdmPoiHwBOUWo",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561001,\n          "start": 1687561001\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIuZIJTenxdmPo1c1rhSDT"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561001,\n  "period_start": 1687561001,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561001\n}' message='API response body'
2023-06-24 01:57:04,385 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_PNqScYGtD01TBN message='Dashboard link for request'
2023-06-24 01:57:04,386 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/pay
2023-06-24 01:57:04,386 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:57:06,024 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/pay HTTP/1.1" 200 4456
2023-06-24 01:57:06,026 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/pay response_code=200
2023-06-24 01:57:06,026 [DEBUG] body='{\n  "id": "in_1NMIuDIJTenxdmPoC4xd3eAe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 15000,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 1,\n  "attempted": true,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": "ch_3NMIuaIJTenxdmPo1gkTObxE",\n  "collection_method": "send_invoice",\n  "created": 1687561001,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425001,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGE0bjhtUjFtUjl0U1pwNkd2OWo0cmUxSXE0d0l5LDc4MTAxODI20200SEsGthhJ?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGE0bjhtUjFtUjl0U1pwNkd2OWo0cmUxSXE0d0l5LDc4MTAxODI20200SEsGthhJ/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIuDIJTenxdmPoLad1r01e",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIuDIJTenxdmPoiHwBOUWo",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561001,\n          "start": 1687561001\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIuDIJTenxdmPoC4xd3eAe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIuZIJTenxdmPo1c1rhSDT"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0001",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": false,\n  "payment_intent": "pi_3NMIuaIJTenxdmPo1V5E63Ip",\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561001,\n  "period_start": 1687561001,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687561024,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687561024,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561001\n}' message='API response body'
2023-06-24 01:57:06,027 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_xCTg8G14x1W9zL message='Dashboard link for request'
2023-06-24 01:57:06,028 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIuZIJTenxdmPo1c1rhSDT
2023-06-24 01:57:06,028 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:57:06,433 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIuZIJTenxdmPo1c1rhSDT HTTP/1.1" 200 1293
2023-06-24 01:57:06,434 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIuZIJTenxdmPo1c1rhSDT response_code=200
2023-06-24 01:57:06,434 [DEBUG] body='{\n  "id": "pi_3NMIuZIJTenxdmPo1c1rhSDT",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIuZIJTenxdmPo1c1rhSDT_secret_kFpQhJTr3TDHXfUXJu6V9H5Js",\n  "confirmation_method": "automatic",\n  "created": 1687561023,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:57:06,434 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_J6atfMHsMqwFbZ message='Dashboard link for request'
2023-06-24 01:57:06,435 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIuZIJTenxdmPo1c1rhSDT/confirm
2023-06-24 01:57:06,435 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 01:57:07,661 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIuZIJTenxdmPo1c1rhSDT/confirm HTTP/1.1" 200 1333
2023-06-24 01:57:07,661 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIuZIJTenxdmPo1c1rhSDT/confirm response_code=200
2023-06-24 01:57:07,661 [DEBUG] body='{\n  "id": "pi_3NMIuZIJTenxdmPo1c1rhSDT",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIuZIJTenxdmPo1c1rhSDT_secret_kFpQhJTr3TDHXfUXJu6V9H5Js",\n  "confirmation_method": "automatic",\n  "created": 1687561023,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMIuZIJTenxdmPo1CqJKXBK",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:57:07,661 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ciVdOdY5CjDIIL message='Dashboard link for request'
2023-06-24 01:57:07,662 [INFO] 127.0.0.1 - - [24/Jun/2023 01:57:07] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 01:58:03,479 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 01:58:03,479 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 01:58:03,486 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:58:04,029 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 01:58:04,030 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 01:58:04,030 [DEBUG] body='{\n  "id": "in_1NMIvYIJTenxdmPo48172NtI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561083,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425083,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561083,\n  "period_start": 1687561083,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561083\n}' message='API response body'
2023-06-24 01:58:04,030 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_SxIUrgfPerEqjL message='Dashboard link for request'
2023-06-24 01:58:04,031 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 01:58:04,031 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMIvYIJTenxdmPo48172NtI&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 01:58:04,494 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 01:58:04,495 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 01:58:04,495 [DEBUG] body='{\n  "id": "ii_1NMIvYIJTenxdmPoTm2Pm6Sj",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687561084,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMIvYIJTenxdmPo48172NtI",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687561084,\n    "start": 1687561084\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 01:58:04,495 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_meTp2h2pluLDyj message='Dashboard link for request'
2023-06-24 01:58:05,237 [INFO] 127.0.0.1 - - [24/Jun/2023 01:58:05] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 01:58:49,003 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 01:58:49,003 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:58:49,021 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 01:58:49,449 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 01:58:49,453 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 01:58:49,453 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 2,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 01:58:49,453 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_mGeg4mVYmtyNul message='Dashboard link for request'
2023-06-24 01:58:49,454 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 01:58:49,454 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 01:58:49,789 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 01:58:49,791 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 01:58:49,791 [DEBUG] body='{\n  "id": "pi_3NMIwHIJTenxdmPo1qmvdVtV",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIwHIJTenxdmPo1qmvdVtV_secret_kwczp9satvZDW8WyVmBSRrpQn",\n  "confirmation_method": "automatic",\n  "created": 1687561129,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:58:49,791 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_I2Xou7hVAH87JG message='Dashboard link for request'
2023-06-24 01:58:49,792 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI
2023-06-24 01:58:49,792 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIwHIJTenxdmPo1qmvdVtV
2023-06-24 01:58:50,227 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIvYIJTenxdmPo48172NtI HTTP/1.1" 200 4072
2023-06-24 01:58:50,228 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI response_code=200
2023-06-24 01:58:50,228 [DEBUG] body='{\n  "id": "in_1NMIvYIJTenxdmPo48172NtI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561083,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425083,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIvYIJTenxdmPothErYkU0",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIvYIJTenxdmPoTm2Pm6Sj",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561084,\n          "start": 1687561084\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIwHIJTenxdmPo1qmvdVtV"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561083,\n  "period_start": 1687561083,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561083\n}' message='API response body'
2023-06-24 01:58:50,228 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_flJIt4fhrzXW8x message='Dashboard link for request'
2023-06-24 01:58:50,230 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI
2023-06-24 01:58:50,230 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMIwHIJTenxdmPo1qmvdVtV
2023-06-24 01:58:50,675 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIvYIJTenxdmPo48172NtI HTTP/1.1" 200 4072
2023-06-24 01:58:50,675 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI response_code=200
2023-06-24 01:58:50,676 [DEBUG] body='{\n  "id": "in_1NMIvYIJTenxdmPo48172NtI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561083,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425083,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIvYIJTenxdmPothErYkU0",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIvYIJTenxdmPoTm2Pm6Sj",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561084,\n          "start": 1687561084\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIwHIJTenxdmPo1qmvdVtV"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561083,\n  "period_start": 1687561083,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561083\n}' message='API response body'
2023-06-24 01:58:50,676 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_yDLhgzJFKhOkTi message='Dashboard link for request'
2023-06-24 01:58:50,676 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI
2023-06-24 01:58:50,676 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:58:50,991 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMIvYIJTenxdmPo48172NtI HTTP/1.1" 200 4072
2023-06-24 01:58:50,993 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI response_code=200
2023-06-24 01:58:50,993 [DEBUG] body='{\n  "id": "in_1NMIvYIJTenxdmPo48172NtI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561083,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425083,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIvYIJTenxdmPothErYkU0",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIvYIJTenxdmPoTm2Pm6Sj",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561084,\n          "start": 1687561084\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIwHIJTenxdmPo1qmvdVtV"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561083,\n  "period_start": 1687561083,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561083\n}' message='API response body'
2023-06-24 01:58:50,993 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_oG5EiAaUMvneMt message='Dashboard link for request'
2023-06-24 01:58:50,994 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/pay
2023-06-24 01:58:50,994 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:58:52,691 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/pay HTTP/1.1" 200 4456
2023-06-24 01:58:52,693 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/pay response_code=200
2023-06-24 01:58:52,693 [DEBUG] body='{\n  "id": "in_1NMIvYIJTenxdmPo48172NtI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 15000,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 1,\n  "attempted": true,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": "ch_3NMIwJIJTenxdmPo1Eo5J0ld",\n  "collection_method": "send_invoice",\n  "created": 1687561083,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425083,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGE1SDR1c3VMRm1jajY0cjVrVkdqbTJYVmgyQ0lRLDc4MTAxOTMy0200NSRIM3FC?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGE1SDR1c3VMRm1jajY0cjVrVkdqbTJYVmgyQ0lRLDc4MTAxOTMy0200NSRIM3FC/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMIvYIJTenxdmPothErYkU0",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMIvYIJTenxdmPoTm2Pm6Sj",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561084,\n          "start": 1687561084\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMIvYIJTenxdmPo48172NtI/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMIwHIJTenxdmPo1qmvdVtV"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0002",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": false,\n  "payment_intent": "pi_3NMIwJIJTenxdmPo1lOw5Gh1",\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561083,\n  "period_start": 1687561083,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687561131,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687561131,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561083\n}' message='API response body'
2023-06-24 01:58:52,693 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_pXt0k25l63OTqF message='Dashboard link for request'
2023-06-24 01:58:52,695 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMIwHIJTenxdmPo1qmvdVtV
2023-06-24 01:58:52,695 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 01:58:52,984 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMIwHIJTenxdmPo1qmvdVtV HTTP/1.1" 200 1293
2023-06-24 01:58:52,988 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIwHIJTenxdmPo1qmvdVtV response_code=200
2023-06-24 01:58:52,988 [DEBUG] body='{\n  "id": "pi_3NMIwHIJTenxdmPo1qmvdVtV",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIwHIJTenxdmPo1qmvdVtV_secret_kwczp9satvZDW8WyVmBSRrpQn",\n  "confirmation_method": "automatic",\n  "created": 1687561129,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:58:52,988 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_4sm343CeeVFiBq message='Dashboard link for request'
2023-06-24 01:58:52,989 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMIwHIJTenxdmPo1qmvdVtV/confirm
2023-06-24 01:58:52,990 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 01:58:54,133 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMIwHIJTenxdmPo1qmvdVtV/confirm HTTP/1.1" 200 1333
2023-06-24 01:58:54,134 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMIwHIJTenxdmPo1qmvdVtV/confirm response_code=200
2023-06-24 01:58:54,134 [DEBUG] body='{\n  "id": "pi_3NMIwHIJTenxdmPo1qmvdVtV",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMIwHIJTenxdmPo1qmvdVtV_secret_kwczp9satvZDW8WyVmBSRrpQn",\n  "confirmation_method": "automatic",\n  "created": 1687561129,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMIwHIJTenxdmPo1HR0TAXj",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 01:58:54,134 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_DAGP2G62Onct4h message='Dashboard link for request'
2023-06-24 01:58:54,136 [INFO] 127.0.0.1 - - [24/Jun/2023 01:58:54] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 02:06:56,200 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 02:06:56,242 [INFO]  * Restarting with stat
2023-06-24 02:06:56,423 [WARNING]  * Debugger is active!
2023-06-24 02:06:56,428 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:07:27,283 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-24 02:07:27,322 [INFO]  * Restarting with stat
2023-06-24 02:07:27,517 [WARNING]  * Debugger is active!
2023-06-24 02:07:27,522 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:07:28,656 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 02:07:28,705 [INFO]  * Restarting with stat
2023-06-24 02:07:28,904 [WARNING]  * Debugger is active!
2023-06-24 02:07:28,909 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:07:34,262 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:07:34,304 [INFO]  * Restarting with stat
2023-06-24 02:07:34,492 [WARNING]  * Debugger is active!
2023-06-24 02:07:34,496 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:07:43,365 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:07:43,366 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:07:43,383 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:07:43,974 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:07:43,976 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:07:43,976 [DEBUG] body='{\n  "id": "in_1NMJ4tIJTenxdmPoMrLUbsqA",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561663,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425663,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561663,\n  "period_start": 1687561663,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561663\n}' message='API response body'
2023-06-24 02:07:43,977 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_F637g2YlNMLosu message='Dashboard link for request'
2023-06-24 02:07:43,980 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 02:07:43,981 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMJ4tIJTenxdmPoMrLUbsqA&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 02:07:44,382 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 02:07:44,382 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 02:07:44,383 [DEBUG] body='{\n  "id": "ii_1NMJ4uIJTenxdmPoTrP7cCdF",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687561664,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMJ4tIJTenxdmPoMrLUbsqA",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687561664,\n    "start": 1687561664\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 02:07:44,383 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_OcBz1pgpsoF2Tp message='Dashboard link for request'
2023-06-24 02:07:45,126 [INFO] 127.0.0.1 - - [24/Jun/2023 02:07:45] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:08:10,582 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 02:08:10,582 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:08:10,585 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:08:11,007 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 02:08:11,008 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 02:08:11,008 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 02:08:11,008 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_bd452XKUxdPVav message='Dashboard link for request'
2023-06-24 02:08:11,010 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 02:08:11,010 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 02:08:11,339 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 02:08:11,340 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 02:08:11,340 [DEBUG] body='{\n  "id": "pi_3NMJ5LIJTenxdmPo1jdga7Id",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ5LIJTenxdmPo1jdga7Id_secret_O2hncw4Fqg9gsbeismXDmpHCy",\n  "confirmation_method": "automatic",\n  "created": 1687561691,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:08:11,340 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_p7z6AM7em2VEQC message='Dashboard link for request'
2023-06-24 02:08:11,341 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA
2023-06-24 02:08:11,342 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJ5LIJTenxdmPo1jdga7Id
2023-06-24 02:08:11,723 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA HTTP/1.1" 200 4072
2023-06-24 02:08:11,723 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA response_code=200
2023-06-24 02:08:11,723 [DEBUG] body='{\n  "id": "in_1NMJ4tIJTenxdmPoMrLUbsqA",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561663,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425663,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ4uIJTenxdmPozEKeM6Rm",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ4uIJTenxdmPoTrP7cCdF",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561664,\n          "start": 1687561664\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5LIJTenxdmPo1jdga7Id"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561663,\n  "period_start": 1687561663,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561663\n}' message='API response body'
2023-06-24 02:08:11,723 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zASc2OCkedAZTb message='Dashboard link for request'
2023-06-24 02:08:11,724 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA
2023-06-24 02:08:11,724 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJ5LIJTenxdmPo1jdga7Id
2023-06-24 02:08:12,073 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA HTTP/1.1" 200 4072
2023-06-24 02:08:12,075 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA response_code=200
2023-06-24 02:08:12,075 [DEBUG] body='{\n  "id": "in_1NMJ4tIJTenxdmPoMrLUbsqA",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561663,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425663,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ4uIJTenxdmPozEKeM6Rm",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ4uIJTenxdmPoTrP7cCdF",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561664,\n          "start": 1687561664\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5LIJTenxdmPo1jdga7Id"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561663,\n  "period_start": 1687561663,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561663\n}' message='API response body'
2023-06-24 02:08:12,075 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_J5jCsELSrv7DqS message='Dashboard link for request'
2023-06-24 02:08:12,077 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA
2023-06-24 02:08:12,077 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:08:12,440 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA HTTP/1.1" 200 4072
2023-06-24 02:08:12,442 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA response_code=200
2023-06-24 02:08:12,442 [DEBUG] body='{\n  "id": "in_1NMJ4tIJTenxdmPoMrLUbsqA",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561663,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425663,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ4uIJTenxdmPozEKeM6Rm",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ4uIJTenxdmPoTrP7cCdF",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561664,\n          "start": 1687561664\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ4tIJTenxdmPoMrLUbsqA/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5LIJTenxdmPo1jdga7Id"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561663,\n  "period_start": 1687561663,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561663\n}' message='API response body'
2023-06-24 02:08:12,442 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_EjwMjyvHuF3kkJ message='Dashboard link for request'
2023-06-24 02:08:12,443 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5LIJTenxdmPo1jdga7Id
2023-06-24 02:08:12,443 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:08:12,850 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMJ5LIJTenxdmPo1jdga7Id HTTP/1.1" 200 1293
2023-06-24 02:08:12,850 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5LIJTenxdmPo1jdga7Id response_code=200
2023-06-24 02:08:12,851 [DEBUG] body='{\n  "id": "pi_3NMJ5LIJTenxdmPo1jdga7Id",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ5LIJTenxdmPo1jdga7Id_secret_O2hncw4Fqg9gsbeismXDmpHCy",\n  "confirmation_method": "automatic",\n  "created": 1687561691,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:08:12,851 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ugZyvSMTbQtUTX message='Dashboard link for request'
2023-06-24 02:08:12,851 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5LIJTenxdmPo1jdga7Id/confirm
2023-06-24 02:08:12,851 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 02:08:14,079 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMJ5LIJTenxdmPo1jdga7Id/confirm HTTP/1.1" 200 1333
2023-06-24 02:08:14,080 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5LIJTenxdmPo1jdga7Id/confirm response_code=200
2023-06-24 02:08:14,080 [DEBUG] body='{\n  "id": "pi_3NMJ5LIJTenxdmPo1jdga7Id",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ5LIJTenxdmPo1jdga7Id_secret_O2hncw4Fqg9gsbeismXDmpHCy",\n  "confirmation_method": "automatic",\n  "created": 1687561691,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMJ5LIJTenxdmPo14sBdROk",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:08:14,080 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_JTU0aWTi7LeYgy message='Dashboard link for request'
2023-06-24 02:08:14,094 [INFO] 127.0.0.1 - - [24/Jun/2023 02:08:14] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 02:08:30,932 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:08:31,444 [INFO]  * Restarting with stat
2023-06-24 02:08:31,635 [WARNING]  * Debugger is active!
2023-06-24 02:08:31,640 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:08:38,458 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:08:38,458 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:08:38,463 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:08:39,065 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:08:39,066 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:08:39,066 [DEBUG] body='{\n  "id": "in_1NMJ5nIJTenxdmPo5GdCdzEe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561718,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425718,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561718,\n  "period_start": 1687561718,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561718\n}' message='API response body'
2023-06-24 02:08:39,066 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_2mBHlOUJA6iOKm message='Dashboard link for request'
2023-06-24 02:08:39,067 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 02:08:39,067 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMJ5nIJTenxdmPo5GdCdzEe&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 02:08:39,475 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 02:08:39,476 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 02:08:39,476 [DEBUG] body='{\n  "id": "ii_1NMJ5nIJTenxdmPou6jYo2qK",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687561719,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMJ5nIJTenxdmPo5GdCdzEe",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687561719,\n    "start": 1687561719\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 02:08:39,476 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_VMIJ18pxz3miGc message='Dashboard link for request'
2023-06-24 02:08:40,230 [INFO] 127.0.0.1 - - [24/Jun/2023 02:08:40] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:08:48,686 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 02:08:48,687 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:08:48,693 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:08:49,118 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 02:08:49,118 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 02:08:49,118 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 3,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 02:08:49,118 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_xoT76jVYiJJIru message='Dashboard link for request'
2023-06-24 02:08:49,119 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 02:08:49,119 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 02:08:49,444 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 02:08:49,445 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 02:08:49,445 [DEBUG] body='{\n  "id": "pi_3NMJ5xIJTenxdmPo0BJNzaKO",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ5xIJTenxdmPo0BJNzaKO_secret_NndyMF8MUP2GPT2prvS7UB7W4",\n  "confirmation_method": "automatic",\n  "created": 1687561729,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:08:49,446 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_98TjAYLnDsleDU message='Dashboard link for request'
2023-06-24 02:08:49,446 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe
2023-06-24 02:08:49,447 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJ5xIJTenxdmPo0BJNzaKO
2023-06-24 02:08:49,816 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe HTTP/1.1" 200 4072
2023-06-24 02:08:49,817 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe response_code=200
2023-06-24 02:08:49,817 [DEBUG] body='{\n  "id": "in_1NMJ5nIJTenxdmPo5GdCdzEe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561718,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425718,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ5nIJTenxdmPohEPtPqEB",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ5nIJTenxdmPou6jYo2qK",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561719,\n          "start": 1687561719\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5xIJTenxdmPo0BJNzaKO"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561718,\n  "period_start": 1687561718,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561718\n}' message='API response body'
2023-06-24 02:08:49,817 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_6Xa7fAV9yn1dmN message='Dashboard link for request'
2023-06-24 02:08:49,818 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe
2023-06-24 02:08:49,818 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJ5xIJTenxdmPo0BJNzaKO
2023-06-24 02:08:50,157 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe HTTP/1.1" 200 4072
2023-06-24 02:08:50,158 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe response_code=200
2023-06-24 02:08:50,159 [DEBUG] body='{\n  "id": "in_1NMJ5nIJTenxdmPo5GdCdzEe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561718,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425718,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ5nIJTenxdmPohEPtPqEB",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ5nIJTenxdmPou6jYo2qK",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561719,\n          "start": 1687561719\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5xIJTenxdmPo0BJNzaKO"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561718,\n  "period_start": 1687561718,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561718\n}' message='API response body'
2023-06-24 02:08:50,159 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_B3By5lDPTMTyF7 message='Dashboard link for request'
2023-06-24 02:08:50,161 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe
2023-06-24 02:08:50,161 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:08:50,480 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe HTTP/1.1" 200 4072
2023-06-24 02:08:50,481 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe response_code=200
2023-06-24 02:08:50,481 [DEBUG] body='{\n  "id": "in_1NMJ5nIJTenxdmPo5GdCdzEe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561718,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425718,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ5nIJTenxdmPohEPtPqEB",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ5nIJTenxdmPou6jYo2qK",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561719,\n          "start": 1687561719\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5xIJTenxdmPo0BJNzaKO"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561718,\n  "period_start": 1687561718,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561718\n}' message='API response body'
2023-06-24 02:08:50,482 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_LkZ8zcCVZipfcq message='Dashboard link for request'
2023-06-24 02:08:50,483 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5xIJTenxdmPo0BJNzaKO
2023-06-24 02:08:50,483 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:08:50,791 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMJ5xIJTenxdmPo0BJNzaKO HTTP/1.1" 200 1293
2023-06-24 02:08:50,792 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5xIJTenxdmPo0BJNzaKO response_code=200
2023-06-24 02:08:50,792 [DEBUG] body='{\n  "id": "pi_3NMJ5xIJTenxdmPo0BJNzaKO",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ5xIJTenxdmPo0BJNzaKO_secret_NndyMF8MUP2GPT2prvS7UB7W4",\n  "confirmation_method": "automatic",\n  "created": 1687561729,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:08:50,792 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NYjraIjNpdi25E message='Dashboard link for request'
2023-06-24 02:08:50,792 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5xIJTenxdmPo0BJNzaKO/confirm
2023-06-24 02:08:50,792 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 02:08:51,859 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMJ5xIJTenxdmPo0BJNzaKO/confirm HTTP/1.1" 200 1333
2023-06-24 02:08:51,860 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJ5xIJTenxdmPo0BJNzaKO/confirm response_code=200
2023-06-24 02:08:51,860 [DEBUG] body='{\n  "id": "pi_3NMJ5xIJTenxdmPo0BJNzaKO",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ5xIJTenxdmPo0BJNzaKO_secret_NndyMF8MUP2GPT2prvS7UB7W4",\n  "confirmation_method": "automatic",\n  "created": 1687561729,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMJ5xIJTenxdmPo0wGdXwip",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:08:51,860 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NKWTXKwH19RGiN message='Dashboard link for request'
2023-06-24 02:08:51,861 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe
2023-06-24 02:08:51,861 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-24 02:08:52,512 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe HTTP/1.1" 200 4406
2023-06-24 02:08:52,512 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe response_code=200
2023-06-24 02:08:52,512 [DEBUG] body='{\n  "id": "in_1NMJ5nIJTenxdmPo5GdCdzEe",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561718,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425718,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFHM3BacGRmcE1HVWZROW9aaTQ5dnZoUjhzV01HLDc4MTAyNTMy0200XBZPpOd4?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFHM3BacGRmcE1HVWZROW9aaTQ5dnZoUjhzV01HLDc4MTAyNTMy0200XBZPpOd4/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ5nIJTenxdmPohEPtPqEB",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ5nIJTenxdmPou6jYo2qK",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561719,\n          "start": 1687561719\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ5nIJTenxdmPo5GdCdzEe/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ5xIJTenxdmPo0BJNzaKO"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0003",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561718,\n  "period_start": 1687561718,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687561732,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687561732,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561718\n}' message='API response body'
2023-06-24 02:08:52,512 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3nbxkfcZXVmwF0 message='Dashboard link for request'
2023-06-24 02:08:52,513 [INFO] 127.0.0.1 - - [24/Jun/2023 02:08:52] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 02:09:19,473 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:09:19,473 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:09:19,488 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:09:20,038 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:09:20,039 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:09:20,039 [DEBUG] body='{\n  "id": "in_1NMJ6SIJTenxdmPoGJME0lc9",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561759,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425759,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561759,\n  "period_start": 1687561759,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561759\n}' message='API response body'
2023-06-24 02:09:20,039 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_TQnCRqKFBcVW91 message='Dashboard link for request'
2023-06-24 02:09:20,040 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 02:09:20,040 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMJ6SIJTenxdmPoGJME0lc9&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 02:09:20,445 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 02:09:20,447 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 02:09:20,447 [DEBUG] body='{\n  "id": "ii_1NMJ6SIJTenxdmPoWVrudrDb",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687561760,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMJ6SIJTenxdmPoGJME0lc9",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687561760,\n    "start": 1687561760\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 02:09:20,447 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_RlyQObiiL3AVoX message='Dashboard link for request'
2023-06-24 02:09:21,191 [INFO] 127.0.0.1 - - [24/Jun/2023 02:09:21] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:09:30,786 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 02:09:30,787 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:09:30,795 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:09:31,239 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 02:09:31,240 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 02:09:31,241 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 4,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 02:09:31,241 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ibFcFTAFDhSsEI message='Dashboard link for request'
2023-06-24 02:09:31,241 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 02:09:31,242 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 02:09:31,589 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 02:09:31,589 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 02:09:31,589 [DEBUG] body='{\n  "id": "pi_3NMJ6dIJTenxdmPo0ROXg6m9",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ6dIJTenxdmPo0ROXg6m9_secret_EbZkvFUh79EmNM6iCC3ePTLNx",\n  "confirmation_method": "automatic",\n  "created": 1687561771,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:09:31,589 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_kTeEqzkQOdCyyO message='Dashboard link for request'
2023-06-24 02:09:31,590 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9
2023-06-24 02:09:31,590 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJ6dIJTenxdmPo0ROXg6m9
2023-06-24 02:09:31,974 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 HTTP/1.1" 200 4072
2023-06-24 02:09:31,975 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 response_code=200
2023-06-24 02:09:31,975 [DEBUG] body='{\n  "id": "in_1NMJ6SIJTenxdmPoGJME0lc9",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561759,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425759,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ6SIJTenxdmPotR3tN40H",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ6SIJTenxdmPoWVrudrDb",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561760,\n          "start": 1687561760\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ6dIJTenxdmPo0ROXg6m9"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561759,\n  "period_start": 1687561759,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561759\n}' message='API response body'
2023-06-24 02:09:31,975 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_pJ11aWgqhfqkkD message='Dashboard link for request'
2023-06-24 02:09:31,977 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9
2023-06-24 02:09:31,977 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJ6dIJTenxdmPo0ROXg6m9
2023-06-24 02:09:32,319 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 HTTP/1.1" 200 4072
2023-06-24 02:09:32,321 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 response_code=200
2023-06-24 02:09:32,321 [DEBUG] body='{\n  "id": "in_1NMJ6SIJTenxdmPoGJME0lc9",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561759,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425759,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ6SIJTenxdmPotR3tN40H",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ6SIJTenxdmPoWVrudrDb",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561760,\n          "start": 1687561760\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ6dIJTenxdmPo0ROXg6m9"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561759,\n  "period_start": 1687561759,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561759\n}' message='API response body'
2023-06-24 02:09:32,321 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_VNwFTK3sq5WPI5 message='Dashboard link for request'
2023-06-24 02:09:32,323 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9
2023-06-24 02:09:32,323 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:09:32,652 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 HTTP/1.1" 200 4072
2023-06-24 02:09:32,653 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 response_code=200
2023-06-24 02:09:32,653 [DEBUG] body='{\n  "id": "in_1NMJ6SIJTenxdmPoGJME0lc9",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561759,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425759,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ6SIJTenxdmPotR3tN40H",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ6SIJTenxdmPoWVrudrDb",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561760,\n          "start": 1687561760\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ6dIJTenxdmPo0ROXg6m9"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561759,\n  "period_start": 1687561759,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561759\n}' message='API response body'
2023-06-24 02:09:32,653 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_YzjRPOb4dChGxR message='Dashboard link for request'
2023-06-24 02:09:32,654 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMJ6dIJTenxdmPo0ROXg6m9
2023-06-24 02:09:32,654 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:09:32,956 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMJ6dIJTenxdmPo0ROXg6m9 HTTP/1.1" 200 1293
2023-06-24 02:09:32,957 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJ6dIJTenxdmPo0ROXg6m9 response_code=200
2023-06-24 02:09:32,957 [DEBUG] body='{\n  "id": "pi_3NMJ6dIJTenxdmPo0ROXg6m9",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ6dIJTenxdmPo0ROXg6m9_secret_EbZkvFUh79EmNM6iCC3ePTLNx",\n  "confirmation_method": "automatic",\n  "created": 1687561771,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:09:32,957 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_N4YADzaFbzIPqb message='Dashboard link for request'
2023-06-24 02:09:32,958 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMJ6dIJTenxdmPo0ROXg6m9/confirm
2023-06-24 02:09:32,958 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 02:09:33,990 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMJ6dIJTenxdmPo0ROXg6m9/confirm HTTP/1.1" 200 1333
2023-06-24 02:09:33,991 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJ6dIJTenxdmPo0ROXg6m9/confirm response_code=200
2023-06-24 02:09:33,991 [DEBUG] body='{\n  "id": "pi_3NMJ6dIJTenxdmPo0ROXg6m9",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJ6dIJTenxdmPo0ROXg6m9_secret_EbZkvFUh79EmNM6iCC3ePTLNx",\n  "confirmation_method": "automatic",\n  "created": 1687561771,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMJ6dIJTenxdmPo0jGZHwEd",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:09:33,991 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_4vIZSieKPjr4l3 message='Dashboard link for request'
2023-06-24 02:09:33,992 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9
2023-06-24 02:09:33,992 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-24 02:09:34,563 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 HTTP/1.1" 200 4406
2023-06-24 02:09:34,564 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9 response_code=200
2023-06-24 02:09:34,565 [DEBUG] body='{\n  "id": "in_1NMJ6SIJTenxdmPoGJME0lc9",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687561759,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688425759,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFIcVpQVkNiMDIyZTZ2dldDSW5XOElETHNrU3llLDc4MTAyNTc00200ehVoXltp?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFIcVpQVkNiMDIyZTZ2dldDSW5XOElETHNrU3llLDc4MTAyNTc00200ehVoXltp/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJ6SIJTenxdmPotR3tN40H",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJ6SIJTenxdmPoWVrudrDb",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687561760,\n          "start": 1687561760\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJ6SIJTenxdmPoGJME0lc9/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJ6dIJTenxdmPo0ROXg6m9"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0004",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687561759,\n  "period_start": 1687561759,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687561774,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687561774,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687561759\n}' message='API response body'
2023-06-24 02:09:34,565 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_UigCjPkQCf46Oq message='Dashboard link for request'
2023-06-24 02:09:34,570 [INFO] 127.0.0.1 - - [24/Jun/2023 02:09:34] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 02:11:50,982 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_mongo_port.py', reloading
2023-06-24 02:11:51,024 [INFO]  * Restarting with stat
2023-06-24 02:11:51,226 [WARNING]  * Debugger is active!
2023-06-24 02:11:51,230 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:14:04,217 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-24 02:14:04,255 [INFO]  * Restarting with stat
2023-06-24 02:14:04,450 [WARNING]  * Debugger is active!
2023-06-24 02:14:04,455 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:14:06,626 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-24 02:14:06,665 [INFO]  * Restarting with stat
2023-06-24 02:14:06,857 [WARNING]  * Debugger is active!
2023-06-24 02:14:06,861 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:14:09,060 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_mongo_port.py', reloading
2023-06-24 02:14:09,106 [INFO]  * Restarting with stat
2023-06-24 02:14:09,306 [WARNING]  * Debugger is active!
2023-06-24 02:14:09,315 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:14:17,945 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:14:17,982 [INFO]  * Restarting with stat
2023-06-24 02:14:18,156 [WARNING]  * Debugger is active!
2023-06-24 02:14:18,160 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:14:24,607 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_invoice_adapter.py', reloading
2023-06-24 02:14:24,656 [INFO]  * Restarting with stat
2023-06-24 02:14:24,861 [WARNING]  * Debugger is active!
2023-06-24 02:14:24,866 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:14:32,889 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:14:32,889 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:14:32,910 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:14:33,572 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:14:33,574 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:14:33,574 [DEBUG] body='{\n  "id": "in_1NMJBVIJTenxdmPorsDsCt8Y",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562073,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426073,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562073,\n  "period_start": 1687562073,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562073\n}' message='API response body'
2023-06-24 02:14:33,575 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_SI2KpZ22oNCXQG message='Dashboard link for request'
2023-06-24 02:14:33,577 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 02:14:33,577 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMJBVIJTenxdmPorsDsCt8Y&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 02:14:33,993 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 02:14:33,993 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 02:14:33,993 [DEBUG] body='{\n  "id": "ii_1NMJBVIJTenxdmPogdSruStO",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687562073,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMJBVIJTenxdmPorsDsCt8Y",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687562073,\n    "start": 1687562073\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 02:14:33,993 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_cB2rCQlPP2uvox message='Dashboard link for request'
2023-06-24 02:14:34,740 [INFO] 127.0.0.1 - - [24/Jun/2023 02:14:34] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:14:40,879 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 02:14:40,879 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:14:40,886 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:14:41,319 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 02:14:41,319 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 02:14:41,319 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 5,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 02:14:41,319 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_iBBAn9g1M6qs6e message='Dashboard link for request'
2023-06-24 02:14:41,320 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 02:14:41,320 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 02:14:41,659 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 02:14:41,660 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 02:14:41,661 [DEBUG] body='{\n  "id": "pi_3NMJBdIJTenxdmPo1a3QVJM9",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJBdIJTenxdmPo1a3QVJM9_secret_G5NqlKTlKnFU3pX5hEe4jCwbC",\n  "confirmation_method": "automatic",\n  "created": 1687562081,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:14:41,661 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_gyX94CMZnJPE6A message='Dashboard link for request'
2023-06-24 02:14:41,663 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y
2023-06-24 02:14:41,663 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJBdIJTenxdmPo1a3QVJM9
2023-06-24 02:14:42,033 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y HTTP/1.1" 200 4072
2023-06-24 02:14:42,033 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y response_code=200
2023-06-24 02:14:42,033 [DEBUG] body='{\n  "id": "in_1NMJBVIJTenxdmPorsDsCt8Y",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562073,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426073,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJBVIJTenxdmPoYQu0jOit",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJBVIJTenxdmPogdSruStO",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562073,\n          "start": 1687562073\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJBdIJTenxdmPo1a3QVJM9"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562073,\n  "period_start": 1687562073,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562073\n}' message='API response body'
2023-06-24 02:14:42,033 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_WHh3IqnKheNiRn message='Dashboard link for request'
2023-06-24 02:14:42,034 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y
2023-06-24 02:14:42,034 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJBdIJTenxdmPo1a3QVJM9
2023-06-24 02:14:42,390 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y HTTP/1.1" 200 4072
2023-06-24 02:14:42,391 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y response_code=200
2023-06-24 02:14:42,391 [DEBUG] body='{\n  "id": "in_1NMJBVIJTenxdmPorsDsCt8Y",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562073,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426073,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJBVIJTenxdmPoYQu0jOit",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJBVIJTenxdmPogdSruStO",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562073,\n          "start": 1687562073\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJBdIJTenxdmPo1a3QVJM9"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562073,\n  "period_start": 1687562073,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562073\n}' message='API response body'
2023-06-24 02:14:42,391 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_1c2nsZjL7qV2EL message='Dashboard link for request'
2023-06-24 02:14:42,392 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y
2023-06-24 02:14:42,392 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:14:42,699 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y HTTP/1.1" 200 4072
2023-06-24 02:14:42,701 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y response_code=200
2023-06-24 02:14:42,701 [DEBUG] body='{\n  "id": "in_1NMJBVIJTenxdmPorsDsCt8Y",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562073,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426073,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJBVIJTenxdmPoYQu0jOit",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJBVIJTenxdmPogdSruStO",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562073,\n          "start": 1687562073\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJBdIJTenxdmPo1a3QVJM9"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562073,\n  "period_start": 1687562073,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562073\n}' message='API response body'
2023-06-24 02:14:42,702 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Nar23X6SThl4SM message='Dashboard link for request'
2023-06-24 02:14:42,704 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMJBdIJTenxdmPo1a3QVJM9
2023-06-24 02:14:42,704 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:14:43,095 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMJBdIJTenxdmPo1a3QVJM9 HTTP/1.1" 200 1293
2023-06-24 02:14:43,096 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJBdIJTenxdmPo1a3QVJM9 response_code=200
2023-06-24 02:14:43,096 [DEBUG] body='{\n  "id": "pi_3NMJBdIJTenxdmPo1a3QVJM9",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJBdIJTenxdmPo1a3QVJM9_secret_G5NqlKTlKnFU3pX5hEe4jCwbC",\n  "confirmation_method": "automatic",\n  "created": 1687562081,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:14:43,096 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_lRqgQFuCLZMOEv message='Dashboard link for request'
2023-06-24 02:14:43,099 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMJBdIJTenxdmPo1a3QVJM9/confirm
2023-06-24 02:14:43,099 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 02:14:44,325 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMJBdIJTenxdmPo1a3QVJM9/confirm HTTP/1.1" 200 1333
2023-06-24 02:14:44,326 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJBdIJTenxdmPo1a3QVJM9/confirm response_code=200
2023-06-24 02:14:44,326 [DEBUG] body='{\n  "id": "pi_3NMJBdIJTenxdmPo1a3QVJM9",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJBdIJTenxdmPo1a3QVJM9_secret_G5NqlKTlKnFU3pX5hEe4jCwbC",\n  "confirmation_method": "automatic",\n  "created": 1687562081,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMJBdIJTenxdmPo14lXtR1a",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:14:44,326 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_ZFhGWgyNgTKOtm message='Dashboard link for request'
2023-06-24 02:14:44,327 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y
2023-06-24 02:14:44,328 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-24 02:14:44,934 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y HTTP/1.1" 200 4406
2023-06-24 02:14:44,935 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y response_code=200
2023-06-24 02:14:44,936 [DEBUG] body='{\n  "id": "in_1NMJBVIJTenxdmPorsDsCt8Y",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562073,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426073,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFNbkR2RVZQRHRvN0VyRWtHUWhURFkxdEpNSUJkLDc4MTAyODg00200al8854cp?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFNbkR2RVZQRHRvN0VyRWtHUWhURFkxdEpNSUJkLDc4MTAyODg00200al8854cp/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJBVIJTenxdmPoYQu0jOit",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJBVIJTenxdmPogdSruStO",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562073,\n          "start": 1687562073\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJBVIJTenxdmPorsDsCt8Y/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJBdIJTenxdmPo1a3QVJM9"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0005",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562073,\n  "period_start": 1687562073,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687562084,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687562084,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562073\n}' message='API response body'
2023-06-24 02:14:44,936 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_z6zvRUc39gtLb2 message='Dashboard link for request'
2023-06-24 02:14:44,951 [INFO] 127.0.0.1 - - [24/Jun/2023 02:14:44] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-24 02:15:29,231 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-24 02:15:29,710 [INFO]  * Restarting with stat
2023-06-24 02:15:29,901 [WARNING]  * Debugger is active!
2023-06-24 02:15:29,905 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:15:36,449 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:15:36,449 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:15:36,457 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:15:36,994 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:15:36,999 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:15:36,999 [DEBUG] body='{\n  "id": "in_1NMJCWIJTenxdmPooWFvRao7",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562136,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426136,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562136,\n  "period_start": 1687562136,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562136\n}' message='API response body'
2023-06-24 02:15:37,000 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3IH1dywGPCZEiM message='Dashboard link for request'
2023-06-24 02:15:37,003 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 02:15:37,003 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMJCWIJTenxdmPooWFvRao7&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 02:15:37,418 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 02:15:37,419 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 02:15:37,419 [DEBUG] body='{\n  "id": "ii_1NMJCXIJTenxdmPobY8kLS4Y",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687562137,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMJCWIJTenxdmPooWFvRao7",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687562137,\n    "start": 1687562137\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 02:15:37,419 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_8bKfXEkoYOFyhR message='Dashboard link for request'
2023-06-24 02:15:38,161 [INFO] 127.0.0.1 - - [24/Jun/2023 02:15:38] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:15:47,604 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 02:15:47,604 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:15:47,607 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:15:48,030 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 02:15:48,031 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 02:15:48,031 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 6,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 02:15:48,031 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_juBBa9MFFn57FN message='Dashboard link for request'
2023-06-24 02:15:48,031 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 02:15:48,031 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 02:15:48,359 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 02:15:48,361 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 02:15:48,361 [DEBUG] body='{\n  "id": "pi_3NMJCiIJTenxdmPo0gk0wAwm",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJCiIJTenxdmPo0gk0wAwm_secret_bh1vwgqPMLSes7DSedANbMZaG",\n  "confirmation_method": "automatic",\n  "created": 1687562148,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:15:48,361 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_P24VEM2k6igdfw message='Dashboard link for request'
2023-06-24 02:15:48,362 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7
2023-06-24 02:15:48,362 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJCiIJTenxdmPo0gk0wAwm
2023-06-24 02:15:48,703 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 HTTP/1.1" 200 4072
2023-06-24 02:15:48,705 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 response_code=200
2023-06-24 02:15:48,705 [DEBUG] body='{\n  "id": "in_1NMJCWIJTenxdmPooWFvRao7",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562136,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426136,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJCXIJTenxdmPol8nzYaVi",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJCXIJTenxdmPobY8kLS4Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562137,\n          "start": 1687562137\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJCiIJTenxdmPo0gk0wAwm"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562136,\n  "period_start": 1687562136,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562136\n}' message='API response body'
2023-06-24 02:15:48,705 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_y66OlYaIKk5lz6 message='Dashboard link for request'
2023-06-24 02:15:48,706 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7
2023-06-24 02:15:48,707 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJCiIJTenxdmPo0gk0wAwm
2023-06-24 02:15:49,057 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 HTTP/1.1" 200 4072
2023-06-24 02:15:49,058 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 response_code=200
2023-06-24 02:15:49,058 [DEBUG] body='{\n  "id": "in_1NMJCWIJTenxdmPooWFvRao7",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562136,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426136,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJCXIJTenxdmPol8nzYaVi",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJCXIJTenxdmPobY8kLS4Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562137,\n          "start": 1687562137\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJCiIJTenxdmPo0gk0wAwm"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562136,\n  "period_start": 1687562136,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562136\n}' message='API response body'
2023-06-24 02:15:49,058 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3Uc63nmYpmdWGO message='Dashboard link for request'
2023-06-24 02:15:49,059 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7
2023-06-24 02:15:49,059 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:15:49,386 [DEBUG] https://api.stripe.com:443 "GET /v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 HTTP/1.1" 200 4072
2023-06-24 02:15:49,388 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 response_code=200
2023-06-24 02:15:49,388 [DEBUG] body='{\n  "id": "in_1NMJCWIJTenxdmPooWFvRao7",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562136,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426136,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJCXIJTenxdmPol8nzYaVi",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJCXIJTenxdmPobY8kLS4Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562137,\n          "start": 1687562137\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJCiIJTenxdmPo0gk0wAwm"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562136,\n  "period_start": 1687562136,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562136\n}' message='API response body'
2023-06-24 02:15:49,388 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_NORQv4XzcKXczl message='Dashboard link for request'
2023-06-24 02:15:49,391 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMJCiIJTenxdmPo0gk0wAwm
2023-06-24 02:15:49,391 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:15:49,758 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMJCiIJTenxdmPo0gk0wAwm HTTP/1.1" 200 1293
2023-06-24 02:15:49,759 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJCiIJTenxdmPo0gk0wAwm response_code=200
2023-06-24 02:15:49,760 [DEBUG] body='{\n  "id": "pi_3NMJCiIJTenxdmPo0gk0wAwm",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJCiIJTenxdmPo0gk0wAwm_secret_bh1vwgqPMLSes7DSedANbMZaG",\n  "confirmation_method": "automatic",\n  "created": 1687562148,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:15:49,760 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_1QHiYueCvEgwwS message='Dashboard link for request'
2023-06-24 02:15:49,761 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMJCiIJTenxdmPo0gk0wAwm/confirm
2023-06-24 02:15:49,761 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 02:15:51,093 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMJCiIJTenxdmPo0gk0wAwm/confirm HTTP/1.1" 200 1333
2023-06-24 02:15:51,094 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJCiIJTenxdmPo0gk0wAwm/confirm response_code=200
2023-06-24 02:15:51,094 [DEBUG] body='{\n  "id": "pi_3NMJCiIJTenxdmPo0gk0wAwm",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJCiIJTenxdmPo0gk0wAwm_secret_bh1vwgqPMLSes7DSedANbMZaG",\n  "confirmation_method": "automatic",\n  "created": 1687562148,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMJCiIJTenxdmPo0Sr9VibD",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:15:51,094 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_fzSiykMUODTzo5 message='Dashboard link for request'
2023-06-24 02:15:51,095 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7
2023-06-24 02:15:51,096 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-24 02:15:51,660 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 HTTP/1.1" 200 4406
2023-06-24 02:15:51,660 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7 response_code=200
2023-06-24 02:15:51,660 [DEBUG] body='{\n  "id": "in_1NMJCWIJTenxdmPooWFvRao7",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562136,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426136,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFOODNEc09WUGhGYnBid1ZrQlpzZWNQQndxZElVLDc4MTAyOTUx02007RA375CQ?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFOODNEc09WUGhGYnBid1ZrQlpzZWNQQndxZElVLDc4MTAyOTUx02007RA375CQ/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJCXIJTenxdmPol8nzYaVi",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJCXIJTenxdmPobY8kLS4Y",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562137,\n          "start": 1687562137\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJCWIJTenxdmPooWFvRao7/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJCiIJTenxdmPo0gk0wAwm"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0006",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562136,\n  "period_start": 1687562136,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687562151,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687562151,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562136\n}' message='API response body'
2023-06-24 02:15:51,660 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_IPMwRDJbSBqL5f message='Dashboard link for request'
2023-06-24 02:15:52,401 [INFO] 127.0.0.1 - - [24/Jun/2023 02:15:52] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 02:16:25,219 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:16:25,258 [INFO]  * Restarting with stat
2023-06-24 02:16:25,449 [WARNING]  * Debugger is active!
2023-06-24 02:16:25,454 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:16:31,932 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:16:31,965 [INFO]  * Restarting with stat
2023-06-24 02:16:32,141 [WARNING]  * Debugger is active!
2023-06-24 02:16:32,145 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:21:38,731 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-24 02:21:38,764 [INFO]  * Restarting with stat
2023-06-24 02:21:38,939 [WARNING]  * Debugger is active!
2023-06-24 02:21:38,943 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:21:52,811 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 02:21:52,850 [INFO]  * Restarting with stat
2023-06-24 02:21:53,052 [WARNING]  * Debugger is active!
2023-06-24 02:21:53,056 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:23:10,059 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:23:10,096 [INFO]  * Restarting with stat
2023-06-24 02:23:10,272 [WARNING]  * Debugger is active!
2023-06-24 02:23:10,276 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:23:18,026 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:23:18,026 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:23:18,039 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:23:18,681 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:23:18,684 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:23:18,684 [DEBUG] body='{\n  "id": "in_1NMJJyIJTenxdmPowlAO2BHF",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562598,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426598,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562598,\n  "period_start": 1687562598,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562598\n}' message='API response body'
2023-06-24 02:23:18,684 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Bs8puxOiyE4N9G message='Dashboard link for request'
2023-06-24 02:23:18,688 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoiceitems
2023-06-24 02:23:18,688 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&invoice=in_1NMJJyIJTenxdmPowlAO2BHF&price=price_1NMItbIJTenxdmPovfpzuTnK&quantity=1
2023-06-24 02:23:19,089 [DEBUG] https://api.stripe.com:443 "POST /v1/invoiceitems HTTP/1.1" 200 1189
2023-06-24 02:23:19,089 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoiceitems response_code=200
2023-06-24 02:23:19,089 [DEBUG] body='{\n  "id": "ii_1NMJJzIJTenxdmPorNIyxs4n",\n  "object": "invoiceitem",\n  "amount": 15000,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "date": 1687562599,\n  "description": "Premium",\n  "discountable": true,\n  "discounts": [],\n  "invoice": "in_1NMJJyIJTenxdmPowlAO2BHF",\n  "livemode": false,\n  "metadata": {},\n  "period": {\n    "end": 1687562599,\n    "start": 1687562599\n  },\n  "plan": null,\n  "price": {\n    "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n    "object": "price",\n    "active": true,\n    "billing_scheme": "per_unit",\n    "created": 1687560963,\n    "currency": "usd",\n    "custom_unit_amount": null,\n    "livemode": false,\n    "lookup_key": null,\n    "metadata": {\n      "description": "Annual subscription",\n      "label": "Annual Plan"\n    },\n    "nickname": null,\n    "product": "prod_O8a3p03CbfmFd3",\n    "recurring": null,\n    "tax_behavior": "unspecified",\n    "tiers_mode": null,\n    "transform_quantity": null,\n    "type": "one_time",\n    "unit_amount": 15000,\n    "unit_amount_decimal": "15000"\n  },\n  "proration": false,\n  "quantity": 1,\n  "subscription": null,\n  "tax_rates": [],\n  "test_clock": null,\n  "unit_amount": 15000,\n  "unit_amount_decimal": "15000"\n}' message='API response body'
2023-06-24 02:23:19,089 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_nBXNdea2aNtRRK message='Dashboard link for request'
2023-06-24 02:23:19,838 [INFO] 127.0.0.1 - - [24/Jun/2023 02:23:19] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:23:27,184 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-24 02:23:27,184 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:23:27,201 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:23:27,628 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 736
2023-06-24 02:23:27,630 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-24 02:23:27,630 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 7,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-24 02:23:27,630 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_MHyoN5xkF9NgZN message='Dashboard link for request'
2023-06-24 02:23:27,631 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-24 02:23:27,631 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-24 02:23:27,965 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-24 02:23:27,967 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-24 02:23:27,968 [DEBUG] body='{\n  "id": "pi_3NMJK8IJTenxdmPo1rdAG1FL",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJK8IJTenxdmPo1rdAG1FL_secret_TcNcKKWm05drZPtj1jfwqNwid",\n  "confirmation_method": "automatic",\n  "created": 1687562608,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:23:27,968 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_tN7kBH3oUcbmvt message='Dashboard link for request'
2023-06-24 02:23:27,972 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF
2023-06-24 02:23:27,972 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMJK8IJTenxdmPo1rdAG1FL
2023-06-24 02:23:28,408 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF HTTP/1.1" 200 4072
2023-06-24 02:23:28,409 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF response_code=200
2023-06-24 02:23:28,409 [DEBUG] body='{\n  "id": "in_1NMJJyIJTenxdmPowlAO2BHF",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562598,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426598,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJJzIJTenxdmPopXUpqwl8",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJJzIJTenxdmPorNIyxs4n",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562599,\n          "start": 1687562599\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJK8IJTenxdmPo1rdAG1FL"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562598,\n  "period_start": 1687562598,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562598\n}' message='API response body'
2023-06-24 02:23:28,410 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_DzW1uVv9ynYwdu message='Dashboard link for request'
2023-06-24 02:23:28,411 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMJK8IJTenxdmPo1rdAG1FL
2023-06-24 02:23:28,411 [DEBUG] api_version=None message='Post details' post_data=
2023-06-24 02:23:28,789 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMJK8IJTenxdmPo1rdAG1FL HTTP/1.1" 200 1293
2023-06-24 02:23:28,790 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJK8IJTenxdmPo1rdAG1FL response_code=200
2023-06-24 02:23:28,790 [DEBUG] body='{\n  "id": "pi_3NMJK8IJTenxdmPo1rdAG1FL",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJK8IJTenxdmPo1rdAG1FL_secret_TcNcKKWm05drZPtj1jfwqNwid",\n  "confirmation_method": "automatic",\n  "created": 1687562608,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:23:28,791 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_b6Q33f6n2L55Gc message='Dashboard link for request'
2023-06-24 02:23:28,791 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMJK8IJTenxdmPo1rdAG1FL/confirm
2023-06-24 02:23:28,791 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-24 02:23:29,859 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMJK8IJTenxdmPo1rdAG1FL/confirm HTTP/1.1" 200 1333
2023-06-24 02:23:29,860 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMJK8IJTenxdmPo1rdAG1FL/confirm response_code=200
2023-06-24 02:23:29,861 [DEBUG] body='{\n  "id": "pi_3NMJK8IJTenxdmPo1rdAG1FL",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMJK8IJTenxdmPo1rdAG1FL_secret_TcNcKKWm05drZPtj1jfwqNwid",\n  "confirmation_method": "automatic",\n  "created": 1687562608,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMJK8IJTenxdmPo1xfZidml",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-24 02:23:29,861 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_9DKJd5wFs4Rhhh message='Dashboard link for request'
2023-06-24 02:23:29,862 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF
2023-06-24 02:23:29,862 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-24 02:23:30,449 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF HTTP/1.1" 200 4406
2023-06-24 02:23:30,450 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF response_code=200
2023-06-24 02:23:30,451 [DEBUG] body='{\n  "id": "in_1NMJJyIJTenxdmPowlAO2BHF",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562598,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426598,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFVcHdzelRHRVdtcjBZc0cxYTVIbGdYaGptNzhELDc4MTAzNDEw0200aMMM7DZ2?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFVcHdzelRHRVdtcjBZc0cxYTVIbGdYaGptNzhELDc4MTAzNDEw0200aMMM7DZ2/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJJzIJTenxdmPopXUpqwl8",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJJzIJTenxdmPorNIyxs4n",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562599,\n          "start": 1687562599\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMJK8IJTenxdmPo1rdAG1FL"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0007",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562598,\n  "period_start": 1687562598,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687562610,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687562610,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562598\n}' message='API response body'
2023-06-24 02:23:30,451 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_8k5nBwqwYNul79 message='Dashboard link for request'
2023-06-24 02:23:31,191 [INFO] 127.0.0.1 - - [24/Jun/2023 02:23:31] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-24 02:24:58,261 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:24:58,300 [INFO]  * Restarting with stat
2023-06-24 02:24:58,471 [WARNING]  * Debugger is active!
2023-06-24 02:24:58,476 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:25:04,892 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-24 02:25:04,932 [INFO]  * Restarting with stat
2023-06-24 02:25:05,112 [WARNING]  * Debugger is active!
2023-06-24 02:25:05,116 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:26:01,866 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 02:26:01,906 [INFO]  * Restarting with stat
2023-06-24 02:26:02,100 [WARNING]  * Debugger is active!
2023-06-24 02:26:02,105 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:26:09,229 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-24 02:26:09,230 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8ZvjpvKsj7JK4&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-24 02:26:09,588 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-24 02:26:10,199 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-24 02:26:10,200 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-24 02:26:10,200 [DEBUG] body='{\n  "id": "in_1NMJMkIJTenxdmPohtxk2WFv",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562770,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426770,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMJMkIJTenxdmPohtxk2WFv/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562770,\n  "period_start": 1687562770,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562770\n}' message='API response body'
2023-06-24 02:26:10,201 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zgK4qMcGilMWAV message='Dashboard link for request'
2023-06-24 02:26:10,949 [INFO] 127.0.0.1 - - [24/Jun/2023 02:26:10] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-24 02:26:17,220 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 02:26:17,255 [INFO]  * Restarting with stat
2023-06-24 02:26:17,437 [WARNING]  * Debugger is active!
2023-06-24 02:26:17,442 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:26:31,380 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 02:26:31,418 [INFO]  * Restarting with stat
2023-06-24 02:26:31,598 [WARNING]  * Debugger is active!
2023-06-24 02:26:31,603 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:26:35,929 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/invoice_stripe_port.py', reloading
2023-06-24 02:26:35,966 [INFO]  * Restarting with stat
2023-06-24 02:26:36,157 [WARNING]  * Debugger is active!
2023-06-24 02:26:36,161 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:26:46,860 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_invoice_adapter.py', reloading
2023-06-24 02:26:46,896 [INFO]  * Restarting with stat
2023-06-24 02:26:47,083 [WARNING]  * Debugger is active!
2023-06-24 02:26:47,087 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:16,936 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_product_adapter.py', reloading
2023-06-24 02:27:16,972 [INFO]  * Restarting with stat
2023-06-24 02:27:17,174 [WARNING]  * Debugger is active!
2023-06-24 02:27:17,179 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:20,420 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_customer_adapter.py', reloading
2023-06-24 02:27:20,457 [INFO]  * Restarting with stat
2023-06-24 02:27:20,653 [WARNING]  * Debugger is active!
2023-06-24 02:27:20,657 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:24,961 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-24 02:27:24,996 [INFO]  * Restarting with stat
2023-06-24 02:27:25,169 [WARNING]  * Debugger is active!
2023-06-24 02:27:25,174 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:27,394 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-24 02:27:27,438 [INFO]  * Restarting with stat
2023-06-24 02:27:27,632 [WARNING]  * Debugger is active!
2023-06-24 02:27:27,637 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:32,994 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/complete_payment_intent.py', reloading
2023-06-24 02:27:33,030 [INFO]  * Restarting with stat
2023-06-24 02:27:33,225 [WARNING]  * Debugger is active!
2023-06-24 02:27:33,229 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:37,561 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_subscription.py', reloading
2023-06-24 02:27:37,595 [INFO]  * Restarting with stat
2023-06-24 02:27:37,776 [WARNING]  * Debugger is active!
2023-06-24 02:27:37,781 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:48,443 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/update_customer_payment.py', reloading
2023-06-24 02:27:48,483 [INFO]  * Restarting with stat
2023-06-24 02:27:48,678 [WARNING]  * Debugger is active!
2023-06-24 02:27:48,683 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:53,004 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_invoice.py', reloading
2023-06-24 02:27:53,046 [INFO]  * Restarting with stat
2023-06-24 02:27:53,239 [WARNING]  * Debugger is active!
2023-06-24 02:27:53,243 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:27:57,530 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/insert_customer.py', reloading
2023-06-24 02:27:57,570 [INFO]  * Restarting with stat
2023-06-24 02:27:57,764 [WARNING]  * Debugger is active!
2023-06-24 02:27:57,768 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:13,795 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 02:28:13,836 [INFO]  * Restarting with stat
2023-06-24 02:28:14,024 [WARNING]  * Debugger is active!
2023-06-24 02:28:14,028 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:20,432 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/stripe_payment_adapter.py', reloading
2023-06-24 02:28:20,476 [INFO]  * Restarting with stat
2023-06-24 02:28:20,663 [WARNING]  * Debugger is active!
2023-06-24 02:28:20,667 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:26,018 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-24 02:28:26,058 [INFO]  * Restarting with stat
2023-06-24 02:28:26,249 [WARNING]  * Debugger is active!
2023-06-24 02:28:26,254 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:27,380 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-24 02:28:27,417 [INFO]  * Restarting with stat
2023-06-24 02:28:27,610 [WARNING]  * Debugger is active!
2023-06-24 02:28:27,614 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:28,758 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-24 02:28:28,802 [INFO]  * Restarting with stat
2023-06-24 02:28:28,989 [WARNING]  * Debugger is active!
2023-06-24 02:28:28,993 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:31,204 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-24 02:28:31,238 [INFO]  * Restarting with stat
2023-06-24 02:28:31,415 [WARNING]  * Debugger is active!
2023-06-24 02:28:31,419 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:38,904 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/mongo_subscription_adapter.py', reloading
2023-06-24 02:28:38,943 [INFO]  * Restarting with stat
2023-06-24 02:28:39,131 [WARNING]  * Debugger is active!
2023-06-24 02:28:39,136 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:28:45,529 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/stripe_webhook/stripe_routes.py', reloading
2023-06-24 02:28:45,568 [INFO]  * Restarting with stat
2023-06-24 02:28:45,753 [WARNING]  * Debugger is active!
2023-06-24 02:28:45,757 [INFO]  * Debugger PIN: 458-791-220
2023-06-24 02:29:01,866 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/stripe_webhook/stripe_routes.py', reloading
2023-06-24 02:29:01,906 [INFO]  * Restarting with stat
2023-06-24 02:29:02,101 [WARNING]  * Debugger is active!
2023-06-24 02:29:02,106 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 00:58:01,896 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 00:58:01,898 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 00:58:01,899 [INFO]  * Restarting with stat
2023-06-25 00:58:02,080 [WARNING]  * Debugger is active!
2023-06-25 00:58:02,086 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 00:58:33,076 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-25 00:58:33,111 [INFO]  * Restarting with stat
2023-06-25 00:58:33,286 [WARNING]  * Debugger is active!
2023-06-25 00:58:33,291 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 00:58:54,606 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/app_config/config.py', reloading
2023-06-25 00:58:54,643 [INFO]  * Restarting with stat
2023-06-25 01:00:25,840 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 01:00:25,840 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 01:00:25,842 [INFO]  * Restarting with stat
2023-06-25 01:00:26,033 [WARNING]  * Debugger is active!
2023-06-25 01:00:26,037 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:00:47,216 [INFO] 127.0.0.1 - - [25/Jun/2023 01:00:47] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:01:18,523 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-25 01:01:18,978 [INFO]  * Restarting with stat
2023-06-25 01:01:19,162 [WARNING]  * Debugger is active!
2023-06-25 01:01:19,167 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:01:21,296 [INFO] 127.0.0.1 - - [25/Jun/2023 01:01:21] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:02:04,010 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/webserver/routes/payments/payments_routes.py', reloading
2023-06-25 01:02:04,440 [INFO]  * Restarting with stat
2023-06-25 01:02:04,633 [WARNING]  * Debugger is active!
2023-06-25 01:02:04,637 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:02:06,455 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:02:06,457 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:02:06,457 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:02:06,458 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:02:06,458 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:02:06,458 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:02:06,458 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:02:06,460 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:02:06,460 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:02:06,460 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:02:06,460 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:02:06,462 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:02:06,470 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:02:06,470 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x102fae2a0>
2023-06-25 01:02:06,484 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:02:06,499 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:02:06,499 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:02:06,499 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x102f084a0>
2023-06-25 01:02:06,578 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:02:06,579 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:02:06,580 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:02:06,584 [INFO] 127.0.0.1 - - [25/Jun/2023 01:02:06] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:02:18,553 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:02:19,655 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 01:02:19,655 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 01:02:19,656 [INFO]  * Restarting with stat
2023-06-25 01:02:19,830 [WARNING]  * Debugger is active!
2023-06-25 01:02:19,834 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:02:21,269 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:02:21,270 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:02:21,270 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:02:21,271 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:02:21,271 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:02:21,271 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:02:21,272 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:02:21,273 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:02:21,273 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:02:21,273 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:02:21,273 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:02:21,275 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:02:21,285 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:02:21,285 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1063a22a0>
2023-06-25 01:02:21,296 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:02:21,308 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:02:21,309 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:02:21,309 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1062f84a0>
2023-06-25 01:02:21,315 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:02:21,316 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:02:21,316 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:02:21,321 [INFO] 127.0.0.1 - - [25/Jun/2023 01:02:21] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:02:27,397 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:02:27,886 [INFO]  * Restarting with stat
2023-06-25 01:02:28,086 [WARNING]  * Debugger is active!
2023-06-25 01:02:28,091 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:02:31,348 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/ports/aws_sqs_port.py', reloading
2023-06-25 01:02:31,394 [INFO]  * Restarting with stat
2023-06-25 01:02:31,589 [WARNING]  * Debugger is active!
2023-06-25 01:02:31,593 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:02:33,432 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:02:33,433 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:02:33,434 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:02:33,434 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:02:33,434 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:02:33,435 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:02:33,435 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:02:33,436 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:02:33,437 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:02:33,437 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:02:33,437 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:02:33,438 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:02:33,445 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:02:33,446 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1046662a0>
2023-06-25 01:02:33,457 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:02:33,471 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:02:33,471 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:02:33,472 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1045c04a0>
2023-06-25 01:02:33,548 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:02:33,550 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:02:33,550 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:02:33,550 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x104667a60>
2023-06-25 01:02:33,551 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:02:33,551 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:02:33,551 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x104666340>
2023-06-25 01:02:33,551 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x104689580>
2023-06-25 01:02:33,551 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1050f9390>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:02:33,552 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1050f9350>>
2023-06-25 01:02:33,552 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x104667920>
2023-06-25 01:02:33,552 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:02:33,552 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220233Z

content-type;host;x-amz-date
cea458de321ed9eed2656d26005e29e43b84f97e07a15ef6450640477c0242de
2023-06-25 01:02:33,552 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220233Z
20230624/us-east-1/sqs/aws4_request
6ae3194cb9cc8df21bb684145435b95932c29edaa988e58571e173e99e601a65
2023-06-25 01:02:33,552 [DEBUG] Signature:
d4243cded2c1e6b99ae3b50bb7574dc8717df0cc75e7b367f86af6e148516003
2023-06-25 01:02:33,552 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x104689d00>
2023-06-25 01:02:33,552 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220233Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=d4243cded2c1e6b99ae3b50bb7574dc8717df0cc75e7b367f86af6e148516003', 'amz-sdk-invocation-id': b'b338ced3-0972-4b35-bf6b-73b1a92b97ef', 'amz-sdk-request': b'attempt=1', 'Content-Length': '181'}>
2023-06-25 01:02:33,553 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:02:33,553 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:02:34,141 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 403 470
2023-06-25 01:02:34,142 [DEBUG] Response headers: {'x-amzn-RequestId': '8020dd24-8dba-5a5e-8af1-8035e7807e25', 'Connection': 'close', 'Date': 'Sat, 24 Jun 2023 22:02:34 GMT', 'Content-Type': 'text/xml', 'Content-Length': '470'}
2023-06-25 01:02:34,142 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AccessDenied</Code><Message>User: arn:aws:iam::020761065253:user/ronen is not authorized to perform: sqs:createqueue on resource: arn:aws:sqs:us-east-1:020761065253:invoice_completed because no identity-based policy allows the sqs:createqueue action</Message><Detail/></Error><RequestId>8020dd24-8dba-5a5e-8af1-8035e7807e25</RequestId></ErrorResponse>'
2023-06-25 01:02:34,143 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x105106c50>
2023-06-25 01:02:34,143 [DEBUG] No retry needed.
2023-06-25 01:02:34,151 [INFO] 127.0.0.1 - - [25/Jun/2023 01:02:34] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:03:41,101 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1046662a0>
2023-06-25 01:03:41,103 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1045c04a0>
2023-06-25 01:03:41,178 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:03:41,180 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:03:41,182 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x104667a60>
2023-06-25 01:03:41,182 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:03:41,182 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:03:41,183 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x104666340>
2023-06-25 01:03:41,183 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x104689580>
2023-06-25 01:03:41,183 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1051f9950>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:03:41,184 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1051f9910>>
2023-06-25 01:03:41,184 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x104667920>
2023-06-25 01:03:41,185 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:03:41,185 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220341Z

content-type;host;x-amz-date
cea458de321ed9eed2656d26005e29e43b84f97e07a15ef6450640477c0242de
2023-06-25 01:03:41,185 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220341Z
20230624/us-east-1/sqs/aws4_request
cfd3cd51b81bed858459fc1d2643ca367f4d58f44e1fcab818a3a03c7c0afdf6
2023-06-25 01:03:41,186 [DEBUG] Signature:
56f8031c83ae384123665335e5d6393373cc6ca8094ce5606886d2b999d7d42a
2023-06-25 01:03:41,186 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x104689d00>
2023-06-25 01:03:41,186 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220341Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=56f8031c83ae384123665335e5d6393373cc6ca8094ce5606886d2b999d7d42a', 'amz-sdk-invocation-id': b'855ee5ec-46c9-4394-86e2-0a789f62c38b', 'amz-sdk-request': b'attempt=1', 'Content-Length': '181'}>
2023-06-25 01:03:41,187 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:03:41,187 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:03:41,804 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 403 470
2023-06-25 01:03:41,806 [DEBUG] Response headers: {'x-amzn-RequestId': '494c4b0d-c725-53d4-a170-161cad58195d', 'Connection': 'close', 'Date': 'Sat, 24 Jun 2023 22:03:41 GMT', 'Content-Type': 'text/xml', 'Content-Length': '470'}
2023-06-25 01:03:41,806 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AccessDenied</Code><Message>User: arn:aws:iam::020761065253:user/ronen is not authorized to perform: sqs:createqueue on resource: arn:aws:sqs:us-east-1:020761065253:invoice_completed because no identity-based policy allows the sqs:createqueue action</Message><Detail/></Error><RequestId>494c4b0d-c725-53d4-a170-161cad58195d</RequestId></ErrorResponse>'
2023-06-25 01:03:41,807 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x105162310>
2023-06-25 01:03:41,807 [DEBUG] No retry needed.
2023-06-25 01:03:41,819 [INFO] 127.0.0.1 - - [25/Jun/2023 01:03:41] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:04:41,160 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1046662a0>
2023-06-25 01:04:41,160 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1045c04a0>
2023-06-25 01:04:41,235 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:04:41,236 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:04:41,236 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x104667a60>
2023-06-25 01:04:41,236 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:04:41,237 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:04:41,237 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x104666340>
2023-06-25 01:04:41,237 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x104689580>
2023-06-25 01:04:41,237 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x105db1c50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:04:41,237 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x105db1c10>>
2023-06-25 01:04:41,237 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x104667920>
2023-06-25 01:04:41,237 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:04:41,237 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220441Z

content-type;host;x-amz-date
cea458de321ed9eed2656d26005e29e43b84f97e07a15ef6450640477c0242de
2023-06-25 01:04:41,237 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220441Z
20230624/us-east-1/sqs/aws4_request
cf67b4f004fedd1b1548f3300c77dfae34abe5d7a2a44600083dc696805ad3be
2023-06-25 01:04:41,237 [DEBUG] Signature:
f32881683e5be9b03071bbf4dd5cb47455e3badb3a765f72b01e13196f5cda17
2023-06-25 01:04:41,237 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x104689d00>
2023-06-25 01:04:41,237 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220441Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=f32881683e5be9b03071bbf4dd5cb47455e3badb3a765f72b01e13196f5cda17', 'amz-sdk-invocation-id': b'7dfab08f-0ad1-437a-a43f-05a766e6804f', 'amz-sdk-request': b'attempt=1', 'Content-Length': '181'}>
2023-06-25 01:04:41,238 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:04:41,238 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:04:41,925 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 402
2023-06-25 01:04:41,926 [DEBUG] Response headers: {'x-amzn-RequestId': '3e065222-a9b9-54c2-a278-0f33c3034b5a', 'Date': 'Sat, 24 Jun 2023 22:04:42 GMT', 'Content-Type': 'text/xml', 'Content-Length': '402'}
2023-06-25 01:04:41,927 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>InvalidParameterValue</Code><Message>The name of a FIFO queue can only include alphanumeric characters, hyphens, or underscores, must end with .fifo suffix and be 1 to 80 in length.</Message><Detail/></Error><RequestId>3e065222-a9b9-54c2-a278-0f33c3034b5a</RequestId></ErrorResponse>'
2023-06-25 01:04:41,928 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x105da2310>
2023-06-25 01:04:41,928 [DEBUG] No retry needed.
2023-06-25 01:04:41,933 [INFO] 127.0.0.1 - - [25/Jun/2023 01:04:41] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:05:34,965 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:05:35,514 [INFO]  * Restarting with stat
2023-06-25 01:05:35,781 [WARNING]  * Debugger is active!
2023-06-25 01:05:35,786 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:05:37,403 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:05:37,404 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:05:37,404 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:05:37,405 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:05:37,405 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:05:37,405 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:05:37,406 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:05:37,407 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:05:37,407 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:05:37,407 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:05:37,407 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:05:37,409 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:05:37,418 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:05:37,418 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1049422a0>
2023-06-25 01:05:37,430 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:05:37,443 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:05:37,444 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:05:37,444 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1048984a0>
2023-06-25 01:05:37,521 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:05:37,524 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:05:37,524 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:05:37,524 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x104943a60>
2023-06-25 01:05:37,525 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:05:37,525 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:05:37,525 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x104942340>
2023-06-25 01:05:37,525 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x104965580>
2023-06-25 01:05:37,525 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x10389ee50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:05:37,525 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1052f8f90>>
2023-06-25 01:05:37,525 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x104943920>
2023-06-25 01:05:37,526 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:05:37,526 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220537Z

content-type;host;x-amz-date
8d00a29eb8d174631c49b398930f881929929ca9f64e3d6cad654fec9eeb1193
2023-06-25 01:05:37,526 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220537Z
20230624/us-east-1/sqs/aws4_request
9d87c95ef8d0f129f495a46837afc1f86d45129c1c6773bedb67b0f854ef542c
2023-06-25 01:05:37,526 [DEBUG] Signature:
c1f9f32690889a8d7ef0ae34ee88016149760345783b173830decfb503584809
2023-06-25 01:05:37,526 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x104965d00>
2023-06-25 01:05:37,526 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220537Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=c1f9f32690889a8d7ef0ae34ee88016149760345783b173830decfb503584809', 'amz-sdk-invocation-id': b'2978ffc0-dcf3-48e0-8232-582a5a634208', 'amz-sdk-request': b'attempt=1', 'Content-Length': '115'}>
2023-06-25 01:05:37,527 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:05:37,527 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:05:38,146 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 402
2023-06-25 01:05:38,146 [DEBUG] Response headers: {'x-amzn-RequestId': '6ec568a7-b4d6-573e-b953-35b6de24bf77', 'Date': 'Sat, 24 Jun 2023 22:05:38 GMT', 'Content-Type': 'text/xml', 'Content-Length': '402'}
2023-06-25 01:05:38,146 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>InvalidParameterValue</Code><Message>The name of a FIFO queue can only include alphanumeric characters, hyphens, or underscores, must end with .fifo suffix and be 1 to 80 in length.</Message><Detail/></Error><RequestId>6ec568a7-b4d6-573e-b953-35b6de24bf77</RequestId></ErrorResponse>'
2023-06-25 01:05:38,147 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x1052dc990>
2023-06-25 01:05:38,147 [DEBUG] No retry needed.
2023-06-25 01:05:38,154 [INFO] 127.0.0.1 - - [25/Jun/2023 01:05:38] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:07:06,519 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:07:07,099 [INFO]  * Restarting with stat
2023-06-25 01:07:07,295 [WARNING]  * Debugger is active!
2023-06-25 01:07:07,300 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:07:09,674 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 01:07:09,675 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 01:07:09,676 [INFO]  * Restarting with stat
2023-06-25 01:07:09,859 [WARNING]  * Debugger is active!
2023-06-25 01:07:09,864 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:07:11,605 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:07:11,606 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:07:11,606 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:07:11,607 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:07:11,607 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:07:11,607 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:07:11,608 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:07:11,609 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:07:11,609 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:07:11,609 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:07:11,609 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:07:11,611 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:07:11,618 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:07:11,618 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1070122a0>
2023-06-25 01:07:11,631 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:07:11,645 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:07:11,646 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:07:11,646 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x106f6c4a0>
2023-06-25 01:07:11,728 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:07:11,729 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:07:11,730 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:07:11,730 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x107013a60>
2023-06-25 01:07:11,730 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:07:11,731 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:07:11,731 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x107012340>
2023-06-25 01:07:11,731 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x107035580>
2023-06-25 01:07:11,731 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1095dca50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:07:11,731 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1095f9410>>
2023-06-25 01:07:11,731 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x107013920>
2023-06-25 01:07:11,732 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:07:11,732 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220711Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:07:11,732 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220711Z
20230624/us-east-1/sqs/aws4_request
3cd056965b3a9496bbd3a1efecd292c9a96310af678cb49eab623aeeb4a1a1f2
2023-06-25 01:07:11,732 [DEBUG] Signature:
47284e701b86c6b05439dad557e31649f35782e97260d95f1fa1aa80e1cc0df1
2023-06-25 01:07:11,732 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x107035d00>
2023-06-25 01:07:11,732 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220711Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=47284e701b86c6b05439dad557e31649f35782e97260d95f1fa1aa80e1cc0df1', 'amz-sdk-invocation-id': b'5ced26bb-29d1-49b3-be7e-6f121b3f3084', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:07:11,733 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:07:11,733 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:07:12,393 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:07:12,393 [DEBUG] Response headers: {'x-amzn-RequestId': '207db8c2-6561-5bb7-a1bd-e5d30e317baf', 'Date': 'Sat, 24 Jun 2023 22:07:12 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:07:12,393 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>207db8c2-6561-5bb7-a1bd-e5d30e317baf</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:07:12,393 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x109606e10>
2023-06-25 01:07:12,393 [DEBUG] No retry needed.
2023-06-25 01:07:13,884 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:07:13,885 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:07:13,897 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:07:14,336 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:07:14,337 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:07:14,337 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:07:14,337 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_20YKhc9qOCy0HX message='Dashboard link for request'
2023-06-25 01:07:14,339 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-25 01:07:14,339 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-25 01:07:14,791 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-25 01:07:14,792 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-25 01:07:14,792 [DEBUG] body='{\n  "id": "pi_3NMebuIJTenxdmPo0KLrjS4u",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMebuIJTenxdmPo0KLrjS4u_secret_136WrFR4R4mMNAlE1oh4BNTLT",\n  "confirmation_method": "automatic",\n  "created": 1687644434,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:07:14,793 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_dODJ3GP1rPg0rv message='Dashboard link for request'
2023-06-25 01:07:14,793 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF
2023-06-25 01:07:14,793 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMebuIJTenxdmPo0KLrjS4u
2023-06-25 01:07:15,158 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF HTTP/1.1" 200 4406
2023-06-25 01:07:15,159 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF response_code=200
2023-06-25 01:07:15,159 [DEBUG] body='{\n  "id": "in_1NMJJyIJTenxdmPowlAO2BHF",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562598,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426598,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFVcHdzelRHRVdtcjBZc0cxYTVIbGdYaGptNzhELDc4MTg1MjM102007UuFM8P4?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFVcHdzelRHRVdtcjBZc0cxYTVIbGdYaGptNzhELDc4MTg1MjM102007UuFM8P4/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJJzIJTenxdmPopXUpqwl8",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJJzIJTenxdmPorNIyxs4n",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562599,\n          "start": 1687562599\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMebuIJTenxdmPo0KLrjS4u"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0007",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562598,\n  "period_start": 1687562598,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687562610,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687562610,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562598\n}' message='API response body'
2023-06-25 01:07:15,159 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_QSbr6l9TWhiqc5 message='Dashboard link for request'
2023-06-25 01:07:15,160 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMebuIJTenxdmPo0KLrjS4u
2023-06-25 01:07:15,160 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:07:15,501 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMebuIJTenxdmPo0KLrjS4u HTTP/1.1" 200 1293
2023-06-25 01:07:15,502 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMebuIJTenxdmPo0KLrjS4u response_code=200
2023-06-25 01:07:15,502 [DEBUG] body='{\n  "id": "pi_3NMebuIJTenxdmPo0KLrjS4u",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMebuIJTenxdmPo0KLrjS4u_secret_136WrFR4R4mMNAlE1oh4BNTLT",\n  "confirmation_method": "automatic",\n  "created": 1687644434,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:07:15,502 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_u0Nk9DSvCRn0bp message='Dashboard link for request'
2023-06-25 01:07:15,503 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMebuIJTenxdmPo0KLrjS4u/confirm
2023-06-25 01:07:15,503 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-25 01:07:16,951 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMebuIJTenxdmPo0KLrjS4u/confirm HTTP/1.1" 200 1333
2023-06-25 01:07:16,952 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMebuIJTenxdmPo0KLrjS4u/confirm response_code=200
2023-06-25 01:07:16,953 [DEBUG] body='{\n  "id": "pi_3NMebuIJTenxdmPo0KLrjS4u",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMebuIJTenxdmPo0KLrjS4u_secret_136WrFR4R4mMNAlE1oh4BNTLT",\n  "confirmation_method": "automatic",\n  "created": 1687644434,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMebuIJTenxdmPo0zp1XcX8",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:07:16,953 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_cUAmReu8E3S36z message='Dashboard link for request'
2023-06-25 01:07:16,954 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF
2023-06-25 01:07:16,954 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-25 01:07:17,346 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF HTTP/1.1" 400 196
2023-06-25 01:07:17,348 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF response_code=400
2023-06-25 01:07:17,348 [DEBUG] body='{\n  "error": {\n    "message": "Invoice is already paid",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_HAui3HfV9P2tn1?t=1687644437",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-25 01:07:17,348 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_HAui3HfV9P2tn1 message='Dashboard link for request'
2023-06-25 01:07:17,348 [INFO] error_code=None error_message='Invoice is already paid' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-25 01:07:17,374 [INFO] 127.0.0.1 - - [25/Jun/2023 01:07:17] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:07:38,850 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1070122a0>
2023-06-25 01:07:38,851 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x106f6c4a0>
2023-06-25 01:07:38,928 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:07:38,932 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:07:38,934 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x107013a60>
2023-06-25 01:07:38,935 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:07:38,935 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:07:38,936 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x107012340>
2023-06-25 01:07:38,936 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x107035580>
2023-06-25 01:07:38,936 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1096d0750>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:07:38,936 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1096d0710>>
2023-06-25 01:07:38,937 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x107013920>
2023-06-25 01:07:38,938 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:07:38,938 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220738Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:07:38,938 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220738Z
20230624/us-east-1/sqs/aws4_request
7464db092052cc4c2166c60e382bd05651e1ee3f934b0902711e7afa8391ec74
2023-06-25 01:07:38,938 [DEBUG] Signature:
9b79b2787b3aa6239c08d5006bbcaf4a5f282985b18069a457ee8525bc3bde8f
2023-06-25 01:07:38,938 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x107035d00>
2023-06-25 01:07:38,938 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220738Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=9b79b2787b3aa6239c08d5006bbcaf4a5f282985b18069a457ee8525bc3bde8f', 'amz-sdk-invocation-id': b'c30d9a48-08ff-4464-b394-47328e5ab5ef', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:07:38,939 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:07:38,940 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:07:39,563 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:07:39,564 [DEBUG] Response headers: {'x-amzn-RequestId': '3f989545-53dd-5f61-ae73-c85438b6bfb2', 'Date': 'Sat, 24 Jun 2023 22:07:39 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:07:39,564 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>3f989545-53dd-5f61-ae73-c85438b6bfb2</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:07:39,564 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x1096d2990>
2023-06-25 01:07:39,564 [DEBUG] No retry needed.
2023-06-25 01:07:41,071 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:07:41,072 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:07:41,075 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:07:41,508 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:07:41,510 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:07:41,510 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:07:41,510 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_WForykH84ZiysJ message='Dashboard link for request'
2023-06-25 01:07:41,511 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-25 01:07:41,511 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-25 01:07:41,844 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-25 01:07:41,845 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-25 01:07:41,845 [DEBUG] body='{\n  "id": "pi_3NMecLIJTenxdmPo1tBeHrAc",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMecLIJTenxdmPo1tBeHrAc_secret_hwDS9vyiS2IK1hPVphR1YIX1v",\n  "confirmation_method": "automatic",\n  "created": 1687644461,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:07:41,845 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_sut3qEyqQwb5Mh message='Dashboard link for request'
2023-06-25 01:07:41,845 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF
2023-06-25 01:07:41,846 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMecLIJTenxdmPo1tBeHrAc
2023-06-25 01:07:42,193 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF HTTP/1.1" 200 4406
2023-06-25 01:07:42,193 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF response_code=200
2023-06-25 01:07:42,193 [DEBUG] body='{\n  "id": "in_1NMJJyIJTenxdmPowlAO2BHF",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 15000,\n  "amount_paid": 0,\n  "amount_remaining": 15000,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687562598,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "customer_address": null,\n  "customer_email": "ronen@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688426598,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFVcHdzelRHRVdtcjBZc0cxYTVIbGdYaGptNzhELDc4MTg1MjYy0200VEhY2LGJ?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POGFVcHdzelRHRVdtcjBZc0cxYTVIbGdYaGptNzhELDc4MTg1MjYy0200VEhY2LGJ/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [\n      {\n        "id": "il_1NMJJzIJTenxdmPopXUpqwl8",\n        "object": "line_item",\n        "amount": 15000,\n        "amount_excluding_tax": 15000,\n        "currency": "usd",\n        "description": "Premium",\n        "discount_amounts": [],\n        "discountable": true,\n        "discounts": [],\n        "invoice_item": "ii_1NMJJzIJTenxdmPorNIyxs4n",\n        "livemode": false,\n        "metadata": {},\n        "period": {\n          "end": 1687562599,\n          "start": 1687562599\n        },\n        "plan": null,\n        "price": {\n          "id": "price_1NMItbIJTenxdmPovfpzuTnK",\n          "object": "price",\n          "active": true,\n          "billing_scheme": "per_unit",\n          "created": 1687560963,\n          "currency": "usd",\n          "custom_unit_amount": null,\n          "livemode": false,\n          "lookup_key": null,\n          "metadata": {\n            "description": "Annual subscription",\n            "label": "Annual Plan"\n          },\n          "nickname": null,\n          "product": "prod_O8a3p03CbfmFd3",\n          "recurring": null,\n          "tax_behavior": "unspecified",\n          "tiers_mode": null,\n          "transform_quantity": null,\n          "type": "one_time",\n          "unit_amount": 15000,\n          "unit_amount_decimal": "15000"\n        },\n        "proration": false,\n        "proration_details": {\n          "credited_items": null\n        },\n        "quantity": 1,\n        "subscription": null,\n        "tax_amounts": [],\n        "tax_rates": [],\n        "type": "invoiceitem",\n        "unit_amount_excluding_tax": "15000"\n      }\n    ],\n    "has_more": false,\n    "total_count": 1,\n    "url": "/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMecLIJTenxdmPo1tBeHrAc"\n  },\n  "next_payment_attempt": null,\n  "number": "BA57087F-0007",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687562598,\n  "period_start": 1687562598,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687562610,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687562610,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 15000,\n  "subtotal_excluding_tax": 15000,\n  "tax": null,\n  "test_clock": null,\n  "total": 15000,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 15000,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687562598\n}' message='API response body'
2023-06-25 01:07:42,193 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Ai6x4yecAikW4W message='Dashboard link for request'
2023-06-25 01:07:42,194 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMecLIJTenxdmPo1tBeHrAc
2023-06-25 01:07:42,194 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:07:42,491 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMecLIJTenxdmPo1tBeHrAc HTTP/1.1" 200 1293
2023-06-25 01:07:42,491 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMecLIJTenxdmPo1tBeHrAc response_code=200
2023-06-25 01:07:42,491 [DEBUG] body='{\n  "id": "pi_3NMecLIJTenxdmPo1tBeHrAc",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMecLIJTenxdmPo1tBeHrAc_secret_hwDS9vyiS2IK1hPVphR1YIX1v",\n  "confirmation_method": "automatic",\n  "created": 1687644461,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:07:42,492 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_9Iek1Qd6uUdO3h message='Dashboard link for request'
2023-06-25 01:07:42,492 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMecLIJTenxdmPo1tBeHrAc/confirm
2023-06-25 01:07:42,492 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-25 01:07:43,687 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMecLIJTenxdmPo1tBeHrAc/confirm HTTP/1.1" 200 1333
2023-06-25 01:07:43,689 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMecLIJTenxdmPo1tBeHrAc/confirm response_code=200
2023-06-25 01:07:43,689 [DEBUG] body='{\n  "id": "pi_3NMecLIJTenxdmPo1tBeHrAc",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMecLIJTenxdmPo1tBeHrAc_secret_hwDS9vyiS2IK1hPVphR1YIX1v",\n  "confirmation_method": "automatic",\n  "created": 1687644461,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMecLIJTenxdmPo1wyhP1D8",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:07:43,689 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_rNKMCJqgEE7iV4 message='Dashboard link for request'
2023-06-25 01:07:43,690 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF
2023-06-25 01:07:43,690 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-25 01:07:44,082 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF HTTP/1.1" 400 196
2023-06-25 01:07:44,083 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMJJyIJTenxdmPowlAO2BHF response_code=400
2023-06-25 01:07:44,083 [DEBUG] body='{\n  "error": {\n    "message": "Invoice is already paid",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_9MSXKKxYbAbRCL?t=1687644464",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-25 01:07:44,084 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_9MSXKKxYbAbRCL message='Dashboard link for request'
2023-06-25 01:07:44,084 [INFO] error_code=None error_message='Invoice is already paid' error_param=None error_type=invalid_request_error message='Stripe API error received'
2023-06-25 01:07:44,098 [INFO] 127.0.0.1 - - [25/Jun/2023 01:07:44] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:08:12,758 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-25 01:08:12,759 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8adf8rLhNIJME&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-25 01:08:12,766 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:08:13,332 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2417
2023-06-25 01:08:13,333 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-25 01:08:13,333 [DEBUG] body='{\n  "id": "in_1NMecrIJTenxdmPo0jPunyBI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687644493,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8adf8rLhNIJME",\n  "customer_address": null,\n  "customer_email": "admin@testfivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688508493,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687644493,\n  "period_start": 1687644493,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687644493\n}' message='API response body'
2023-06-25 01:08:13,333 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_cVkUJcR1wf7oIL message='Dashboard link for request'
2023-06-25 01:08:14,086 [INFO] 127.0.0.1 - - [25/Jun/2023 01:08:14] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-25 01:08:23,099 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1070122a0>
2023-06-25 01:08:23,099 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x106f6c4a0>
2023-06-25 01:08:23,179 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:08:23,185 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:08:23,189 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x107013a60>
2023-06-25 01:08:23,190 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:08:23,190 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:08:23,191 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x107012340>
2023-06-25 01:08:23,191 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x107035580>
2023-06-25 01:08:23,191 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x109657010>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:08:23,191 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1096a41d0>>
2023-06-25 01:08:23,192 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x107013920>
2023-06-25 01:08:23,193 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:08:23,194 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220823Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:08:23,194 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220823Z
20230624/us-east-1/sqs/aws4_request
6697164538e395efd4f7ecbdc4abeba94bb40246e125087634b1d3fbdc2d16ac
2023-06-25 01:08:23,194 [DEBUG] Signature:
fd4eb2fb3e7bcfe178b5532ea7922fdb418e0f2021c918c422267672b90134ea
2023-06-25 01:08:23,194 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x107035d00>
2023-06-25 01:08:23,194 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220823Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=fd4eb2fb3e7bcfe178b5532ea7922fdb418e0f2021c918c422267672b90134ea', 'amz-sdk-invocation-id': b'03be3f13-c308-4ca5-9771-1baba9b95333', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:08:23,196 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:08:23,196 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:08:23,801 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:08:23,801 [DEBUG] Response headers: {'x-amzn-RequestId': 'd45d2c93-40fe-5ae2-a125-71822b695aa3', 'Date': 'Sat, 24 Jun 2023 22:08:23 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:08:23,801 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>d45d2c93-40fe-5ae2-a125-71822b695aa3</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:08:23,801 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x10aa26d50>
2023-06-25 01:08:23,801 [DEBUG] No retry needed.
2023-06-25 01:08:25,275 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:08:25,275 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:08:25,281 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:08:25,717 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:08:25,719 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:08:25,719 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:08:25,719 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_OvjXGY3nIjvTzS message='Dashboard link for request'
2023-06-25 01:08:25,720 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-25 01:08:25,720 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-25 01:08:26,057 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-25 01:08:26,058 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-25 01:08:26,058 [DEBUG] body='{\n  "id": "pi_3NMed4IJTenxdmPo1ONWtjRQ",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMed4IJTenxdmPo1ONWtjRQ_secret_ocQAIHreN3kwg5P96Mbh51QFb",\n  "confirmation_method": "automatic",\n  "created": 1687644506,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:08:26,058 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zDUc6IvcmHB12X message='Dashboard link for request'
2023-06-25 01:08:26,058 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI
2023-06-25 01:08:26,058 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMed4IJTenxdmPo1ONWtjRQ
2023-06-25 01:08:26,389 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI HTTP/1.1" 200 2472
2023-06-25 01:08:26,390 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI response_code=200
2023-06-25 01:08:26,390 [DEBUG] body='{\n  "id": "in_1NMecrIJTenxdmPo0jPunyBI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687644493,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8adf8rLhNIJME",\n  "customer_address": null,\n  "customer_email": "admin@testfivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688508493,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMed4IJTenxdmPo1ONWtjRQ"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687644493,\n  "period_start": 1687644493,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687644493\n}' message='API response body'
2023-06-25 01:08:26,390 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_zsaJjRZMxLVbkk message='Dashboard link for request'
2023-06-25 01:08:26,391 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMed4IJTenxdmPo1ONWtjRQ
2023-06-25 01:08:26,391 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:08:26,714 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMed4IJTenxdmPo1ONWtjRQ HTTP/1.1" 200 1293
2023-06-25 01:08:26,715 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMed4IJTenxdmPo1ONWtjRQ response_code=200
2023-06-25 01:08:26,715 [DEBUG] body='{\n  "id": "pi_3NMed4IJTenxdmPo1ONWtjRQ",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMed4IJTenxdmPo1ONWtjRQ_secret_ocQAIHreN3kwg5P96Mbh51QFb",\n  "confirmation_method": "automatic",\n  "created": 1687644506,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:08:26,715 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_SVEALQhwMFDnLr message='Dashboard link for request'
2023-06-25 01:08:26,717 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMed4IJTenxdmPo1ONWtjRQ/confirm
2023-06-25 01:08:26,717 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-25 01:08:27,814 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMed4IJTenxdmPo1ONWtjRQ/confirm HTTP/1.1" 200 1333
2023-06-25 01:08:27,815 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMed4IJTenxdmPo1ONWtjRQ/confirm response_code=200
2023-06-25 01:08:27,816 [DEBUG] body='{\n  "id": "pi_3NMed4IJTenxdmPo1ONWtjRQ",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMed4IJTenxdmPo1ONWtjRQ_secret_ocQAIHreN3kwg5P96Mbh51QFb",\n  "confirmation_method": "automatic",\n  "created": 1687644506,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMed4IJTenxdmPo1zVx9RCI",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 01:08:27,816 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_m6v7HGmwXjHV7n message='Dashboard link for request'
2023-06-25 01:08:27,817 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI
2023-06-25 01:08:27,817 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-25 01:08:28,410 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI HTTP/1.1" 200 2806
2023-06-25 01:08:28,412 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI response_code=200
2023-06-25 01:08:28,412 [DEBUG] body='{\n  "id": "in_1NMecrIJTenxdmPo0jPunyBI",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687644493,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8adf8rLhNIJME",\n  "customer_address": null,\n  "customer_email": "admin@testfivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688508493,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POHdWb1NvRGU4Z3BnUFdTeFhFNjVTMjJqRWNtb0Y4LDc4MTg1MzA40200VK6QPpRJ?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POHdWb1NvRGU4Z3BnUFdTeFhFNjVTMjJqRWNtb0Y4LDc4MTg1MzA40200VK6QPpRJ/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMecrIJTenxdmPo0jPunyBI/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMed4IJTenxdmPo1ONWtjRQ"\n  },\n  "next_payment_attempt": null,\n  "number": "CC3D4706-0001",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687644493,\n  "period_start": 1687644493,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687644508,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687644508,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687644493\n}' message='API response body'
2023-06-25 01:08:28,412 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_UoDHhTLnXuUFMH message='Dashboard link for request'
2023-06-25 01:08:29,155 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x107013a60>
2023-06-25 01:08:29,156 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:08:29,156 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:08:29,157 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x107012340>
2023-06-25 01:08:29,157 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x107035580>
2023-06-25 01:08:29,157 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NMecrIJTenxdmPo0jPunyBI", "accountId": 6, "quota": {"credits": 500, "seats": 3}}'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x109657010>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:08:29,158 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1096a41d0>>
2023-06-25 01:08:29,159 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x107013920>
2023-06-25 01:08:29,160 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:08:29,160 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T220829Z

content-type;host;x-amz-date
9313bf33cd9a5204581a3e72f0b2a5398a827eda751af2602524e3829da34753
2023-06-25 01:08:29,160 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T220829Z
20230624/us-east-1/sqs/aws4_request
7c0e799e61fc7e7f4f2dd9f84a1b7f0bfee63b6561b02438a16363da36a31fe9
2023-06-25 01:08:29,160 [DEBUG] Signature:
7e740bea4f099b0bf10c25e951dbf9519ca85d9cdae4d3636cee3f5c211edb3a
2023-06-25 01:08:29,161 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x107035d00>
2023-06-25 01:08:29,161 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T220829Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=7e740bea4f099b0bf10c25e951dbf9519ca85d9cdae4d3636cee3f5c211edb3a', 'amz-sdk-invocation-id': b'421ddb67-52e9-48c1-8c71-2d6e080399d0', 'amz-sdk-request': b'attempt=1', 'Content-Length': '288'}>
2023-06-25 01:08:29,161 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:08:29,304 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 307
2023-06-25 01:08:29,304 [DEBUG] Response headers: {'x-amzn-RequestId': '4e7a027f-1f3d-5a2a-b5a4-5f6e74a0da6b', 'Date': 'Sat, 24 Jun 2023 22:08:29 GMT', 'Content-Type': 'text/xml', 'Content-Length': '307'}
2023-06-25 01:08:29,305 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>MissingParameter</Code><Message>The request must contain the parameter MessageGroupId.</Message><Detail/></Error><RequestId>4e7a027f-1f3d-5a2a-b5a4-5f6e74a0da6b</RequestId></ErrorResponse>'
2023-06-25 01:08:29,305 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x10aa26d50>
2023-06-25 01:08:29,305 [DEBUG] No retry needed.
2023-06-25 01:08:29,312 [INFO] 127.0.0.1 - - [25/Jun/2023 01:08:29] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:08:58,217 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-25 01:08:58,725 [INFO]  * Restarting with stat
2023-06-25 01:08:58,978 [WARNING]  * Debugger is active!
2023-06-25 01:08:58,983 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:10:07,562 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-25 01:10:07,605 [INFO]  * Restarting with stat
2023-06-25 01:10:07,784 [WARNING]  * Debugger is active!
2023-06-25 01:10:07,788 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:10:09,524 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:10:09,526 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:10:09,526 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:10:09,527 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:10:09,528 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:10:09,528 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:10:09,529 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:10:09,531 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:10:09,531 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:10:09,531 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:10:09,531 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:10:09,533 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:10:09,543 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:10:09,543 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x106f3e2a0>
2023-06-25 01:10:09,556 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:10:09,567 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:10:09,568 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:10:09,568 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x106e984a0>
2023-06-25 01:10:09,645 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:10:09,646 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:10:09,647 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:10:09,647 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x106f3fa60>
2023-06-25 01:10:09,647 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:10:09,648 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:10:09,648 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x106f3e340>
2023-06-25 01:10:09,648 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x106f61580>
2023-06-25 01:10:09,648 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1078f9150>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:10:09,648 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1078f9110>>
2023-06-25 01:10:09,648 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x106f3f920>
2023-06-25 01:10:09,649 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:10:09,649 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221009Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:10:09,649 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221009Z
20230624/us-east-1/sqs/aws4_request
06e8ae61a29c1a43ff98203a1766ee463c4522def7508542e790f7b3172bfa8f
2023-06-25 01:10:09,649 [DEBUG] Signature:
7407f90122efbb1ca62e53ba5961b69d64ce1d476790bf89f20e45e3736f024d
2023-06-25 01:10:09,649 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x106f61d00>
2023-06-25 01:10:09,649 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221009Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=7407f90122efbb1ca62e53ba5961b69d64ce1d476790bf89f20e45e3736f024d', 'amz-sdk-invocation-id': b'e45e63bd-69a7-4c01-8e9b-f05cde5b5740', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:10:09,649 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:10:09,649 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:10:10,283 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:10:10,284 [DEBUG] Response headers: {'x-amzn-RequestId': 'b8d7174c-b019-527b-87bc-4a5ddc1bba19', 'Date': 'Sat, 24 Jun 2023 22:10:10 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:10:10,284 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>b8d7174c-b019-527b-87bc-4a5ddc1bba19</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:10:10,288 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x1078dca90>
2023-06-25 01:10:10,288 [DEBUG] No retry needed.
2023-06-25 01:10:11,790 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:10:11,791 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:10:11,804 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:10:12,209 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:10:12,209 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:10:12,210 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:10:12,210 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_nq8kg0adAvaYfC message='Dashboard link for request'
2023-06-25 01:10:12,217 [INFO] 127.0.0.1 - - [25/Jun/2023 01:10:12] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:10:28,104 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-25 01:10:29,482 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 01:10:29,482 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 01:10:29,483 [INFO]  * Restarting with stat
2023-06-25 01:10:29,667 [WARNING]  * Debugger is active!
2023-06-25 01:10:29,671 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:10:34,831 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:10:34,832 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:10:34,832 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:10:34,833 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:10:34,833 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:10:34,833 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:10:34,833 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:10:34,835 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:10:34,835 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:10:34,835 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:10:34,835 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:10:34,836 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:10:34,843 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:10:34,843 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1026362a0>
2023-06-25 01:10:34,854 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:10:34,866 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:10:34,866 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:10:34,867 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1025904a0>
2023-06-25 01:10:34,877 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:10:34,878 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:10:34,878 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:10:34,878 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x102637a60>
2023-06-25 01:10:34,878 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:10:34,878 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:10:34,879 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x102636340>
2023-06-25 01:10:34,879 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x102659580>
2023-06-25 01:10:34,879 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1032f9350>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:10:34,879 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1032f9310>>
2023-06-25 01:10:34,879 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x102637920>
2023-06-25 01:10:34,879 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:10:34,879 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221034Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:10:34,879 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221034Z
20230624/us-east-1/sqs/aws4_request
c64b6d2366d5d0a45f92ec8a4a9ca3de9403a2b7384c7d59f2451c9c9bff1d18
2023-06-25 01:10:34,879 [DEBUG] Signature:
2be157c9ca1f172c6b19d29cb1bc103255a7796dabd54f4ddf8d96a0f9e5a3d6
2023-06-25 01:10:34,879 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x102659d00>
2023-06-25 01:10:34,879 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221034Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=2be157c9ca1f172c6b19d29cb1bc103255a7796dabd54f4ddf8d96a0f9e5a3d6', 'amz-sdk-invocation-id': b'bfe97d3b-7bd9-4cfb-bc5d-831b9d53f2b9', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:10:34,880 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:10:34,880 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:10:35,486 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:10:35,486 [DEBUG] Response headers: {'x-amzn-RequestId': '2d6f79c9-682b-50e0-9564-24d80430bcc2', 'Date': 'Sat, 24 Jun 2023 22:10:35 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:10:35,486 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>2d6f79c9-682b-50e0-9564-24d80430bcc2</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:10:35,486 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x101b986d0>
2023-06-25 01:10:35,486 [DEBUG] No retry needed.
2023-06-25 01:10:36,980 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:10:36,980 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:10:36,986 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:10:37,398 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:10:37,399 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:10:37,399 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:10:37,399 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_639RCGuUyU4bNZ message='Dashboard link for request'
2023-06-25 01:10:37,400 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x102637a60>
2023-06-25 01:10:37,400 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:10:37,400 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:10:37,400 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x102636340>
2023-06-25 01:10:37,400 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x102659580>
2023-06-25 01:10:37,400 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NMecrIJTenxdmPo0jPunyBI", "accountId": 6, "quota": {"credits": 500, "seats": 3}}'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1032f9350>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:10:37,400 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1032f9310>>
2023-06-25 01:10:37,400 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x102637920>
2023-06-25 01:10:37,400 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:10:37,400 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221037Z

content-type;host;x-amz-date
9313bf33cd9a5204581a3e72f0b2a5398a827eda751af2602524e3829da34753
2023-06-25 01:10:37,400 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221037Z
20230624/us-east-1/sqs/aws4_request
bb1dac54802b30461ea14a1713e36b726c0bd824d72d14fd7a4057a824d42ce8
2023-06-25 01:10:37,400 [DEBUG] Signature:
ed98c419ffb58d0b44ae1b229d5961e45506050ffad5aad47d1deafac44a1ee2
2023-06-25 01:10:37,400 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x102659d00>
2023-06-25 01:10:37,401 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221037Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=ed98c419ffb58d0b44ae1b229d5961e45506050ffad5aad47d1deafac44a1ee2', 'amz-sdk-invocation-id': b'82c84247-3a68-41f5-a271-f356cb40a1f8', 'amz-sdk-request': b'attempt=1', 'Content-Length': '288'}>
2023-06-25 01:10:37,401 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:10:37,544 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 307
2023-06-25 01:10:37,545 [DEBUG] Response headers: {'x-amzn-RequestId': 'd2a26d20-f0f5-563b-83fc-30319ce87a19', 'Date': 'Sat, 24 Jun 2023 22:10:37 GMT', 'Content-Type': 'text/xml', 'Content-Length': '307'}
2023-06-25 01:10:37,545 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>MissingParameter</Code><Message>The request must contain the parameter MessageGroupId.</Message><Detail/></Error><RequestId>d2a26d20-f0f5-563b-83fc-30319ce87a19</RequestId></ErrorResponse>'
2023-06-25 01:10:37,546 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x101b986d0>
2023-06-25 01:10:37,546 [DEBUG] No retry needed.
2023-06-25 01:10:37,555 [INFO] 127.0.0.1 - - [25/Jun/2023 01:10:37] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:11:42,234 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:11:42,499 [INFO]  * Restarting with stat
2023-06-25 01:12:06,922 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 01:12:06,922 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 01:12:06,922 [INFO]  * Restarting with stat
2023-06-25 01:12:07,100 [WARNING]  * Debugger is active!
2023-06-25 01:12:07,104 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:12:08,144 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:12:08,145 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:12:08,146 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:12:08,147 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:12:08,147 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:12:08,148 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:12:08,148 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:12:08,150 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:12:08,150 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:12:08,150 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:12:08,150 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:12:08,151 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:12:08,163 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:12:08,163 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x106b922a0>
2023-06-25 01:12:08,175 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:12:08,188 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:12:08,188 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:12:08,188 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x106ae84a0>
2023-06-25 01:12:08,364 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:12:08,365 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:12:08,365 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:12:08,366 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x106b93a60>
2023-06-25 01:12:08,366 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:12:08,366 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:12:08,366 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x106b92340>
2023-06-25 01:12:08,366 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x106bb5580>
2023-06-25 01:12:08,366 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1109f9210>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:12:08,367 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1109f91d0>>
2023-06-25 01:12:08,367 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x106b93920>
2023-06-25 01:12:08,367 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:12:08,367 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221208Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:12:08,367 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221208Z
20230624/us-east-1/sqs/aws4_request
b144d23d790642b95c9df2e5f4cd2bcb3b22c484fbe9f0530ae8a9dbff53f6ed
2023-06-25 01:12:08,367 [DEBUG] Signature:
9663205978f404d97f803cbf6c31c5cf21fd3ef53a2b3718bfa061b2dc9915c8
2023-06-25 01:12:08,367 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x106bb5d00>
2023-06-25 01:12:08,367 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221208Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=9663205978f404d97f803cbf6c31c5cf21fd3ef53a2b3718bfa061b2dc9915c8', 'amz-sdk-invocation-id': b'260d2b1d-d7a8-4caa-9681-30f307724079', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:12:08,368 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:12:08,368 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:12:09,066 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:12:09,066 [DEBUG] Response headers: {'x-amzn-RequestId': '3aaaad48-d264-5a77-848f-f059be1d5055', 'Date': 'Sat, 24 Jun 2023 22:12:09 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:12:09,066 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>3aaaad48-d264-5a77-848f-f059be1d5055</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:12:09,067 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x110a06bd0>
2023-06-25 01:12:09,067 [DEBUG] No retry needed.
2023-06-25 01:12:10,563 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:12:10,563 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:12:10,575 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:12:11,014 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:12:11,016 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:12:11,016 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:12:11,016 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_xHoFCnphXcEY29 message='Dashboard link for request'
2023-06-25 01:12:11,020 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x106b93a60>
2023-06-25 01:12:11,020 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:12:11,020 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:12:11,034 [INFO] 127.0.0.1 - - [25/Jun/2023 01:12:11] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:12:23,213 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:12:23,770 [INFO]  * Restarting with stat
2023-06-25 01:12:23,951 [WARNING]  * Debugger is active!
2023-06-25 01:12:23,956 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:12:25,017 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:12:25,018 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:12:25,018 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:12:25,019 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:12:25,019 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:12:25,019 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:12:25,019 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:12:25,021 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:12:25,021 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:12:25,021 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:12:25,021 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:12:25,022 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:12:25,029 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:12:25,029 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1072762a0>
2023-06-25 01:12:25,040 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:12:25,057 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:12:25,057 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:12:25,058 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1071cc4a0>
2023-06-25 01:12:25,136 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:12:25,137 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:12:25,137 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:12:25,137 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x107277a60>
2023-06-25 01:12:25,137 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:12:25,138 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:12:25,138 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x107276340>
2023-06-25 01:12:25,138 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x107299580>
2023-06-25 01:12:25,138 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1061d2e50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:12:25,138 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x107d40b50>>
2023-06-25 01:12:25,138 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x107277920>
2023-06-25 01:12:25,138 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:12:25,138 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221225Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:12:25,138 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221225Z
20230624/us-east-1/sqs/aws4_request
90025bba93438fffb4551fa702aae968336f3b6d4e9c4f5b42289b9a4e4bec77
2023-06-25 01:12:25,138 [DEBUG] Signature:
e09a921b766e58b3ba95a6663b6a77de7217fd80167d33551b867d36ef111238
2023-06-25 01:12:25,138 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x107299d00>
2023-06-25 01:12:25,138 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221225Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=e09a921b766e58b3ba95a6663b6a77de7217fd80167d33551b867d36ef111238', 'amz-sdk-invocation-id': b'0c8884b4-9bbf-4d15-9b65-cf31f0192bce', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:12:25,139 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:12:25,139 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:12:25,734 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:12:25,734 [DEBUG] Response headers: {'x-amzn-RequestId': '73304330-c091-5985-8233-1e21ac18d979', 'Date': 'Sat, 24 Jun 2023 22:12:25 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:12:25,734 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>73304330-c091-5985-8233-1e21ac18d979</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:12:25,734 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x107d42fd0>
2023-06-25 01:12:25,735 [DEBUG] No retry needed.
2023-06-25 01:12:27,226 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:12:27,226 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:12:27,238 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:12:27,648 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:12:27,649 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:12:27,650 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:12:27,650 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_HHCGYa0udYtK09 message='Dashboard link for request'
2023-06-25 01:12:27,653 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x107277a60>
2023-06-25 01:12:27,654 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:12:27,654 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:12:27,667 [INFO] 127.0.0.1 - - [25/Jun/2023 01:12:27] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:12:47,596 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:12:48,137 [INFO]  * Restarting with stat
2023-06-25 01:12:48,313 [WARNING]  * Debugger is active!
2023-06-25 01:12:48,317 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:12:50,635 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:12:50,636 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:12:50,637 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:12:50,637 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:12:50,637 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:12:50,638 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:12:50,638 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:12:50,639 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:12:50,639 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:12:50,639 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:12:50,639 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:12:50,641 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:12:50,647 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:12:50,647 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1103922a0>
2023-06-25 01:12:50,657 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:12:50,669 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:12:50,669 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:12:50,669 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1101e84a0>
2023-06-25 01:12:50,680 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:12:50,681 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:12:50,681 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:12:50,682 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x110393a60>
2023-06-25 01:12:50,682 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:12:50,682 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:12:50,682 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x110392340>
2023-06-25 01:12:50,682 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1103b5580>
2023-06-25 01:12:50,682 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1128f9510>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:12:50,682 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1128f94d0>>
2023-06-25 01:12:50,683 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x110393920>
2023-06-25 01:12:50,683 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:12:50,683 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221250Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:12:50,683 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221250Z
20230624/us-east-1/sqs/aws4_request
6415845f8cc78f4b8fb0e20f0414bc41c92230b9598f8a7d4f8861c4126fe323
2023-06-25 01:12:50,683 [DEBUG] Signature:
a5395da9cc5f0a48a79bee210b963ac7ca680371a6a5cd43f91862369a746e56
2023-06-25 01:12:50,683 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1103b5d00>
2023-06-25 01:12:50,683 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221250Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=a5395da9cc5f0a48a79bee210b963ac7ca680371a6a5cd43f91862369a746e56', 'amz-sdk-invocation-id': b'fec41dd0-603d-4e35-b3aa-dc03d2ff54dc', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:12:50,683 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:12:50,683 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:12:51,271 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:12:51,272 [DEBUG] Response headers: {'x-amzn-RequestId': '421bae44-20e1-5714-b6d3-f3554c42a3ca', 'Date': 'Sat, 24 Jun 2023 22:12:51 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:12:51,272 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>421bae44-20e1-5714-b6d3-f3554c42a3ca</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:12:51,272 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x1128dccd0>
2023-06-25 01:12:51,272 [DEBUG] No retry needed.
2023-06-25 01:12:52,759 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:12:52,759 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:12:52,762 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:12:53,187 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:12:53,187 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:12:53,188 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:12:53,188 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_0Os5vTIXKvGxQu message='Dashboard link for request'
2023-06-25 01:12:53,189 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x110393a60>
2023-06-25 01:12:53,189 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:12:53,189 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:12:53,199 [INFO] 127.0.0.1 - - [25/Jun/2023 01:12:53] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:13:14,890 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-25 01:13:14,890 [INFO] [33mPress CTRL+C to quit[0m
2023-06-25 01:13:14,891 [INFO]  * Restarting with stat
2023-06-25 01:13:15,078 [WARNING]  * Debugger is active!
2023-06-25 01:13:15,082 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:13:16,860 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:13:16,861 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:13:16,862 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:13:16,863 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:13:16,863 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:13:16,863 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:13:16,864 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:13:16,865 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:13:16,866 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:13:16,866 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:13:16,866 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:13:16,867 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:13:16,875 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:13:16,875 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x104d8e2a0>
2023-06-25 01:13:16,889 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:13:16,904 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:13:16,904 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:13:16,905 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x104ce44a0>
2023-06-25 01:13:16,986 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:13:16,987 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:13:16,988 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:13:16,988 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x104d8fa60>
2023-06-25 01:13:16,988 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:13:16,989 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:13:16,989 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x104d8e340>
2023-06-25 01:13:16,989 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x104db1580>
2023-06-25 01:13:16,989 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x103ceae50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:13:16,989 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1057f9410>>
2023-06-25 01:13:16,990 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x104d8f920>
2023-06-25 01:13:16,990 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:13:16,990 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221316Z

content-type;host;x-amz-date
6feba7c7b0fdd8e642e7bbd865d3b47af371fda7e64b6f1bb1285ffacbb23ca1
2023-06-25 01:13:16,990 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221316Z
20230624/us-east-1/sqs/aws4_request
49ce255e3a1a5cd83f6aaf0d8e064f21390be2994a7f0d53ec406a9d1dbab58b
2023-06-25 01:13:16,990 [DEBUG] Signature:
04f52efe5619bc85033142f48820f6a68be979fa578c3cb3454b9c1d0b592db0
2023-06-25 01:13:16,990 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x104db1d00>
2023-06-25 01:13:16,990 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221316Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=04f52efe5619bc85033142f48820f6a68be979fa578c3cb3454b9c1d0b592db0', 'amz-sdk-invocation-id': b'200da6ee-b4b3-4a52-8c0a-da4938f40754', 'amz-sdk-request': b'attempt=1', 'Content-Length': '120'}>
2023-06-25 01:13:16,991 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:13:16,991 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:13:17,618 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:13:17,620 [DEBUG] Response headers: {'x-amzn-RequestId': 'd5102b1e-7ac2-5751-a146-760f167fde6a', 'Date': 'Sat, 24 Jun 2023 22:13:17 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:13:17,620 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>d5102b1e-7ac2-5751-a146-760f167fde6a</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:13:17,621 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x105806c90>
2023-06-25 01:13:17,621 [DEBUG] No retry needed.
2023-06-25 01:13:19,146 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:13:19,146 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:13:19,152 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:13:19,567 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:13:19,568 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:13:19,568 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:13:19,568 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_8N3GrkUJFTckVL message='Dashboard link for request'
2023-06-25 01:13:19,569 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x104d8fa60>
2023-06-25 01:13:19,569 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:13:19,569 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:13:19,570 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x104d8e340>
2023-06-25 01:13:19,570 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x104db1580>
2023-06-25 01:13:19,570 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NMecrIJTenxdmPo0jPunyBI", "accountId": 6, "quota": {"credits": 500, "seats": 3}}', 'MessageGroupId': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x103ceae50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:13:19,570 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1057f9410>>
2023-06-25 01:13:19,570 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x104d8f920>
2023-06-25 01:13:19,570 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:13:19,570 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221319Z

content-type;host;x-amz-date
320763b50eb4ee4dba29e4ca90745c9c117456c140863546118c883143b64666
2023-06-25 01:13:19,570 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221319Z
20230624/us-east-1/sqs/aws4_request
67b25868af4c6480b9b32d4c255bf132dd9dbd6bcde844630883a5f1754e62f6
2023-06-25 01:13:19,571 [DEBUG] Signature:
5565f84092cdccf3c4611b5611ad07f9872ceb85d3a9cd7473ff4e98df1f2004
2023-06-25 01:13:19,571 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x104db1d00>
2023-06-25 01:13:19,571 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221319Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=5565f84092cdccf3c4611b5611ad07f9872ceb85d3a9cd7473ff4e98df1f2004', 'amz-sdk-invocation-id': b'0b6a4c0b-ad0b-4733-8691-8f3f301e90f6', 'amz-sdk-request': b'attempt=1', 'Content-Length': '385'}>
2023-06-25 01:13:19,571 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:13:19,725 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 366
2023-06-25 01:13:19,728 [DEBUG] Response headers: {'x-amzn-RequestId': '4ba9ff90-df84-5783-822d-a281b33baeb8', 'Date': 'Sat, 24 Jun 2023 22:13:19 GMT', 'Content-Type': 'text/xml', 'Content-Length': '366'}
2023-06-25 01:13:19,728 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>InvalidParameterValue</Code><Message>The queue should either have ContentBasedDeduplication enabled or MessageDeduplicationId provided explicitly</Message><Detail/></Error><RequestId>4ba9ff90-df84-5783-822d-a281b33baeb8</RequestId></ErrorResponse>'
2023-06-25 01:13:19,730 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x105806c90>
2023-06-25 01:13:19,730 [DEBUG] No retry needed.
2023-06-25 01:13:19,742 [INFO] 127.0.0.1 - - [25/Jun/2023 01:13:19] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:14:23,903 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/adapter/aws_sqs_adapter.py', reloading
2023-06-25 01:14:24,449 [INFO]  * Restarting with stat
2023-06-25 01:14:24,621 [WARNING]  * Debugger is active!
2023-06-25 01:14:24,625 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 01:14:35,126 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 01:14:35,127 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 01:14:35,127 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 01:14:35,128 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 01:14:35,128 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 01:14:35,129 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 01:14:35,129 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 01:14:35,130 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 01:14:35,130 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 01:14:35,131 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 01:14:35,131 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 01:14:35,132 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 01:14:35,139 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 01:14:35,140 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:14:35,152 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 01:14:35,166 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 01:14:35,166 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 01:14:35,166 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:14:35,245 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:14:35,246 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 01:14:35,246 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:14:35,247 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:14:35,247 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:14:35,247 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:14:35,248 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:14:35,248 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:14:35,248 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x106df9290>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:14:35,248 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x106df9250>>
2023-06-25 01:14:35,248 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:14:35,248 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:14:35,248 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221435Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:14:35,249 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221435Z
20230624/us-east-1/sqs/aws4_request
c6ab9f5743aeb46c46a3ec48bb63ef785bcf68d8dc911f98242edd8c49e08b72
2023-06-25 01:14:35,249 [DEBUG] Signature:
7b5197fed2ecd1e427d4e3ca9f48d90ce6dd45061e7822c052ff2020a6d3f269
2023-06-25 01:14:35,249 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:14:35,249 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221435Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=7b5197fed2ecd1e427d4e3ca9f48d90ce6dd45061e7822c052ff2020a6d3f269', 'amz-sdk-invocation-id': b'44875f16-826a-4436-adad-e826b5297bb8', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:14:35,249 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:14:35,249 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:14:35,947 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:14:35,947 [DEBUG] Response headers: {'x-amzn-RequestId': 'e1a06620-09d0-5ea3-ac72-3b3164dc162d', 'Date': 'Sat, 24 Jun 2023 22:14:36 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:14:35,947 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>e1a06620-09d0-5ea3-ac72-3b3164dc162d</RequestId></ErrorResponse>'
2023-06-25 01:14:35,949 [DEBUG] Response headers: {'x-amzn-RequestId': 'e1a06620-09d0-5ea3-ac72-3b3164dc162d', 'Date': 'Sat, 24 Jun 2023 22:14:36 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:14:35,949 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>e1a06620-09d0-5ea3-ac72-3b3164dc162d</RequestId></ErrorResponse>'
2023-06-25 01:14:35,949 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x106e02b90>
2023-06-25 01:14:35,949 [DEBUG] No retry needed.
2023-06-25 01:14:35,963 [INFO] 127.0.0.1 - - [25/Jun/2023 01:14:35] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:14:50,965 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:14:50,967 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:14:51,048 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:14:51,050 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:14:51,052 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:14:51,053 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:14:51,053 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:14:51,054 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:14:51,055 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:14:51,055 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x106ee9790>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:14:51,056 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x106ee9750>>
2023-06-25 01:14:51,056 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:14:51,057 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:14:51,057 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221451Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:14:51,057 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221451Z
20230624/us-east-1/sqs/aws4_request
0ef92acc31b85ff43758b3a38f8d520cf02acd454d8b87de6db6d7385a8de557
2023-06-25 01:14:51,059 [DEBUG] Signature:
3ed43e2340b2b71b2f6b32fa946710d7f2dadd4acf2f4a74468409e63f9f9ca1
2023-06-25 01:14:51,059 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:14:51,059 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221451Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=3ed43e2340b2b71b2f6b32fa946710d7f2dadd4acf2f4a74468409e63f9f9ca1', 'amz-sdk-invocation-id': b'0fbb297e-4dfc-4cff-9367-9df6faec0e3e', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:14:51,060 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:14:51,060 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:14:51,691 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:14:51,691 [DEBUG] Response headers: {'x-amzn-RequestId': '336ac016-041d-58a9-896b-9d0769061997', 'Date': 'Sat, 24 Jun 2023 22:14:51 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:14:51,691 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>336ac016-041d-58a9-896b-9d0769061997</RequestId></ErrorResponse>'
2023-06-25 01:14:51,691 [DEBUG] Response headers: {'x-amzn-RequestId': '336ac016-041d-58a9-896b-9d0769061997', 'Date': 'Sat, 24 Jun 2023 22:14:51 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:14:51,692 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>336ac016-041d-58a9-896b-9d0769061997</RequestId></ErrorResponse>'
2023-06-25 01:14:51,692 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x106eeb8d0>
2023-06-25 01:14:51,692 [DEBUG] No retry needed.
2023-06-25 01:14:51,697 [INFO] 127.0.0.1 - - [25/Jun/2023 01:14:51] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:15:07,766 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:15:07,766 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:15:07,841 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:15:07,844 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:15:07,848 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:07,849 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:07,849 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:07,850 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:07,850 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:07,850 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1078e0750>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:07,850 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1078e0710>>
2023-06-25 01:15:07,850 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:07,851 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:07,851 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221507Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:15:07,851 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221507Z
20230624/us-east-1/sqs/aws4_request
be99d3edec6349d89c3826ba1b3532df06c0a161873ac0e3d5c98c57cbae1f91
2023-06-25 01:15:07,851 [DEBUG] Signature:
dd966bf79112c142d6a78cd611386a4761ca1231717b02e872add7c7a66053b5
2023-06-25 01:15:07,852 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:07,852 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221507Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=dd966bf79112c142d6a78cd611386a4761ca1231717b02e872add7c7a66053b5', 'amz-sdk-invocation-id': b'efbceb02-7ca8-4a56-8d65-eaa68a53f303', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:15:07,853 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:07,853 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:15:08,447 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:15:08,448 [DEBUG] Response headers: {'x-amzn-RequestId': 'a4256829-71df-5778-b6f2-35381cf38095', 'Date': 'Sat, 24 Jun 2023 22:15:08 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:08,448 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>a4256829-71df-5778-b6f2-35381cf38095</RequestId></ErrorResponse>'
2023-06-25 01:15:08,450 [DEBUG] Response headers: {'x-amzn-RequestId': 'a4256829-71df-5778-b6f2-35381cf38095', 'Date': 'Sat, 24 Jun 2023 22:15:08 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:08,450 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>a4256829-71df-5778-b6f2-35381cf38095</RequestId></ErrorResponse>'
2023-06-25 01:15:08,451 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x1078be310>
2023-06-25 01:15:08,451 [DEBUG] No retry needed.
2023-06-25 01:15:08,464 [INFO] 127.0.0.1 - - [25/Jun/2023 01:15:08] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:15:19,093 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:15:19,093 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:15:19,097 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:15:19,097 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:15:19,098 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:19,098 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:19,098 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:19,098 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:19,098 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:19,098 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x106e3c650>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:19,098 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x107943050>>
2023-06-25 01:15:19,098 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:19,098 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:19,098 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221519Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:15:19,098 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221519Z
20230624/us-east-1/sqs/aws4_request
35098cb3d9d379b1ba317ab4a5280ddf615a7ff08c1c307eae7678d5033bc864
2023-06-25 01:15:19,098 [DEBUG] Signature:
f6544af49eb67a63b4120ad8e9b58854702f867d6bee7ff804039199b233c755
2023-06-25 01:15:19,098 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:19,099 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221519Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=f6544af49eb67a63b4120ad8e9b58854702f867d6bee7ff804039199b233c755', 'amz-sdk-invocation-id': b'5ffbd24e-d6be-4a9e-aaf6-3e9ed4e1a304', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:15:19,099 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:19,099 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:15:19,742 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:15:19,743 [DEBUG] Response headers: {'x-amzn-RequestId': 'dc4627f6-3e42-5d61-8d3d-7ae7537565af', 'Date': 'Sat, 24 Jun 2023 22:15:19 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:19,743 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>dc4627f6-3e42-5d61-8d3d-7ae7537565af</RequestId></ErrorResponse>'
2023-06-25 01:15:19,744 [DEBUG] Response headers: {'x-amzn-RequestId': 'dc4627f6-3e42-5d61-8d3d-7ae7537565af', 'Date': 'Sat, 24 Jun 2023 22:15:19 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:19,745 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>dc4627f6-3e42-5d61-8d3d-7ae7537565af</RequestId></ErrorResponse>'
2023-06-25 01:15:19,745 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x106e4e310>
2023-06-25 01:15:19,745 [DEBUG] No retry needed.
2023-06-25 01:15:19,757 [INFO] 127.0.0.1 - - [25/Jun/2023 01:15:19] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:15:22,038 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:15:22,038 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:15:22,041 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:15:22,041 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:15:22,042 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:22,042 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:22,042 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:22,042 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:22,042 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:22,042 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x108b48c10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:22,042 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x108b48bd0>>
2023-06-25 01:15:22,042 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:22,042 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:22,042 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221522Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:15:22,042 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221522Z
20230624/us-east-1/sqs/aws4_request
7ab67ef8b40f2ac1a129f68aba1c00c898dd9598a987de15cb82d386efcca4cf
2023-06-25 01:15:22,042 [DEBUG] Signature:
2a3a30925f23093cfa9c45604d5ed125dcfe2a9dacbf677c95579c59de8ccd37
2023-06-25 01:15:22,042 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:22,042 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221522Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=2a3a30925f23093cfa9c45604d5ed125dcfe2a9dacbf677c95579c59de8ccd37', 'amz-sdk-invocation-id': b'fea3cfff-64f9-4576-8553-4ee3c3d7993f', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:15:22,043 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:22,043 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:15:22,660 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:15:22,662 [DEBUG] Response headers: {'x-amzn-RequestId': '7c3750ed-7be6-5853-8201-0dfc16dc7c7a', 'Date': 'Sat, 24 Jun 2023 22:15:22 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:22,662 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>7c3750ed-7be6-5853-8201-0dfc16dc7c7a</RequestId></ErrorResponse>'
2023-06-25 01:15:22,663 [DEBUG] Response headers: {'x-amzn-RequestId': '7c3750ed-7be6-5853-8201-0dfc16dc7c7a', 'Date': 'Sat, 24 Jun 2023 22:15:22 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:22,663 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>7c3750ed-7be6-5853-8201-0dfc16dc7c7a</RequestId></ErrorResponse>'
2023-06-25 01:15:22,664 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x108b4b010>
2023-06-25 01:15:22,664 [DEBUG] No retry needed.
2023-06-25 01:15:22,676 [INFO] 127.0.0.1 - - [25/Jun/2023 01:15:22] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:15:28,498 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:15:28,499 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:15:28,506 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:15:28,507 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:15:28,507 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:28,507 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:28,508 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:28,508 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:28,508 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:28,508 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x109452d50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:28,508 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x109452d10>>
2023-06-25 01:15:28,508 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:28,508 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:28,508 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221528Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:15:28,508 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221528Z
20230624/us-east-1/sqs/aws4_request
5e3cc9c651189cac9f050d6fd05156e0a5893133968aa339998cdc6443413d30
2023-06-25 01:15:28,508 [DEBUG] Signature:
0aa68dd68c57bddcf44bfc5c96fb232af24bdc189e0f2802734ef8ae1d285a81
2023-06-25 01:15:28,508 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:28,508 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221528Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=0aa68dd68c57bddcf44bfc5c96fb232af24bdc189e0f2802734ef8ae1d285a81', 'amz-sdk-invocation-id': b'4c02086d-5212-483d-b6ae-23ff2875ddd1', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:15:28,508 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:28,508 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:15:29,142 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:15:29,143 [DEBUG] Response headers: {'x-amzn-RequestId': '7ed348a4-93d9-5065-9d88-15b5fe98de98', 'Date': 'Sat, 24 Jun 2023 22:15:29 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:29,143 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>7ed348a4-93d9-5065-9d88-15b5fe98de98</RequestId></ErrorResponse>'
2023-06-25 01:15:29,144 [DEBUG] Response headers: {'x-amzn-RequestId': '7ed348a4-93d9-5065-9d88-15b5fe98de98', 'Date': 'Sat, 24 Jun 2023 22:15:29 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:29,144 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>7ed348a4-93d9-5065-9d88-15b5fe98de98</RequestId></ErrorResponse>'
2023-06-25 01:15:29,145 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x109455210>
2023-06-25 01:15:29,145 [DEBUG] No retry needed.
2023-06-25 01:15:29,158 [INFO] 127.0.0.1 - - [25/Jun/2023 01:15:29] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:15:31,864 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:15:31,864 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:15:31,866 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:15:31,867 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:15:31,867 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:31,867 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:31,867 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:31,867 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:31,867 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:31,867 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x109470750>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:31,867 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x109470710>>
2023-06-25 01:15:31,868 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:31,868 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:31,868 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221531Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:15:31,868 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221531Z
20230624/us-east-1/sqs/aws4_request
e4037e1a1a5154a16f7c9c3d6786b867552adc31a13d44d3b1b7a24ab3667c12
2023-06-25 01:15:31,868 [DEBUG] Signature:
829aafd42d8a73583b3f1adcf7a55e2f2e56a9f9e1c73eff4270f53d553b0100
2023-06-25 01:15:31,868 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:31,868 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221531Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=829aafd42d8a73583b3f1adcf7a55e2f2e56a9f9e1c73eff4270f53d553b0100', 'amz-sdk-invocation-id': b'b061cdeb-9814-43d5-89fc-077124b504a2', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:15:31,868 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:31,868 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:15:32,510 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 400 377
2023-06-25 01:15:32,510 [DEBUG] Response headers: {'x-amzn-RequestId': '92987c83-6aee-5f08-b6a4-219207aa8c17', 'Date': 'Sat, 24 Jun 2023 22:15:32 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:32,511 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>92987c83-6aee-5f08-b6a4-219207aa8c17</RequestId></ErrorResponse>'
2023-06-25 01:15:32,512 [DEBUG] Response headers: {'x-amzn-RequestId': '92987c83-6aee-5f08-b6a4-219207aa8c17', 'Date': 'Sat, 24 Jun 2023 22:15:32 GMT', 'Content-Type': 'text/xml', 'Content-Length': '377'}
2023-06-25 01:15:32,512 [DEBUG] Response body:
b'<?xml version="1.0"?><ErrorResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><Error><Type>Sender</Type><Code>AWS.SimpleQueueService.QueueDeletedRecently</Code><Message>You must wait 60 seconds after deleting a queue before you can create another with the same name.</Message><Detail/></Error><RequestId>92987c83-6aee-5f08-b6a4-219207aa8c17</RequestId></ErrorResponse>'
2023-06-25 01:15:32,513 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x109472650>
2023-06-25 01:15:32,513 [DEBUG] No retry needed.
2023-06-25 01:15:32,525 [INFO] 127.0.0.1 - - [25/Jun/2023 01:15:32] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 01:15:33,310 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x1051ba2a0>
2023-06-25 01:15:33,311 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1051144a0>
2023-06-25 01:15:33,316 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 01:15:33,317 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 01:15:33,318 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:33,318 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:33,318 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:33,318 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:33,318 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:33,318 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1094b9e50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:33,318 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1094b9e10>>
2023-06-25 01:15:33,318 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:33,318 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:33,318 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221533Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 01:15:33,318 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221533Z
20230624/us-east-1/sqs/aws4_request
6763e3def227f26059f1ed51a946076c8d1a3b9e614de5c9597ce3d106c5def6
2023-06-25 01:15:33,318 [DEBUG] Signature:
57ed16158bab06a0efccefea42b07f644804855824fea7627c14a2d53aeeb93a
2023-06-25 01:15:33,318 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:33,318 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221533Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=57ed16158bab06a0efccefea42b07f644804855824fea7627c14a2d53aeeb93a', 'amz-sdk-invocation-id': b'8f1352b1-60ce-482d-a6c7-f1784f667a05', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 01:15:33,319 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:33,319 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 01:15:34,001 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 01:15:34,001 [DEBUG] Response headers: {'x-amzn-RequestId': '4470f4df-9c8e-50fc-9f7d-a9cef1c89ba1', 'Date': 'Sat, 24 Jun 2023 22:15:34 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 01:15:34,002 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>4470f4df-9c8e-50fc-9f7d-a9cef1c89ba1</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 01:15:34,002 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x1094ac150>
2023-06-25 01:15:34,002 [DEBUG] No retry needed.
2023-06-25 01:15:35,540 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 01:15:35,541 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 01:15:35,556 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 01:15:36,009 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 01:15:36,011 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 01:15:36,011 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 01:15:36,012 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_0cbmA3MpDBU2mr message='Dashboard link for request'
2023-06-25 01:15:36,015 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x1051bba60>
2023-06-25 01:15:36,015 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 01:15:36,015 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 01:15:36,016 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x1051ba340>
2023-06-25 01:15:36,016 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x1051dd580>
2023-06-25 01:15:36,016 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NMecrIJTenxdmPo0jPunyBI", "accountId": 6, "quota": {"credits": 500, "seats": 3}}', 'MessageGroupId': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x1094b9e50>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 01:15:36,016 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x1094b9e10>>
2023-06-25 01:15:36,016 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x1051bb920>
2023-06-25 01:15:36,017 [DEBUG] Calculating signature using v4 auth.
2023-06-25 01:15:36,017 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T221536Z

content-type;host;x-amz-date
320763b50eb4ee4dba29e4ca90745c9c117456c140863546118c883143b64666
2023-06-25 01:15:36,017 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T221536Z
20230624/us-east-1/sqs/aws4_request
6aafb360eabeffeeab5f5b7e8e81991ddb933c8e9b0397915824e3a3fd085bc6
2023-06-25 01:15:36,017 [DEBUG] Signature:
28a8e9c9fcdafbf128093ace9f57bb31a24a27593ae81d5692e14b3f0aad53cf
2023-06-25 01:15:36,017 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x1051ddd00>
2023-06-25 01:15:36,017 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T221536Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=28a8e9c9fcdafbf128093ace9f57bb31a24a27593ae81d5692e14b3f0aad53cf', 'amz-sdk-invocation-id': b'f76e799e-6d2c-4e0b-997c-a5ede6c26110', 'amz-sdk-request': b'attempt=1', 'Content-Length': '385'}>
2023-06-25 01:15:36,018 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 01:15:36,202 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 431
2023-06-25 01:15:36,203 [DEBUG] Response headers: {'x-amzn-RequestId': '790b6d4b-e24b-5e1b-94c8-305a8f031546', 'Date': 'Sat, 24 Jun 2023 22:15:36 GMT', 'Content-Type': 'text/xml', 'Content-Length': '431'}
2023-06-25 01:15:36,203 [DEBUG] Response body:
b'<?xml version="1.0"?><SendMessageResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><SendMessageResult><MessageId>267473e8-79f0-4d5d-9fb9-542f087ca270</MessageId><MD5OfMessageBody>9dbcc0754339745c440c92327752d727</MD5OfMessageBody><SequenceNumber>18878781177416688640</SequenceNumber></SendMessageResult><ResponseMetadata><RequestId>790b6d4b-e24b-5e1b-94c8-305a8f031546</RequestId></ResponseMetadata></SendMessageResponse>'
2023-06-25 01:15:36,203 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x1094ac150>
2023-06-25 01:15:36,203 [DEBUG] No retry needed.
2023-06-25 01:15:36,205 [INFO] 127.0.0.1 - - [25/Jun/2023 01:15:36] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-25 01:16:46,883 [INFO]  * Detected change in '/Users/ronenalbagli/projects/billing/usecase/create_payment_intent.py', reloading
2023-06-25 01:16:47,448 [INFO]  * Restarting with stat
2023-06-25 01:16:47,633 [WARNING]  * Debugger is active!
2023-06-25 01:16:47,637 [INFO]  * Debugger PIN: 458-791-220
2023-06-25 02:02:46,665 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-25 02:02:46,666 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8adf8rLhNIJME&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-25 02:02:46,685 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 02:02:47,317 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2417
2023-06-25 02:02:47,318 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-25 02:02:47,318 [DEBUG] body='{\n  "id": "in_1NMfTfIJTenxdmPoGRj5dQYK",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687647767,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8adf8rLhNIJME",\n  "customer_address": null,\n  "customer_email": "admin@testfivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688511767,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687647767,\n  "period_start": 1687647767,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687647767\n}' message='API response body'
2023-06-25 02:02:47,318 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_7CO9ca8Xar0ZPG message='Dashboard link for request'
2023-06-25 02:02:48,078 [INFO] 127.0.0.1 - - [25/Jun/2023 02:02:48] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-25 02:02:56,250 [DEBUG] Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
2023-06-25 02:02:56,251 [DEBUG] Changing event name from before-call.apigateway to before-call.api-gateway
2023-06-25 02:02:56,251 [DEBUG] Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
2023-06-25 02:02:56,252 [DEBUG] Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
2023-06-25 02:02:56,252 [DEBUG] Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
2023-06-25 02:02:56,252 [DEBUG] Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
2023-06-25 02:02:56,253 [DEBUG] Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
2023-06-25 02:02:56,255 [DEBUG] Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
2023-06-25 02:02:56,255 [DEBUG] Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
2023-06-25 02:02:56,255 [DEBUG] Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
2023-06-25 02:02:56,255 [DEBUG] Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
2023-06-25 02:02:56,257 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/endpoints.json
2023-06-25 02:02:56,264 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sdk-default-configuration.json
2023-06-25 02:02:56,264 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x10291a2a0>
2023-06-25 02:02:56,277 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/service-2.json
2023-06-25 02:02:56,292 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/sqs/2012-11-05/endpoint-rule-set-1.json.gz
2023-06-25 02:02:56,292 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/partitions.json
2023-06-25 02:02:56,293 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1028704a0>
2023-06-25 02:02:56,369 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 02:02:56,371 [DEBUG] Loading JSON file: /opt/homebrew/lib/python3.11/site-packages/botocore/data/_retry.json
2023-06-25 02:02:56,371 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 02:02:56,372 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-25 02:02:56,372 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 02:02:56,372 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 02:02:56,372 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-25 02:02:56,372 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-25 02:02:56,372 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x104ac4cd0>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 02:02:56,372 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10a998b50>>
2023-06-25 02:02:56,372 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-25 02:02:56,373 [DEBUG] Calculating signature using v4 auth.
2023-06-25 02:02:56,373 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T230256Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 02:02:56,373 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T230256Z
20230624/us-east-1/sqs/aws4_request
41025603cef15b7bebe836946cd1da177238e54176966293329047bf41deb868
2023-06-25 02:02:56,373 [DEBUG] Signature:
b8cad63020a8299a95527a1248ab352b7eb85a13e8b6df6433fee17b05246d57
2023-06-25 02:02:56,373 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-25 02:02:56,373 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T230256Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=b8cad63020a8299a95527a1248ab352b7eb85a13e8b6df6433fee17b05246d57', 'amz-sdk-invocation-id': b'30700b8a-5714-4c1b-a088-e5b555630ba4', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 02:02:56,373 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 02:02:56,373 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 02:02:56,963 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 02:02:56,964 [DEBUG] Response headers: {'x-amzn-RequestId': '56e85046-9ec6-5069-810d-0d57e6a617f4', 'Date': 'Sat, 24 Jun 2023 23:02:56 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 02:02:56,964 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>56e85046-9ec6-5069-810d-0d57e6a617f4</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 02:02:56,965 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x10a9a9e50>
2023-06-25 02:02:56,965 [DEBUG] No retry needed.
2023-06-25 02:02:58,446 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4
2023-06-25 02:02:58,446 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 02:02:58,452 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 02:02:58,879 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8ZvjpvKsj7JK4 HTTP/1.1" 200 737
2023-06-25 02:02:58,880 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8ZvjpvKsj7JK4 response_code=200
2023-06-25 02:02:58,880 [DEBUG] body='{\n  "id": "cus_O8ZvjpvKsj7JK4",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687560465,\n  "currency": "usd",\n  "default_source": "src_1NMImxIJTenxdmPoLuj1i6wG",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "ronen@fivicom.com",\n  "invoice_prefix": "BA57087F",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "ronen",\n    "lastName": "albagli"\n  },\n  "name": null,\n  "next_invoice_sequence": 12,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 02:02:58,880 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_KvskLJ2BQt7seo message='Dashboard link for request'
2023-06-25 02:02:58,881 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-25 02:02:58,881 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8ZvjpvKsj7JK4
2023-06-25 02:02:59,222 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-25 02:02:59,223 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-25 02:02:59,223 [DEBUG] body='{\n  "id": "pi_3NMfTrIJTenxdmPo0KUdaWWM",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfTrIJTenxdmPo0KUdaWWM_secret_0H8X2zF6IycGtPiWvD4oxt3vl",\n  "confirmation_method": "automatic",\n  "created": 1687647779,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:02:59,223 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_1Q3UouvZORyKWd message='Dashboard link for request'
2023-06-25 02:02:59,224 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK
2023-06-25 02:02:59,224 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMfTrIJTenxdmPo0KUdaWWM
2023-06-25 02:02:59,606 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK HTTP/1.1" 200 2472
2023-06-25 02:02:59,608 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK response_code=200
2023-06-25 02:02:59,608 [DEBUG] body='{\n  "id": "in_1NMfTfIJTenxdmPoGRj5dQYK",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687647767,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8adf8rLhNIJME",\n  "customer_address": null,\n  "customer_email": "admin@testfivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688511767,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMfTrIJTenxdmPo0KUdaWWM"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687647767,\n  "period_start": 1687647767,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687647767\n}' message='API response body'
2023-06-25 02:02:59,608 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_JwfPnjSjaYawo6 message='Dashboard link for request'
2023-06-25 02:02:59,609 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMfTrIJTenxdmPo0KUdaWWM
2023-06-25 02:02:59,609 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 02:02:59,905 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMfTrIJTenxdmPo0KUdaWWM HTTP/1.1" 200 1293
2023-06-25 02:02:59,907 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMfTrIJTenxdmPo0KUdaWWM response_code=200
2023-06-25 02:02:59,907 [DEBUG] body='{\n  "id": "pi_3NMfTrIJTenxdmPo0KUdaWWM",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfTrIJTenxdmPo0KUdaWWM_secret_0H8X2zF6IycGtPiWvD4oxt3vl",\n  "confirmation_method": "automatic",\n  "created": 1687647779,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:02:59,907 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qewJ0oMTVEQy5h message='Dashboard link for request'
2023-06-25 02:02:59,907 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMfTrIJTenxdmPo0KUdaWWM/confirm
2023-06-25 02:02:59,908 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NMIoSIJTenxdmPomzE11eAB
2023-06-25 02:03:01,165 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMfTrIJTenxdmPo0KUdaWWM/confirm HTTP/1.1" 200 1333
2023-06-25 02:03:01,166 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMfTrIJTenxdmPo0KUdaWWM/confirm response_code=200
2023-06-25 02:03:01,166 [DEBUG] body='{\n  "id": "pi_3NMfTrIJTenxdmPo0KUdaWWM",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfTrIJTenxdmPo0KUdaWWM_secret_0H8X2zF6IycGtPiWvD4oxt3vl",\n  "confirmation_method": "automatic",\n  "created": 1687647779,\n  "currency": "usd",\n  "customer": "cus_O8ZvjpvKsj7JK4",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMfTrIJTenxdmPo029Mf8jT",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NMIoSIJTenxdmPomzE11eAB",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:03:01,166 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_2d7vEenS3SZcP2 message='Dashboard link for request'
2023-06-25 02:03:01,167 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK
2023-06-25 02:03:01,168 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-25 02:03:01,732 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK HTTP/1.1" 200 2806
2023-06-25 02:03:01,737 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK response_code=200
2023-06-25 02:03:01,738 [DEBUG] body='{\n  "id": "in_1NMfTfIJTenxdmPoGRj5dQYK",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687647767,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8adf8rLhNIJME",\n  "customer_address": null,\n  "customer_email": "admin@testfivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688511767,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POHhPT1REbWVwNzk5Qm9jMzZLcTEyaklqdjFNeVd1LDc4MTg4NTgx02006EGGcDX0?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POHhPT1REbWVwNzk5Qm9jMzZLcTEyaklqdjFNeVd1LDc4MTg4NTgx02006EGGcDX0/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfTfIJTenxdmPoGRj5dQYK/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMfTrIJTenxdmPo0KUdaWWM"\n  },\n  "next_payment_attempt": null,\n  "number": "CC3D4706-0002",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687647767,\n  "period_start": 1687647767,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687647781,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687647781,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687647767\n}' message='API response body'
2023-06-25 02:03:01,738 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_iPQLxEnHHFSdTb message='Dashboard link for request'
2023-06-25 02:03:02,476 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-25 02:03:02,477 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 02:03:02,477 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 02:03:02,477 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-25 02:03:02,477 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-25 02:03:02,477 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NMfTfIJTenxdmPoGRj5dQYK", "accountId": 6, "quota": {"credits": 500, "seats": 3}}', 'MessageGroupId': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x104ac4cd0>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 02:03:02,477 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10a998b50>>
2023-06-25 02:03:02,478 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-25 02:03:02,478 [DEBUG] Calculating signature using v4 auth.
2023-06-25 02:03:02,478 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T230302Z

content-type;host;x-amz-date
b233a129302752f49d9f249092e2827d0d7df932e847bd1932017da18c9671fe
2023-06-25 02:03:02,478 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T230302Z
20230624/us-east-1/sqs/aws4_request
339eaf904861182277d9647fe014b3b9400ac68b5fa311106e4f78edd51e74ed
2023-06-25 02:03:02,478 [DEBUG] Signature:
1a691adc443fd282e2e8ae845c6a9cb763270934ea1cb4a92995d51bc13c504c
2023-06-25 02:03:02,478 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-25 02:03:02,478 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T230302Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=1a691adc443fd282e2e8ae845c6a9cb763270934ea1cb4a92995d51bc13c504c', 'amz-sdk-invocation-id': b'ea11498c-fed4-41a5-8152-494e8bceeba0', 'amz-sdk-request': b'attempt=1', 'Content-Length': '385'}>
2023-06-25 02:03:02,479 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 02:03:02,630 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 431
2023-06-25 02:03:02,630 [DEBUG] Response headers: {'x-amzn-RequestId': '2c458637-a3f5-5f2f-97d9-db26db9348b2', 'Date': 'Sat, 24 Jun 2023 23:03:02 GMT', 'Content-Type': 'text/xml', 'Content-Length': '431'}
2023-06-25 02:03:02,630 [DEBUG] Response body:
b'<?xml version="1.0"?><SendMessageResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><SendMessageResult><MessageId>ad7e9350-bcb0-47a5-a031-c7100299478c</MessageId><MD5OfMessageBody>82c2d31faca0c5b0406e69182f1412d3</MD5OfMessageBody><SequenceNumber>18878781906069745152</SequenceNumber></SendMessageResult><ResponseMetadata><RequestId>2c458637-a3f5-5f2f-97d9-db26db9348b2</RequestId></ResponseMetadata></SendMessageResponse>'
2023-06-25 02:03:02,631 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x10a9a9e50>
2023-06-25 02:03:02,631 [DEBUG] No retry needed.
2023-06-25 02:03:02,633 [INFO] 127.0.0.1 - - [25/Jun/2023 02:03:02] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-25 02:12:09,720 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-25 02:12:09,722 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-25 02:12:09,734 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 02:12:10,316 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-25 02:12:10,317 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-25 02:12:10,317 [DEBUG] body='{\n  "id": "in_1NMfckIJTenxdmPoYg5thisN",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687648330,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688512330,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfckIJTenxdmPoYg5thisN/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687648330,\n  "period_start": 1687648330,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687648330\n}' message='API response body'
2023-06-25 02:12:10,317 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_o1fZffx5yZVawE message='Dashboard link for request'
2023-06-25 02:12:11,074 [INFO] 127.0.0.1 - - [25/Jun/2023 02:12:11] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-25 02:12:16,791 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x10291a2a0>
2023-06-25 02:12:16,791 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1028704a0>
2023-06-25 02:12:16,873 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 02:12:16,876 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 02:12:16,877 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-25 02:12:16,878 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 02:12:16,878 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 02:12:16,878 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-25 02:12:16,878 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-25 02:12:16,878 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x104a54d10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 02:12:16,879 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10a9cb5d0>>
2023-06-25 02:12:16,879 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-25 02:12:16,880 [DEBUG] Calculating signature using v4 auth.
2023-06-25 02:12:16,880 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T231216Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 02:12:16,880 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T231216Z
20230624/us-east-1/sqs/aws4_request
a6e7b9899ea31f7f1568e0f6f1ae0682e79229958cc1f2440b8025a3e599519f
2023-06-25 02:12:16,881 [DEBUG] Signature:
fc37e19fcb188541819907bb3865fe7da08bb40fdef29eac89dc06aac0d5ee94
2023-06-25 02:12:16,881 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-25 02:12:16,881 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T231216Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=fc37e19fcb188541819907bb3865fe7da08bb40fdef29eac89dc06aac0d5ee94', 'amz-sdk-invocation-id': b'077d4222-81d0-4e87-b2b4-a5a4e54ce90a', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 02:12:16,882 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 02:12:16,882 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 02:12:17,481 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 02:12:17,483 [DEBUG] Response headers: {'x-amzn-RequestId': '3e68efcc-c924-5f5e-afaa-b2ddb3b5cbfe', 'Date': 'Sat, 24 Jun 2023 23:12:17 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 02:12:17,483 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>3e68efcc-c924-5f5e-afaa-b2ddb3b5cbfe</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 02:12:17,484 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x102b13a50>
2023-06-25 02:12:17,484 [DEBUG] No retry needed.
2023-06-25 02:12:18,958 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-25 02:12:18,958 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 02:12:18,960 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 02:12:19,384 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-25 02:12:19,386 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-25 02:12:19,386 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 8,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 02:12:19,386 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_kcHx8l7fhvUxfS message='Dashboard link for request'
2023-06-25 02:12:19,387 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-25 02:12:19,387 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-25 02:12:19,726 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-25 02:12:19,728 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-25 02:12:19,728 [DEBUG] body='{\n  "id": "pi_3NMfctIJTenxdmPo0cQ1n5yK",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfctIJTenxdmPo0cQ1n5yK_secret_izDVu2a95Ggch3vNjh3sLBrM2",\n  "confirmation_method": "automatic",\n  "created": 1687648339,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:12:19,728 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_pdLaUV10B8mBg2 message='Dashboard link for request'
2023-06-25 02:12:19,729 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/prod_O8a3p03CbfmFd3
2023-06-25 02:12:19,729 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMfctIJTenxdmPo0cQ1n5yK
2023-06-25 02:12:20,026 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/prod_O8a3p03CbfmFd3 HTTP/1.1" 404 333
2023-06-25 02:12:20,027 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/prod_O8a3p03CbfmFd3 response_code=404
2023-06-25 02:12:20,027 [DEBUG] body='{\n  "error": {\n    "code": "resource_missing",\n    "doc_url": "https://stripe.com/docs/error-codes/resource-missing",\n    "message": "No such invoice: \'prod_O8a3p03CbfmFd3\'",\n    "param": "id",\n    "request_log_url": "https://dashboard.stripe.com/test/logs/req_xrj6hpDuAXi7np?t=1687648339",\n    "type": "invalid_request_error"\n  }\n}\n' message='API response body'
2023-06-25 02:12:20,027 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_xrj6hpDuAXi7np message='Dashboard link for request'
2023-06-25 02:12:20,027 [INFO] error_code=resource_missing error_message="No such invoice: 'prod_O8a3p03CbfmFd3'" error_param=id error_type=invalid_request_error message='Stripe API error received'
2023-06-25 02:12:20,040 [INFO] 127.0.0.1 - - [25/Jun/2023 02:12:20] "[35m[1mPOST /payment/intent/create HTTP/1.1[0m" 500 -
2023-06-25 02:12:46,111 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-25 02:12:46,111 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-25 02:12:46,126 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 02:12:46,771 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-25 02:12:46,772 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-25 02:12:46,772 [DEBUG] body='{\n  "id": "in_1NMfdKIJTenxdmPo0bGwNiMK",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687648366,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688512366,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687648366,\n  "period_start": 1687648366,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687648366\n}' message='API response body'
2023-06-25 02:12:46,772 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_3WazCouk90sOcw message='Dashboard link for request'
2023-06-25 02:12:47,520 [INFO] 127.0.0.1 - - [25/Jun/2023 02:12:47] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-25 02:12:53,276 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x10291a2a0>
2023-06-25 02:12:53,277 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1028704a0>
2023-06-25 02:12:53,283 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-25 02:12:53,284 [DEBUG] Registering retry handlers for service: sqs
2023-06-25 02:12:53,284 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-25 02:12:53,285 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 02:12:53,285 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 02:12:53,285 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-25 02:12:53,285 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-25 02:12:53,285 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x10aa16a10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 02:12:53,285 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10aa17510>>
2023-06-25 02:12:53,285 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-25 02:12:53,285 [DEBUG] Calculating signature using v4 auth.
2023-06-25 02:12:53,285 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T231253Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-25 02:12:53,285 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T231253Z
20230624/us-east-1/sqs/aws4_request
130961f44590b487265b90bc3186689c447a219b982c8fd4c48662ba258a9d36
2023-06-25 02:12:53,285 [DEBUG] Signature:
67a30843a086540064d90f1fd6adb9f783e795737c6f1c9b0296354fa6d9bcb4
2023-06-25 02:12:53,285 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-25 02:12:53,285 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T231253Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=67a30843a086540064d90f1fd6adb9f783e795737c6f1c9b0296354fa6d9bcb4', 'amz-sdk-invocation-id': b'9a02ca76-9f28-41fb-b3c5-e69d5a2dc91d', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-25 02:12:53,285 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 02:12:53,285 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-25 02:12:53,903 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-25 02:12:53,904 [DEBUG] Response headers: {'x-amzn-RequestId': '7bfaa220-6d0f-5675-b7d9-ff3117ba670a', 'Date': 'Sat, 24 Jun 2023 23:12:53 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-25 02:12:53,904 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>7bfaa220-6d0f-5675-b7d9-ff3117ba670a</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-25 02:12:53,906 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x10aa7ee50>
2023-06-25 02:12:53,906 [DEBUG] No retry needed.
2023-06-25 02:12:55,390 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-25 02:12:55,391 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 02:12:55,397 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-25 02:12:55,827 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 736
2023-06-25 02:12:55,828 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-25 02:12:55,828 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 8,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-25 02:12:55,828 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_yWg9WvLWOgI06G message='Dashboard link for request'
2023-06-25 02:12:55,828 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-25 02:12:55,828 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-25 02:12:56,172 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-25 02:12:56,173 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-25 02:12:56,173 [DEBUG] body='{\n  "id": "pi_3NMfdUIJTenxdmPo0MdPJRJr",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfdUIJTenxdmPo0MdPJRJr_secret_CmEUQ4wtejO9ULHtW7AosxxNZ",\n  "confirmation_method": "automatic",\n  "created": 1687648376,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:12:56,173 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_mIT4mLHLf5cpnf message='Dashboard link for request'
2023-06-25 02:12:56,173 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK
2023-06-25 02:12:56,174 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NMfdUIJTenxdmPo0MdPJRJr
2023-06-25 02:12:56,501 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK HTTP/1.1" 200 2468
2023-06-25 02:12:56,503 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK response_code=200
2023-06-25 02:12:56,503 [DEBUG] body='{\n  "id": "in_1NMfdKIJTenxdmPo0bGwNiMK",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687648366,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688512366,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMfdUIJTenxdmPo0MdPJRJr"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687648366,\n  "period_start": 1687648366,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687648366\n}' message='API response body'
2023-06-25 02:12:56,503 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Qk5glQGAaHERqr message='Dashboard link for request'
2023-06-25 02:12:56,504 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NMfdUIJTenxdmPo0MdPJRJr
2023-06-25 02:12:56,504 [DEBUG] api_version=None message='Post details' post_data=
2023-06-25 02:12:56,908 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NMfdUIJTenxdmPo0MdPJRJr HTTP/1.1" 200 1293
2023-06-25 02:12:56,911 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMfdUIJTenxdmPo0MdPJRJr response_code=200
2023-06-25 02:12:56,911 [DEBUG] body='{\n  "id": "pi_3NMfdUIJTenxdmPo0MdPJRJr",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfdUIJTenxdmPo0MdPJRJr_secret_CmEUQ4wtejO9ULHtW7AosxxNZ",\n  "confirmation_method": "automatic",\n  "created": 1687648376,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:12:56,911 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_4ikdueiQUu7gvy message='Dashboard link for request'
2023-06-25 02:12:56,911 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NMfdUIJTenxdmPo0MdPJRJr/confirm
2023-06-25 02:12:56,911 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-25 02:12:58,031 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NMfdUIJTenxdmPo0MdPJRJr/confirm HTTP/1.1" 200 1333
2023-06-25 02:12:58,032 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NMfdUIJTenxdmPo0MdPJRJr/confirm response_code=200
2023-06-25 02:12:58,032 [DEBUG] body='{\n  "id": "pi_3NMfdUIJTenxdmPo0MdPJRJr",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NMfdUIJTenxdmPo0MdPJRJr_secret_CmEUQ4wtejO9ULHtW7AosxxNZ",\n  "confirmation_method": "automatic",\n  "created": 1687648376,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NMfdUIJTenxdmPo0hMkpfNk",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-25 02:12:58,032 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_TRAl0bAvxFSbko message='Dashboard link for request'
2023-06-25 02:12:58,033 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK
2023-06-25 02:12:58,033 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-25 02:12:58,589 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK HTTP/1.1" 200 2802
2023-06-25 02:12:58,590 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK response_code=200
2023-06-25 02:12:58,591 [DEBUG] body='{\n  "id": "in_1NMfdKIJTenxdmPo0bGwNiMK",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687648366,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688512366,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POHhZb0o3STRKWHBseEhuU0lmN1JEdkZ0c2FrSFFiLDc4MTg5MTc40200FJU1qf6Y?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POHhZb0o3STRKWHBseEhuU0lmN1JEdkZ0c2FrSFFiLDc4MTg5MTc40200FJU1qf6Y/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NMfdKIJTenxdmPo0bGwNiMK/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NMfdUIJTenxdmPo0MdPJRJr"\n  },\n  "next_payment_attempt": null,\n  "number": "FF241CBB-0008",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687648366,\n  "period_start": 1687648366,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687648378,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687648378,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687648366\n}' message='API response body'
2023-06-25 02:12:58,591 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_Kk9nfmJIctaKeb message='Dashboard link for request'
2023-06-25 02:12:59,340 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-25 02:12:59,341 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-25 02:12:59,341 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-25 02:12:59,342 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-25 02:12:59,342 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-25 02:12:59,342 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NMfdKIJTenxdmPo0bGwNiMK", "accountId": 3, "quota": {"credits": 500, "seats": 3}}', 'MessageGroupId': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x10aa16a10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-25 02:12:59,342 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10aa17510>>
2023-06-25 02:12:59,342 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-25 02:12:59,343 [DEBUG] Calculating signature using v4 auth.
2023-06-25 02:12:59,344 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230624T231259Z

content-type;host;x-amz-date
b1d06418d7607c3187c524cec09a7f0953bb1b51ad0b3f6fd3c309070efd3210
2023-06-25 02:12:59,344 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230624T231259Z
20230624/us-east-1/sqs/aws4_request
7fa1afbd966987c105787021e29ddeed70acc96a89ae9ee01cd5a80484829856
2023-06-25 02:12:59,344 [DEBUG] Signature:
da07834638bd5efebdd7e2b0732749b8f28563600ec11ae59d890bace823f559
2023-06-25 02:12:59,344 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-25 02:12:59,344 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230624T231259Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230624/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=da07834638bd5efebdd7e2b0732749b8f28563600ec11ae59d890bace823f559', 'amz-sdk-invocation-id': b'bc123120-c8f9-4aef-ab69-8efc6cd8baa3', 'amz-sdk-request': b'attempt=1', 'Content-Length': '385'}>
2023-06-25 02:12:59,344 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-25 02:12:59,500 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 431
2023-06-25 02:12:59,500 [DEBUG] Response headers: {'x-amzn-RequestId': '5a8cfa31-46f2-59da-892a-a7203c4958a5', 'Date': 'Sat, 24 Jun 2023 23:12:59 GMT', 'Content-Type': 'text/xml', 'Content-Length': '431'}
2023-06-25 02:12:59,500 [DEBUG] Response body:
b'<?xml version="1.0"?><SendMessageResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><SendMessageResult><MessageId>ae48fda0-0697-43df-86e2-e3be7ba55927</MessageId><MD5OfMessageBody>36efb80ea98cd953ba12c44c8a7eb151</MD5OfMessageBody><SequenceNumber>18878782058867696128</SequenceNumber></SendMessageResult><ResponseMetadata><RequestId>5a8cfa31-46f2-59da-892a-a7203c4958a5</RequestId></ResponseMetadata></SendMessageResponse>'
2023-06-25 02:12:59,500 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x10aa7ee50>
2023-06-25 02:12:59,501 [DEBUG] No retry needed.
2023-06-25 02:12:59,502 [INFO] 127.0.0.1 - - [25/Jun/2023 02:12:59] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-26 12:46:21,058 [INFO] 127.0.0.1 - - [26/Jun/2023 12:46:21] "[33mPOST / HTTP/1.1[0m" 404 -
2023-06-26 12:55:19,254 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-26 12:55:19,258 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-26 12:55:19,273 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-26 12:55:19,891 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-26 12:55:19,892 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-26 12:55:19,892 [DEBUG] body='{\n  "id": "in_1NNC8hIJTenxdmPo2Q7Cb8Pv",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687773319,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688637319,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687773319,\n  "period_start": 1687773319,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687773319\n}' message='API response body'
2023-06-26 12:55:19,892 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_KlTrqq3vHUuowU message='Dashboard link for request'
2023-06-26 12:55:20,636 [INFO] 127.0.0.1 - - [26/Jun/2023 12:55:20] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-26 12:55:33,854 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x10291a2a0>
2023-06-26 12:55:33,854 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1028704a0>
2023-06-26 12:55:33,933 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-26 12:55:33,935 [DEBUG] Registering retry handlers for service: sqs
2023-06-26 12:55:33,936 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-26 12:55:33,937 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-26 12:55:33,937 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-26 12:55:33,938 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-26 12:55:33,938 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-26 12:55:33,938 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x10ad64d10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-26 12:55:33,940 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10a9f3610>>
2023-06-26 12:55:33,941 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-26 12:55:33,942 [DEBUG] Calculating signature using v4 auth.
2023-06-26 12:55:33,942 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230626T095533Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-26 12:55:33,942 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230626T095533Z
20230626/us-east-1/sqs/aws4_request
ff8bc001ef8be9aa9c19e14d9cb1f69e2077e016f34b5d672307b2e3da6a3105
2023-06-26 12:55:33,942 [DEBUG] Signature:
4865d87c1924ec3debc7b57cecf3a086b0d8f229259169dfb294c011332bc7b6
2023-06-26 12:55:33,942 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-26 12:55:33,943 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230626T095533Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230626/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=4865d87c1924ec3debc7b57cecf3a086b0d8f229259169dfb294c011332bc7b6', 'amz-sdk-invocation-id': b'c61881ac-c11e-44c3-beb1-968dc65a2807', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-26 12:55:33,943 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-26 12:55:33,943 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-26 12:55:34,524 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-26 12:55:34,525 [DEBUG] Response headers: {'x-amzn-RequestId': '46b69a43-3198-5caf-ab35-c750534e9138', 'Date': 'Mon, 26 Jun 2023 09:55:34 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-26 12:55:34,525 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>46b69a43-3198-5caf-ab35-c750534e9138</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-26 12:55:34,526 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x104ff4ed0>
2023-06-26 12:55:34,526 [DEBUG] No retry needed.
2023-06-26 12:55:35,959 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-26 12:55:35,959 [DEBUG] api_version=None message='Post details' post_data=
2023-06-26 12:55:35,961 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-26 12:55:36,385 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 737
2023-06-26 12:55:36,386 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-26 12:55:36,386 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 10,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-26 12:55:36,386 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_sLHdogtwkUa0ZC message='Dashboard link for request'
2023-06-26 12:55:36,387 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-26 12:55:36,387 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-26 12:55:36,730 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-26 12:55:36,734 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-26 12:55:36,734 [DEBUG] body='{\n  "id": "pi_3NNC8yIJTenxdmPo0jibLREO",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NNC8yIJTenxdmPo0jibLREO_secret_ORyRJLVTPfSj5amrRAQFXvnqV",\n  "confirmation_method": "automatic",\n  "created": 1687773336,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-26 12:55:36,734 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_rAPL3uc2U1zrpe message='Dashboard link for request'
2023-06-26 12:55:36,735 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv
2023-06-26 12:55:36,735 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NNC8yIJTenxdmPo0jibLREO
2023-06-26 12:55:37,116 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv HTTP/1.1" 200 2468
2023-06-26 12:55:37,116 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv response_code=200
2023-06-26 12:55:37,116 [DEBUG] body='{\n  "id": "in_1NNC8hIJTenxdmPo2Q7Cb8Pv",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687773319,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688637319,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NNC8yIJTenxdmPo0jibLREO"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687773319,\n  "period_start": 1687773319,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687773319\n}' message='API response body'
2023-06-26 12:55:37,116 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_VvNHyRnBaSsivZ message='Dashboard link for request'
2023-06-26 12:55:37,117 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NNC8yIJTenxdmPo0jibLREO
2023-06-26 12:55:37,117 [DEBUG] api_version=None message='Post details' post_data=
2023-06-26 12:55:37,398 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NNC8yIJTenxdmPo0jibLREO HTTP/1.1" 200 1293
2023-06-26 12:55:37,399 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NNC8yIJTenxdmPo0jibLREO response_code=200
2023-06-26 12:55:37,400 [DEBUG] body='{\n  "id": "pi_3NNC8yIJTenxdmPo0jibLREO",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NNC8yIJTenxdmPo0jibLREO_secret_ORyRJLVTPfSj5amrRAQFXvnqV",\n  "confirmation_method": "automatic",\n  "created": 1687773336,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-26 12:55:37,400 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_5T6HIi40PYNUYx message='Dashboard link for request'
2023-06-26 12:55:37,400 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NNC8yIJTenxdmPo0jibLREO/confirm
2023-06-26 12:55:37,400 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-26 12:55:38,500 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NNC8yIJTenxdmPo0jibLREO/confirm HTTP/1.1" 200 1333
2023-06-26 12:55:38,501 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NNC8yIJTenxdmPo0jibLREO/confirm response_code=200
2023-06-26 12:55:38,501 [DEBUG] body='{\n  "id": "pi_3NNC8yIJTenxdmPo0jibLREO",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NNC8yIJTenxdmPo0jibLREO_secret_ORyRJLVTPfSj5amrRAQFXvnqV",\n  "confirmation_method": "automatic",\n  "created": 1687773336,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NNC8yIJTenxdmPo0dBAJT7K",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-26 12:55:38,501 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_R03WIGPh0yVJ4s message='Dashboard link for request'
2023-06-26 12:55:38,501 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv
2023-06-26 12:55:38,502 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-26 12:55:39,056 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv HTTP/1.1" 200 2802
2023-06-26 12:55:39,057 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv response_code=200
2023-06-26 12:55:39,057 [DEBUG] body='{\n  "id": "in_1NNC8hIJTenxdmPo2Q7Cb8Pv",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687773319,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688637319,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POVY4TWtYQ2RWOEF1VzNYNGlPaHV1Z3N2N3lYS281LDc4MzE0MTM50200PKKgGSS6?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POVY4TWtYQ2RWOEF1VzNYNGlPaHV1Z3N2N3lYS281LDc4MzE0MTM50200PKKgGSS6/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNC8hIJTenxdmPo2Q7Cb8Pv/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NNC8yIJTenxdmPo0jibLREO"\n  },\n  "next_payment_attempt": null,\n  "number": "FF241CBB-0010",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687773319,\n  "period_start": 1687773319,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687773338,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687773338,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687773319\n}' message='API response body'
2023-06-26 12:55:39,057 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_RveMX0liqUA0uY message='Dashboard link for request'
2023-06-26 12:55:39,772 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-26 12:55:39,772 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-26 12:55:39,772 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-26 12:55:39,772 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-26 12:55:39,772 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-26 12:55:39,772 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NNC8hIJTenxdmPo2Q7Cb8Pv", "accountId": 3, "quota": {"credits": 500, "seats": 3}}', 'MessageGroupId': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x10ad64d10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-26 12:55:39,772 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10a9f3610>>
2023-06-26 12:55:39,773 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-26 12:55:39,773 [DEBUG] Calculating signature using v4 auth.
2023-06-26 12:55:39,773 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230626T095539Z

content-type;host;x-amz-date
2481dbfba379927f06fd6ff7512525454f79c99b686b2deac490f3ce3b5ae51b
2023-06-26 12:55:39,773 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230626T095539Z
20230626/us-east-1/sqs/aws4_request
3d8e020a8187214440b15a8c1f39791e71db79640eed85868a7745addef30a8c
2023-06-26 12:55:39,773 [DEBUG] Signature:
12c8dcda32a93d9c23aa48ee56cdded05a5b872ce53f0d6323891af0bc07d638
2023-06-26 12:55:39,773 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-26 12:55:39,773 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230626T095539Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230626/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=12c8dcda32a93d9c23aa48ee56cdded05a5b872ce53f0d6323891af0bc07d638', 'amz-sdk-invocation-id': b'a772ab8d-baf8-48fd-8841-039b7afb2635', 'amz-sdk-request': b'attempt=1', 'Content-Length': '385'}>
2023-06-26 12:55:39,773 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-26 12:55:39,918 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 431
2023-06-26 12:55:39,918 [DEBUG] Response headers: {'x-amzn-RequestId': 'fc3629a5-4597-5beb-9940-74b6274c467c', 'Date': 'Mon, 26 Jun 2023 09:55:39 GMT', 'Content-Type': 'text/xml', 'Content-Length': '431'}
2023-06-26 12:55:39,918 [DEBUG] Response body:
b'<?xml version="1.0"?><SendMessageResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><SendMessageResult><MessageId>25eca437-fc45-4040-90f5-9968e8c42a2c</MessageId><MD5OfMessageBody>37313660f1bee814a9c5303fcd046915</MD5OfMessageBody><SequenceNumber>37325558122447583744</SequenceNumber></SendMessageResult><ResponseMetadata><RequestId>fc3629a5-4597-5beb-9940-74b6274c467c</RequestId></ResponseMetadata></SendMessageResponse>'
2023-06-26 12:55:39,918 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x104ff4ed0>
2023-06-26 12:55:39,918 [DEBUG] No retry needed.
2023-06-26 12:55:39,921 [INFO] 127.0.0.1 - - [26/Jun/2023 12:55:39] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-26 13:29:25,142 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-26 13:29:25,144 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-26 13:29:25,157 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-26 13:29:25,735 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-26 13:29:25,736 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-26 13:29:25,736 [DEBUG] body='{\n  "id": "in_1NNCfhIJTenxdmPoHiUzhTyC",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687775365,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688639365,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687775365,\n  "period_start": 1687775365,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687775365\n}' message='API response body'
2023-06-26 13:29:25,736 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_YaWLpPkJsOniiO message='Dashboard link for request'
2023-06-26 13:29:26,462 [INFO] 127.0.0.1 - - [26/Jun/2023 13:29:26] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
2023-06-26 13:29:35,361 [DEBUG] Event choose-service-name: calling handler <function handle_service_name_alias at 0x10291a2a0>
2023-06-26 13:29:35,361 [DEBUG] Event creating-client-class.sqs: calling handler <function add_generate_presigned_url at 0x1028704a0>
2023-06-26 13:29:35,436 [DEBUG] Setting sqs timeout as (60, 60)
2023-06-26 13:29:35,438 [DEBUG] Registering retry handlers for service: sqs
2023-06-26 13:29:35,439 [DEBUG] Event before-parameter-build.sqs.CreateQueue: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-26 13:29:35,440 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-26 13:29:35,440 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-26 13:29:35,440 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-26 13:29:35,440 [DEBUG] Event before-call.sqs.CreateQueue: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-26 13:29:35,440 [DEBUG] Making request for OperationModel(name=CreateQueue) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'CreateQueue', 'Version': '2012-11-05', 'QueueName': 'invoice_completed.fifo', 'Attribute.1.Name': 'FifoQueue', 'Attribute.1.Value': 'true', 'Attribute.2.Name': 'ContentBasedDeduplication', 'Attribute.2.Value': 'true'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x101c34d10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-26 13:29:35,441 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10aa5dd50>>
2023-06-26 13:29:35,441 [DEBUG] Event choose-signer.sqs.CreateQueue: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-26 13:29:35,441 [DEBUG] Calculating signature using v4 auth.
2023-06-26 13:29:35,441 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230626T102935Z

content-type;host;x-amz-date
c1d482886d9dfb72055aadfe5427d0fc3633f3452a4a7dc1eae363badd83680e
2023-06-26 13:29:35,441 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230626T102935Z
20230626/us-east-1/sqs/aws4_request
c32fb0cc2aaa6513b65f7c765c93cb6e7ade97dd76c88475519d79ca1622e5f1
2023-06-26 13:29:35,442 [DEBUG] Signature:
7d566cb3119badc3425b85d81781cfdfe428af0f7ea4893055b5bd69dbdb29b8
2023-06-26 13:29:35,442 [DEBUG] Event request-created.sqs.CreateQueue: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-26 13:29:35,442 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230626T102935Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230626/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=7d566cb3119badc3425b85d81781cfdfe428af0f7ea4893055b5bd69dbdb29b8', 'amz-sdk-invocation-id': b'163e9be4-22f3-4e0b-807d-4f608182a2e5', 'amz-sdk-request': b'attempt=1', 'Content-Length': '186'}>
2023-06-26 13:29:35,442 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-26 13:29:35,442 [DEBUG] Starting new HTTPS connection (1): sqs.us-east-1.amazonaws.com:443
2023-06-26 13:29:36,060 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 342
2023-06-26 13:29:36,060 [DEBUG] Response headers: {'x-amzn-RequestId': '6135dc3c-c4f5-553f-ab40-812fae254f1c', 'Date': 'Mon, 26 Jun 2023 10:29:36 GMT', 'Content-Type': 'text/xml', 'Content-Length': '342'}
2023-06-26 13:29:36,061 [DEBUG] Response body:
b'<?xml version="1.0"?><CreateQueueResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><CreateQueueResult><QueueUrl>https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo</QueueUrl></CreateQueueResult><ResponseMetadata><RequestId>6135dc3c-c4f5-553f-ab40-812fae254f1c</RequestId></ResponseMetadata></CreateQueueResponse>'
2023-06-26 13:29:36,061 [DEBUG] Event needs-retry.sqs.CreateQueue: calling handler <botocore.retryhandler.RetryHandler object at 0x10ad1cc50>
2023-06-26 13:29:36,061 [DEBUG] No retry needed.
2023-06-26 13:29:37,494 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm
2023-06-26 13:29:37,495 [DEBUG] api_version=None message='Post details' post_data=
2023-06-26 13:29:37,498 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-26 13:29:37,925 [DEBUG] https://api.stripe.com:443 "GET /v1/customers/cus_O8NBUvatY5ecjm HTTP/1.1" 200 737
2023-06-26 13:29:37,926 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/customers/cus_O8NBUvatY5ecjm response_code=200
2023-06-26 13:29:37,926 [DEBUG] body='{\n  "id": "cus_O8NBUvatY5ecjm",\n  "object": "customer",\n  "address": null,\n  "balance": 0,\n  "created": 1687513040,\n  "currency": "usd",\n  "default_source": "src_1NMEMqIJTenxdmPo5ZngsRJO",\n  "delinquent": false,\n  "description": null,\n  "discount": null,\n  "email": "admin@fivicom.com",\n  "invoice_prefix": "FF241CBB",\n  "invoice_settings": {\n    "custom_fields": null,\n    "default_payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n    "footer": null,\n    "rendering_options": null\n  },\n  "livemode": false,\n  "metadata": {\n    "firstName": "admin",\n    "lastName": "fivicon"\n  },\n  "name": null,\n  "next_invoice_sequence": 11,\n  "phone": null,\n  "preferred_locales": [],\n  "shipping": null,\n  "tax_exempt": "none",\n  "test_clock": null\n}' message='API response body'
2023-06-26 13:29:37,926 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_yXGEnOKOmLvZrJ message='Dashboard link for request'
2023-06-26 13:29:37,926 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents
2023-06-26 13:29:37,926 [DEBUG] api_version=None message='Post details' post_data=amount=15000&currency=usd&payment_method_types[0]=card&customer=cus_O8NBUvatY5ecjm
2023-06-26 13:29:38,267 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents HTTP/1.1" 200 1293
2023-06-26 13:29:38,268 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents response_code=200
2023-06-26 13:29:38,268 [DEBUG] body='{\n  "id": "pi_3NNCfuIJTenxdmPo0bkUEnC6",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NNCfuIJTenxdmPo0bkUEnC6_secret_w3yFtWlM4AA09FKCqsF6N3YyG",\n  "confirmation_method": "automatic",\n  "created": 1687775378,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-26 13:29:38,268 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_i6UA9CruFCenG7 message='Dashboard link for request'
2023-06-26 13:29:38,269 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC
2023-06-26 13:29:38,269 [DEBUG] api_version=None message='Post details' post_data=metadata[payment_intent]=pi_3NNCfuIJTenxdmPo0bkUEnC6
2023-06-26 13:29:38,623 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC HTTP/1.1" 200 2468
2023-06-26 13:29:38,624 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC response_code=200
2023-06-26 13:29:38,624 [DEBUG] body='{\n  "id": "in_1NNCfhIJTenxdmPoHiUzhTyC",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687775365,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688639365,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NNCfuIJTenxdmPo0bkUEnC6"\n  },\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687775365,\n  "period_start": 1687775365,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687775365\n}' message='API response body'
2023-06-26 13:29:38,624 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_69b3EyvakkxBjm message='Dashboard link for request'
2023-06-26 13:29:38,625 [INFO] message='Request to Stripe api' method=get path=https://api.stripe.com/v1/payment_intents/pi_3NNCfuIJTenxdmPo0bkUEnC6
2023-06-26 13:29:38,626 [DEBUG] api_version=None message='Post details' post_data=
2023-06-26 13:29:38,932 [DEBUG] https://api.stripe.com:443 "GET /v1/payment_intents/pi_3NNCfuIJTenxdmPo0bkUEnC6 HTTP/1.1" 200 1293
2023-06-26 13:29:38,932 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NNCfuIJTenxdmPo0bkUEnC6 response_code=200
2023-06-26 13:29:38,932 [DEBUG] body='{\n  "id": "pi_3NNCfuIJTenxdmPo0bkUEnC6",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NNCfuIJTenxdmPo0bkUEnC6_secret_w3yFtWlM4AA09FKCqsF6N3YyG",\n  "confirmation_method": "automatic",\n  "created": 1687775378,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": null,\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": null,\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "requires_payment_method",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-26 13:29:38,932 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_EwTUgrS3f4sr7q message='Dashboard link for request'
2023-06-26 13:29:38,933 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/payment_intents/pi_3NNCfuIJTenxdmPo0bkUEnC6/confirm
2023-06-26 13:29:38,933 [DEBUG] api_version=None message='Post details' post_data=payment_method=pm_1NM6SuIJTenxdmPocJWYIlQI
2023-06-26 13:29:40,100 [DEBUG] https://api.stripe.com:443 "POST /v1/payment_intents/pi_3NNCfuIJTenxdmPo0bkUEnC6/confirm HTTP/1.1" 200 1333
2023-06-26 13:29:40,100 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/payment_intents/pi_3NNCfuIJTenxdmPo0bkUEnC6/confirm response_code=200
2023-06-26 13:29:40,101 [DEBUG] body='{\n  "id": "pi_3NNCfuIJTenxdmPo0bkUEnC6",\n  "object": "payment_intent",\n  "amount": 15000,\n  "amount_capturable": 0,\n  "amount_details": {\n    "tip": {}\n  },\n  "amount_received": 15000,\n  "application": null,\n  "application_fee_amount": null,\n  "automatic_payment_methods": null,\n  "canceled_at": null,\n  "cancellation_reason": null,\n  "capture_method": "automatic",\n  "client_secret": "pi_3NNCfuIJTenxdmPo0bkUEnC6_secret_w3yFtWlM4AA09FKCqsF6N3YyG",\n  "confirmation_method": "automatic",\n  "created": 1687775378,\n  "currency": "usd",\n  "customer": "cus_O8NBUvatY5ecjm",\n  "description": null,\n  "invoice": null,\n  "last_payment_error": null,\n  "latest_charge": "ch_3NNCfuIJTenxdmPo081POazX",\n  "livemode": false,\n  "metadata": {},\n  "next_action": null,\n  "on_behalf_of": null,\n  "payment_method": "pm_1NM6SuIJTenxdmPocJWYIlQI",\n  "payment_method_options": {\n    "card": {\n      "installments": null,\n      "mandate_options": null,\n      "network": null,\n      "request_three_d_secure": "automatic"\n    }\n  },\n  "payment_method_types": [\n    "card"\n  ],\n  "processing": null,\n  "receipt_email": null,\n  "review": null,\n  "setup_future_usage": null,\n  "shipping": null,\n  "source": null,\n  "statement_descriptor": null,\n  "statement_descriptor_suffix": null,\n  "status": "succeeded",\n  "transfer_data": null,\n  "transfer_group": null\n}' message='API response body'
2023-06-26 13:29:40,101 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_jwtIdmjpEnb6EN message='Dashboard link for request'
2023-06-26 13:29:40,101 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC
2023-06-26 13:29:40,101 [DEBUG] api_version=None message='Post details' post_data=paid=True
2023-06-26 13:29:40,599 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC HTTP/1.1" 200 2802
2023-06-26 13:29:40,600 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC response_code=200
2023-06-26 13:29:40,601 [DEBUG] body='{\n  "id": "in_1NNCfhIJTenxdmPoHiUzhTyC",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": false,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687775365,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688639365,\n  "ending_balance": 0,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": "https://invoice.stripe.com/i/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POVZodzZwcEFoNGJPMEdQMFhodlJsdXA1YjhwUHFGLDc4MzE2MTgw0200HMUcDyIr?s=ap",\n  "invoice_pdf": "https://pay.stripe.com/invoice/acct_1NKzttIJTenxdmPo/test_YWNjdF8xTkt6dHRJSlRlbnhkbVBvLF9POVZodzZwcEFoNGJPMEdQMFhodlJsdXA1YjhwUHFGLDc4MzE2MTgw0200HMUcDyIr/pdf?s=ap",\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNCfhIJTenxdmPoHiUzhTyC/lines"\n  },\n  "livemode": false,\n  "metadata": {\n    "payment_intent": "pi_3NNCfuIJTenxdmPo0bkUEnC6"\n  },\n  "next_payment_attempt": null,\n  "number": "FF241CBB-0011",\n  "on_behalf_of": null,\n  "paid": true,\n  "paid_out_of_band": true,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687775365,\n  "period_start": 1687775365,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "paid",\n  "status_transitions": {\n    "finalized_at": 1687775380,\n    "marked_uncollectible_at": null,\n    "paid_at": 1687775380,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687775365\n}' message='API response body'
2023-06-26 13:29:40,601 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_qZbkkIFtMjslhN message='Dashboard link for request'
2023-06-26 13:29:41,321 [DEBUG] Event before-parameter-build.sqs.SendMessage: calling handler <function generate_idempotent_uuid at 0x10291ba60>
2023-06-26 13:29:41,322 [DEBUG] Calling endpoint provider with parameters: {'Region': 'us-east-1', 'UseDualStack': False, 'UseFIPS': False}
2023-06-26 13:29:41,322 [DEBUG] Endpoint provider result: https://sqs.us-east-1.amazonaws.com
2023-06-26 13:29:41,322 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function add_recursion_detection_header at 0x10291a340>
2023-06-26 13:29:41,323 [DEBUG] Event before-call.sqs.SendMessage: calling handler <function inject_api_version_header_if_needed at 0x10293d580>
2023-06-26 13:29:41,323 [DEBUG] Making request for OperationModel(name=SendMessage) with params: {'url_path': '/', 'query_string': '', 'method': 'POST', 'headers': {'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': 'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156'}, 'body': {'Action': 'SendMessage', 'Version': '2012-11-05', 'QueueUrl': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo', 'MessageBody': '{"invoiceId": "in_1NNCfhIJTenxdmPoHiUzhTyC", "accountId": 3, "quota": {"credits": 500, "seats": 3}}', 'MessageGroupId': 'https://sqs.us-east-1.amazonaws.com/020761065253/invoice_completed.fifo'}, 'url': 'https://sqs.us-east-1.amazonaws.com/', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x101c34d10>, 'has_streaming_input': False, 'auth_type': None}}
2023-06-26 13:29:41,323 [DEBUG] Event request-created.sqs.SendMessage: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x10aa5dd50>>
2023-06-26 13:29:41,323 [DEBUG] Event choose-signer.sqs.SendMessage: calling handler <function set_operation_specific_signer at 0x10291b920>
2023-06-26 13:29:41,324 [DEBUG] Calculating signature using v4 auth.
2023-06-26 13:29:41,324 [DEBUG] CanonicalRequest:
POST
/

content-type:application/x-www-form-urlencoded; charset=utf-8
host:sqs.us-east-1.amazonaws.com
x-amz-date:20230626T102941Z

content-type;host;x-amz-date
d35bc368e5c44a5a957df1aefd2e0a81f522b47de0faa5805872a254b5002d88
2023-06-26 13:29:41,325 [DEBUG] StringToSign:
AWS4-HMAC-SHA256
20230626T102941Z
20230626/us-east-1/sqs/aws4_request
57d4db644e0460efc5fd36914c3f8919b23abdc0defa6e932f247f375a9e6195
2023-06-26 13:29:41,325 [DEBUG] Signature:
f0903ac392f1342c2f67b49ae55cc5b195cfef9ff1cfc141b0f9bcf2e8515047
2023-06-26 13:29:41,325 [DEBUG] Event request-created.sqs.SendMessage: calling handler <function add_retry_headers at 0x10293dd00>
2023-06-26 13:29:41,325 [DEBUG] Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://sqs.us-east-1.amazonaws.com/, headers={'Content-Type': b'application/x-www-form-urlencoded; charset=utf-8', 'User-Agent': b'Boto3/1.26.156 Python/3.11.4 Darwin/22.4.0 Botocore/1.29.156', 'X-Amz-Date': b'20230626T102941Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQJVLUW4SWDPO6HVA/20230626/us-east-1/sqs/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature=f0903ac392f1342c2f67b49ae55cc5b195cfef9ff1cfc141b0f9bcf2e8515047', 'amz-sdk-invocation-id': b'b521fc38-7144-426e-ac83-4c86bc0f161f', 'amz-sdk-request': b'attempt=1', 'Content-Length': '385'}>
2023-06-26 13:29:41,326 [DEBUG] Certificate path: /opt/homebrew/lib/python3.11/site-packages/certifi/cacert.pem
2023-06-26 13:29:41,486 [DEBUG] https://sqs.us-east-1.amazonaws.com:443 "POST / HTTP/1.1" 200 431
2023-06-26 13:29:41,486 [DEBUG] Response headers: {'x-amzn-RequestId': '7ebf4b2c-d2f4-54b5-a7f8-163fb8219e96', 'Date': 'Mon, 26 Jun 2023 10:29:41 GMT', 'Content-Type': 'text/xml', 'Content-Length': '431'}
2023-06-26 13:29:41,486 [DEBUG] Response body:
b'<?xml version="1.0"?><SendMessageResponse xmlns="http://queue.amazonaws.com/doc/2012-11-05/"><SendMessageResult><MessageId>63cccb7a-1372-4a92-aa8e-66428329a0d6</MessageId><MD5OfMessageBody>993effe6114632fe7a79651baf2fa479</MD5OfMessageBody><SequenceNumber>37325558645088991232</SequenceNumber></SendMessageResult><ResponseMetadata><RequestId>7ebf4b2c-d2f4-54b5-a7f8-163fb8219e96</RequestId></ResponseMetadata></SendMessageResponse>'
2023-06-26 13:29:41,487 [DEBUG] Event needs-retry.sqs.SendMessage: calling handler <botocore.retryhandler.RetryHandler object at 0x10ad1cc50>
2023-06-26 13:29:41,487 [DEBUG] No retry needed.
2023-06-26 13:29:41,492 [INFO] 127.0.0.1 - - [26/Jun/2023 13:29:41] "POST /payment/intent/create HTTP/1.1" 200 -
2023-06-27 11:01:37,295 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-27 11:01:37,296 [INFO] [33mPress CTRL+C to quit[0m
2023-06-27 11:01:37,301 [INFO]  * Restarting with stat
2023-06-27 11:01:37,510 [WARNING]  * Debugger is active!
2023-06-27 11:01:37,517 [INFO]  * Debugger PIN: 534-985-391
2023-06-27 11:06:31,993 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8004
 * Running on http://192.168.1.106:8004
2023-06-27 11:06:31,995 [INFO] [33mPress CTRL+C to quit[0m
2023-06-27 11:06:31,997 [INFO]  * Restarting with stat
2023-06-27 11:06:32,541 [WARNING]  * Debugger is active!
2023-06-27 11:06:32,550 [INFO]  * Debugger PIN: 534-985-391
2023-06-27 11:06:46,287 [INFO] message='Request to Stripe api' method=post path=https://api.stripe.com/v1/invoices
2023-06-27 11:06:46,288 [DEBUG] api_version=None message='Post details' post_data=customer=cus_O8NBUvatY5ecjm&auto_advance=True&collection_method=send_invoice&days_until_due=10
2023-06-27 11:06:46,316 [DEBUG] Starting new HTTPS connection (1): api.stripe.com:443
2023-06-27 11:06:46,946 [DEBUG] https://api.stripe.com:443 "POST /v1/invoices HTTP/1.1" 200 2413
2023-06-27 11:06:46,952 [INFO] message='Stripe API response' path=https://api.stripe.com/v1/invoices response_code=200
2023-06-27 11:06:46,952 [DEBUG] body='{\n  "id": "in_1NNWvCIJTenxdmPouL1hZGLG",\n  "object": "invoice",\n  "account_country": "US",\n  "account_name": "Fivicon",\n  "account_tax_ids": null,\n  "amount_due": 0,\n  "amount_paid": 0,\n  "amount_remaining": 0,\n  "amount_shipping": 0,\n  "application": null,\n  "application_fee_amount": null,\n  "attempt_count": 0,\n  "attempted": false,\n  "auto_advance": true,\n  "automatic_tax": {\n    "enabled": false,\n    "status": null\n  },\n  "billing_reason": "manual",\n  "charge": null,\n  "collection_method": "send_invoice",\n  "created": 1687853206,\n  "currency": "usd",\n  "custom_fields": null,\n  "customer": "cus_O8NBUvatY5ecjm",\n  "customer_address": null,\n  "customer_email": "admin@fivicom.com",\n  "customer_name": null,\n  "customer_phone": null,\n  "customer_shipping": null,\n  "customer_tax_exempt": "none",\n  "customer_tax_ids": [],\n  "default_payment_method": null,\n  "default_source": null,\n  "default_tax_rates": [],\n  "description": null,\n  "discount": null,\n  "discounts": [],\n  "due_date": 1688717206,\n  "ending_balance": null,\n  "footer": null,\n  "from_invoice": null,\n  "hosted_invoice_url": null,\n  "invoice_pdf": null,\n  "last_finalization_error": null,\n  "latest_revision": null,\n  "lines": {\n    "object": "list",\n    "data": [],\n    "has_more": false,\n    "total_count": 0,\n    "url": "/v1/invoices/in_1NNWvCIJTenxdmPouL1hZGLG/lines"\n  },\n  "livemode": false,\n  "metadata": {},\n  "next_payment_attempt": null,\n  "number": null,\n  "on_behalf_of": null,\n  "paid": false,\n  "paid_out_of_band": false,\n  "payment_intent": null,\n  "payment_settings": {\n    "default_mandate": null,\n    "payment_method_options": null,\n    "payment_method_types": null\n  },\n  "period_end": 1687853206,\n  "period_start": 1687853206,\n  "post_payment_credit_notes_amount": 0,\n  "pre_payment_credit_notes_amount": 0,\n  "quote": null,\n  "receipt_number": null,\n  "rendering_options": null,\n  "shipping_cost": null,\n  "shipping_details": null,\n  "starting_balance": 0,\n  "statement_descriptor": null,\n  "status": "draft",\n  "status_transitions": {\n    "finalized_at": null,\n    "marked_uncollectible_at": null,\n    "paid_at": null,\n    "voided_at": null\n  },\n  "subscription": null,\n  "subtotal": 0,\n  "subtotal_excluding_tax": 0,\n  "tax": null,\n  "test_clock": null,\n  "total": 0,\n  "total_discount_amounts": [],\n  "total_excluding_tax": 0,\n  "total_tax_amounts": [],\n  "transfer_data": null,\n  "webhooks_delivered_at": 1687853206\n}' message='API response body'
2023-06-27 11:06:46,953 [DEBUG] link=https://dashboard.stripe.com/test/logs/req_UuBbODlMDtLdwK message='Dashboard link for request'
2023-06-27 11:06:47,722 [INFO] 127.0.0.1 - - [27/Jun/2023 11:06:47] "[35m[1mPOST /invoice/create HTTP/1.1[0m" 201 -
